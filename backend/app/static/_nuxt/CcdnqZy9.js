import{_ as x}from"./Xg5mm_XS.js";import{_ as V}from"./R30G0gbg.js";import{_ as w}from"./Cay9Qj57.js";import{_ as C}from"./BpByd896.js";import{n as $,a4 as U,o as s,c as i,b as e,w as u,y as B,r as k,a as E,G as m,F as S,D,s as F,z as h,C as A,t as p,d as q,_ as T}from"./Dinf_0xm.js";import{g as d,s as L}from"./DyhWwMfy.js";import{_ as M}from"./DfNyRKp3.js";const N=$({__name:"InquiryForm",props:{inquiry:{type:Object,default:{}}},emits:["cancel"],setup(I,{emit:_}){const c=_,n=U(I.inquiry);function v(){d.updateItem("inquiries",n.value),c("cancel"),Object.keys(n.value).forEach(l=>delete n.value[l])}return(l,t)=>{const y=x,b=V,r=w,o=C;return s(),i("form",{onSubmit:B(v,["prevent"]),class:"form form-check p-3",role:"form"},[e(b,{label:"Информация"},{default:u(()=>[e(y,{name:"info",place:"Информация",modelValue:n.value.info,"onUpdate:modelValue":t[0]||(t[0]=a=>n.value.info=a)},null,8,["modelValue"])]),_:1}),e(b,{label:"Инициатор"},{default:u(()=>[e(r,{name:"origins",place:"Инициатор",modelValue:n.value.origins,"onUpdate:modelValue":t[1]||(t[1]=a=>n.value.origins=a)},null,8,["modelValue"])]),_:1}),e(o,{onCancel:t[2]||(t[2]=a=>c("cancel"))})],32)}}}),j={class:"collapse card card-body mb-3",id:"clps_inquiry"},G={key:0},O={key:1},R={class:"fs-5 fw-medium text-primary p-1"},z={key:1,class:"p-3"},H=$({__name:"InquiryTab",setup(I){const _=k(!1),c=k(!1),f=k(""),n=k({});function v(){c.value=!1,f.value="";const l=document.getElementById("clps_inquiry");l==null||l.setAttribute("class","collapse card card-body mb-3")}return(l,t)=>{const y=N,b=M,r=V;return s(),i(S,null,[E("div",j,[e(y,{onCancel:v})]),m(d).anketa.inquiries.length?(s(),i("div",G,[(s(!0),i(S,null,D(m(d).anketa.inquiries,(o,a)=>(s(),i("div",{class:"card card-body mb-3",key:a,onMouseover:t[0]||(t[0]=g=>_.value=!0),onMouseout:t[1]||(t[1]=g=>_.value=!1)},[c.value&&f.value==o.id.toString()?(s(),F(y,{key:0,inquiry:n.value,onCancel:v},null,8,["inquiry"])):(s(),i("div",O,[e(r,null,{default:u(()=>[h(e(b,{onDelete:g=>m(d).deleteItem(o.id.toString(),"inquiries"),onUpdate:g=>{n.value=o,f.value=o.id.toString(),c.value=!0},hide:!0},null,8,["onDelete","onUpdate"]),[[A,_.value&&a&&m(d).anketa.persons.user_id==m(L).user.userId&&m(d).anketa.persons.standing]])]),_:2},1024),E("p",R,p("Запросы о сотруднике #"+(a+1)),1),e(r,{label:"Информация"},{default:u(()=>[q(p(o.info),1)]),_:2},1024),e(r,{label:"Иннициатор"},{default:u(()=>[q(p(o.origins),1)]),_:2},1024),e(r,{label:"Сотрудник"},{default:u(()=>[q(p(o.username),1)]),_:2},1024),e(r,{label:"Дата записи"},{default:u(()=>[q(p(new Date(o.created+" UTC").toLocaleString("ru-RU")),1)]),_:2},1024)]))],32))),128))])):(s(),i("p",z,"Запросы о сотруднике не поступали"))],64)}}}),Z=T(H,[["__scopeId","data-v-e8202b2d"]]);export{Z as default};
