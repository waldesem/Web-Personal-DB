import{_ as C}from"./CCtlyeFc.js";import{_ as w}from"./CxuAO0fP.js";import{_ as S}from"./R30G0gbg.js";import{_ as B}from"./Cay9Qj57.js";import{_ as F}from"./BpByd896.js";import{n as V,a4 as R,o as a,c as r,b as t,w as m,G as i,y as U,r as b,W as A,a as h,F as I,D as L,s as M,z as N,C as j,d as $,t as g,_ as G}from"./Dinf_0xm.js";import{e as O,g as u,s as z}from"./DyhWwMfy.js";import{_ as H}from"./DfNyRKp3.js";const T=V({__name:"RelationForm",props:{relation:{type:Object,default:{}}},emits:["cancel"],setup(E,{emit:d}){const n=d,o=R(E.relation);function k(){u.updateItem("relations",o.value),n("cancel"),Object.keys(o.value).forEach(l=>delete o.value[l])}return(l,e)=>{const y=w,_=S,D=B,p=F;return a(),r("form",{onSubmit:U(k,["prevent"]),class:"form form-check",role:"form"},[t(_,{label:"Тип связи"},{default:m(()=>[t(y,{name:"relation",need:!0,select:i(O).classes.relations,modelValue:o.value.relation,"onUpdate:modelValue":e[0]||(e[0]=c=>o.value.relation=c)},null,8,["select","modelValue"])]),_:1}),t(_,{label:"ID связи"},{default:m(()=>[t(D,{typeof:"number",name:"relation_id",place:"ID связи",need:!0,modelValue:o.value.relation_id,"onUpdate:modelValue":e[1]||(e[1]=c=>o.value.relation_id=c)},null,8,["modelValue"])]),_:1}),t(p,{onCancel:e[2]||(e[2]=c=>n("cancel"))})],32)}}}),W={class:"collapse card card-body mb-3",id:"relationer"},q={key:0},J={key:1},K={key:1},P=V({__name:"RelateDiv",setup(E){const d=b(!1),n=b(!1),f=b(""),o=b({});function k(){n.value=!1,f.value="";const l=document.getElementById("relationer");l==null||l.setAttribute("class","collapse card card-body mb-3")}return(l,e)=>{const y=C,_=T,D=H,p=S,c=A("router-link");return a(),r(I,null,[t(y,{id:"relationer",header:"Связи"}),h("div",W,[t(_,{onCancel:k})]),i(u).anketa.relations.length?(a(),r("div",q,[(a(!0),r(I,null,L(i(u).anketa.relations,(s,x)=>(a(),r("div",{key:x,class:"card card-body mb-3",onMouseover:e[1]||(e[1]=v=>d.value=!0),onMouseout:e[2]||(e[2]=v=>d.value=!1)},[n.value&&f.value==s.id.toString()?(a(),M(_,{key:0,relation:o.value,onCancel:e[0]||(e[0]=v=>n.value=!n.value)},null,8,["relation"])):(a(),r("div",J,[t(p,null,{default:m(()=>[N(t(D,{onDelete:v=>i(u).deleteItem(s.id.toString(),"relations"),onUpdate:v=>{o.value=s,f.value=s.id.toString(),n.value=!0},hide:!0},null,8,["onDelete","onUpdate"]),[[j,d.value&&i(u).anketa.persons.user_id==i(z).user.userId&&i(u).anketa.persons.standing]])]),_:2},1024),t(p,{label:"Тип"},{default:m(()=>[$(g(s.relation),1)]),_:2},1024),t(p,{label:"Связь"},{default:m(()=>[t(c,{to:{name:"profile",params:{id:s.relation_id}}},{default:m(()=>[$(" ID #"+g(s.relation_id),1)]),_:2},1032,["to"])]),_:2},1024)]))],32))),128))])):(a(),r("p",K,"Данные отсутствуют"))],64)}}}),ae=G(P,[["__scopeId","data-v-e708e9ce"]]);export{ae as default};
