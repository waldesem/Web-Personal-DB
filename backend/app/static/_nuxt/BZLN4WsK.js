import{_ as B}from"./CCtlyeFc.js";import{_ as I}from"./D1l-KubI.js";import{_ as S}from"./R30G0gbg.js";import{_ as C}from"./Cay9Qj57.js";import{_ as F}from"./BpByd896.js";import{n as $,a4 as L,o as n,c,b as o,w as t,s as v,B as y,y as A,r as V,a as N,G as i,F as E,D as W,z as M,C as R,d as m,t as p,_ as j}from"./Dinf_0xm.js";import{g as f,s as G}from"./DyhWwMfy.js";import{_ as O}from"./DfNyRKp3.js";const z=$({__name:"WorkplaceForm",props:{work:{type:Object,default:{}}},emits:["cancel"],setup(g,{emit:k}){const _=k,a=L(g.work);function b(){f.updateItem("workplaces",a.value),_("cancel"),Object.keys(a.value).forEach(d=>delete a.value[d])}return(d,l)=>{const D=I,s=S,u=C,r=F;return n(),c("form",{onSubmit:A(b,["prevent"]),class:"form form-check",role:"form"},[o(s,{label:"Текущая работа"},{default:t(()=>[o(D,{name:"now_work",modelValue:a.value.now_work,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value.now_work=e)},null,8,["modelValue"])]),_:1}),o(s,{label:"Начало работы"},{default:t(()=>[o(u,{name:"start_date",need:!0,place:"Начало работы",typeof:"date",modelValue:a.value.starts,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value.starts=e)},null,8,["modelValue"])]),_:1}),a.value.now_work?y("",!0):(n(),v(s,{key:0,label:"Окончание работы"},{default:t(()=>[o(u,{name:"end_date",place:"Окончание работы",typeof:"date",modelValue:a.value.finished,"onUpdate:modelValue":l[2]||(l[2]=e=>a.value.finished=e)},null,8,["modelValue"])]),_:1})),o(s,{label:"Место работы"},{default:t(()=>[o(u,{name:"workplace",place:"Место работы",need:!0,modelValue:a.value.workplace,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value.workplace=e)},null,8,["modelValue"])]),_:1}),o(s,{label:"Должность"},{default:t(()=>[o(u,{name:"position",place:"Должность",need:!0,modelValue:a.value.position,"onUpdate:modelValue":l[4]||(l[4]=e=>a.value.position=e)},null,8,["modelValue"])]),_:1}),o(s,{label:"Адрес организации"},{default:t(()=>[o(u,{name:"address",place:"Адрес организации",modelValue:a.value.addresses,"onUpdate:modelValue":l[5]||(l[5]=e=>a.value.addresses=e)},null,8,["modelValue"])]),_:1}),o(s,{label:"Причина увольнения"},{default:t(()=>[o(u,{name:"reason",place:"Причина увольнения",modelValue:a.value.reason,"onUpdate:modelValue":l[6]||(l[6]=e=>a.value.reason=e)},null,8,["modelValue"])]),_:1}),o(r,{onCancel:l[7]||(l[7]=e=>_("cancel"))})],32)}}}),H={class:"collapse card card-body mb-3",id:"worker"},T={key:0},q={key:1},J={key:1},K=$({__name:"WorkDiv",setup(g){const k=V(!1),_=V(!1),w=V(""),a=V({});function b(){_.value=!1,w.value="";const d=document.getElementById("worker");d==null||d.setAttribute("class","collapse card card-body mb-3")}return(d,l)=>{const D=B,s=z,u=O,r=S;return n(),c(E,null,[o(D,{id:"worker",header:"Работа"}),N("div",H,[o(s,{onCancel:b})]),i(f).anketa.workplaces.length?(n(),c("div",T,[(n(!0),c(E,null,W(i(f).anketa.workplaces,(e,x)=>(n(),c("div",{key:x,onMouseover:l[0]||(l[0]=U=>k.value=!0),onMouseout:l[1]||(l[1]=U=>k.value=!1),class:"card card-body mb-3"},[_.value&&w.value==e.id.toString()?(n(),v(s,{key:0,work:a.value,onCancel:b},null,8,["work"])):(n(),c("div",q,[o(r,null,{default:t(()=>[M(o(u,{onDelete:U=>i(f).deleteItem(e.id.toString(),"workplaces"),onUpdate:U=>{a.value=e,w.value=e.id.toString(),_.value=!0},hide:!0},null,8,["onDelete","onUpdate"]),[[R,k.value&&i(f).anketa.persons.user_id==i(G).user.userId&&i(f).anketa.persons.standing]])]),_:2},1024),e.now_work?(n(),v(r,{key:0,label:"Текущая работа"},{default:t(()=>[m(p(e.now_work?"Да":"Нет"),1)]),_:2},1024)):y("",!0),o(r,{label:"Начало работы"},{default:t(()=>[m(p(new Date(e.starts).toLocaleDateString("ru-RU")),1)]),_:2},1024),e.now_work?y("",!0):(n(),v(r,{key:1,label:"Окончание работы"},{default:t(()=>[m(p(new Date(e.finished).toLocaleDateString("ru-RU")),1)]),_:2},1024)),o(r,{label:"Место работы"},{default:t(()=>[m(p(e.workplace),1)]),_:2},1024),o(r,{label:"Адрес"},{default:t(()=>[m(p(e.addresses),1)]),_:2},1024),o(r,{label:"Должность"},{default:t(()=>[m(p(e.position),1)]),_:2},1024),e.reason?(n(),v(r,{key:2,label:"Причина увольнения"},{default:t(()=>[m(p(e.reason),1)]),_:2},1024)):y("",!0)]))],32))),128))])):(n(),c("p",J,"Данные отсутствуют"))],64)}}}),ae=j(K,[["__scopeId","data-v-498dc884"]]);export{ae as default};
