import{_ as C}from"./Cay9Qj57.js";import{_ as h}from"./R30G0gbg.js";import{_ as U}from"./Xg5mm_XS.js";import{_ as B}from"./BpByd896.js";import{n as w,a4 as D,o as s,c as m,b as n,w as i,y as A,r as k,a as S,G as a,F as $,D as T,s as L,z as V,C as x,t as p,d as y,_ as M}from"./Dinf_0xm.js";import{g as l,s as N}from"./DyhWwMfy.js";import{_ as j}from"./jj_8CMVi.js";import{_ as G}from"./DfNyRKp3.js";const O=w({__name:"InvestigationForm",props:{investigation:{type:Object,default:{}}},emits:["cancel"],setup(F,{emit:u}){const _=u,o=D(F.investigation);function f(){l.updateItem("investigations",o.value),_("cancel"),Object.keys(o.value).forEach(r=>delete o.value[r])}return(r,e)=>{const g=C,b=h,I=U,c=B;return s(),m("form",{onSubmit:A(f,["prevent"]),class:"form form-check p-3",role:"form"},[n(b,{label:"Тема проверки"},{default:i(()=>[n(g,{name:"theme",place:"Тема проверки",need:!0,modelValue:o.value.theme,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.theme=t)},null,8,["modelValue"])]),_:1}),n(b,{label:"Информация"},{default:i(()=>[n(I,{name:"info",place:"Информация",modelValue:o.value.info,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.info=t)},null,8,["modelValue"])]),_:1}),n(c,{onCancel:e[2]||(e[2]=t=>_("cancel"))})],32)}}}),R={class:"collapse card card-body mb-3",id:"clps_investigate"},q={key:0},z={key:1},H={class:"fs-5 fw-medium text-primary p-1"},J={key:1,class:"p-3"},K=w({__name:"InvestigateTab",setup(F){const u=k(!1),_=k(!1),v=k(""),o=k({});function f(){_.value=!1,v.value="";const r=document.getElementById("clps_investigate");r==null||r.setAttribute("class","collapse card card-body")}return(r,e)=>{const g=O,b=j,I=G,c=h;return s(),m($,null,[S("div",R,[n(g,{onCancel:f})]),a(l).anketa.investigations.length?(s(),m("div",q,[(s(!0),m($,null,T(a(l).anketa.investigations,(t,E)=>(s(),m("div",{key:E,onMouseover:e[1]||(e[1]=d=>u.value=!0),onMouseout:e[2]||(e[2]=d=>u.value=!1),class:"card card-body mb-3"},[_.value&&v.value==t.id.toString()?(s(),L(g,{key:0,investigation:o.value,onCancel:f},null,8,["investigation"])):(s(),m("div",z,[n(c,null,{default:i(()=>[V(n(I,{onDelete:d=>a(l).deleteItem(t.id.toString(),"investigations"),onUpdate:d=>{o.value=t,v.value=t.id.toString(),_.value=!0},"for-input":"investigations-file"},{default:i(()=>[V(n(b,{"name-id":"investigations-file",accept:"*",onSubmit:e[0]||(e[0]=d=>a(l).submitFile(d,"investigations",a(l).share.candId))},null,512),[[x,u.value]])]),_:2},1032,["onDelete","onUpdate"]),[[x,u.value&&E&&a(l).anketa.persons.user_id==a(N).user.userId&&a(l).anketa.persons.standing]])]),_:2},1024),S("p",H,p("Расследование/Проверка #"+(E+1)),1),n(c,{label:"Тема проверки"},{default:i(()=>[y(p(t.theme),1)]),_:2},1024),n(c,{label:"Информация"},{default:i(()=>[y(p(t.info),1)]),_:2},1024),n(c,{label:"Сотрудник"},{default:i(()=>[y(p(t.username),1)]),_:2},1024),n(c,{label:"Дата записи"},{default:i(()=>[y(p(new Date(t.created+" UTC").toLocaleString("ru-RU")),1)]),_:2},1024)]))],32))),128))])):(s(),m("p",J,"Расследования/Проверки не проводились"))],64)}}}),ne=M(K,[["__scopeId","data-v-88a90787"]]);export{ne as default};
