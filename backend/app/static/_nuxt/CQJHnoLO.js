import{_ as x}from"./DmUv_Nof.js";import{_ as w}from"./jj_8CMVi.js";import{_ as C}from"./DHCsx2iL.js";import{_ as $}from"./CGFYxdEI.js";import{n as S,q as D,s as u,w as c,o as n,b as m,c as i,a as t,B as h,z as B,H as F,y as I,G as f,d,t as r,D as j,F as V,p as L,e as M,I as N,_ as U}from"./Dinf_0xm.js";import{d as E}from"./Dot1e486.js";import{a as P,f as e,s as R,e as T,g as A}from"./DyhWwMfy.js";import"./86FpULSn.js";const a=l=>(L("data-v-06f606a7"),l=l(),M(),l),H={key:0,class:"position-relative"},q={class:"position-absolute bottom-100 end-0 px-3"},z=a(()=>t("label",{title:"Загрузить json",for:"file",class:"text-primary fs-5",style:{cursor:"pointer"}},[d("Загрузить "),t("i",{class:"bi bi-filetype-json fs-5"})],-1)),G={class:"row mb-3"},J={class:"form form-check",role:"form"},K=a(()=>t("i",{class:"bi bi-arrow-clockwise"},null,-1)),O=[K],Q=a(()=>t("tr",{height:"50px"},[t("th",{width:"5%"},"#"),t("th",{width:"15%"},"Регион"),t("th",null,"Фамилия Имя Отчество"),t("th",{width:"15%"},"Дата рождения"),t("th",{width:"15%"},"Обновлено"),t("th",{width:"15%"},"Сотрудник"),t("th",{width:"5%",class:"text-center"},"Статус")],-1)),W=["onClick"],X={class:"text-center"},Y={key:0,class:"spinner-border spinner-grow-sm text-danger",role:"status",title:"Проверка"},Z={key:1,class:"text-success fs-5",title:"Окончено"},tt=a(()=>t("i",{class:"bi bi-emoji-smile"},null,-1)),st=[tt],et={key:2,class:"fs-6 taxt-danger"},ot={key:3,class:"mb-4"},nt={class:"pagination justify-content-center"},it={class:"page-item"},rt=["disabled"],at=a(()=>t("i",{class:"bi bi-chevron-double-left"},null,-1)),lt={class:"page-item"},ct=["disabled"],dt=a(()=>t("i",{class:"bi bi-chevron-double-right"},null,-1)),pt=S({__name:"persons",setup(l){D(async()=>{P.alertMessage.show=!1,await e.getCandidates()});const p=E(()=>{e.getCandidates()},500);function b(_){N().push(`/staffsec/profile/${_}`)}return(_,o)=>{const g=x,y=w,v=C,k=$;return n(),u(k,null,{default:c(()=>[m(g,{"page-header":"Кандидаты"}),R.user.role==T.classes.roles.user?(n(),i("div",H,[t("div",q,[z,m(y,{accept:".json",onSubmit:o[0]||(o[0]=s=>A.submitFile(s,"persons","0"))})])])):h("",!0),t("div",G,[t("form",J,[B(t("input",{onInput:o[1]||(o[1]=I((...s)=>f(p)&&f(p)(...s),["prevent"])),class:"form-control",name:"search",id:"search",type:"text",placeholder:"поиск по фамилии, имени, отчеству, дате рождения, инн","onUpdate:modelValue":o[2]||(o[2]=s=>e.persons.search=s)},null,544),[[F,e.persons.search]])])]),e.persons.candidates.length?(n(),u(v,{key:1,"tbl-class":"table align-middle table-hover"},{caption:c(()=>[d(r(`Обновлено: ${e.persons.updated}`)+" ",1),t("a",{class:"btn btn-link fs-5",href:"#",style:{"text-decoration":"none"},title:"Обновить",onClick:o[3]||(o[3]=s=>e.getCandidates())},O)]),thead:c(()=>[Q]),tbody:c(()=>[(n(!0),i(V,null,j(e.persons.candidates,s=>(n(),i("tr",{key:s.id,height:"50px",onClick:_t=>b(s.id)},[t("td",null,r(s.id),1),t("td",null,r(s.region),1),t("td",null,r(`${s.surname} ${s.firstname} ${s.patronymic?s.patronymic:""}`),1),t("td",null,r(new Date(s.birthday).toLocaleDateString("ru-RU")),1),t("td",null,r(new Date(s.created).toLocaleDateString("ru-RU")),1),t("td",null,r(s.username?s.username.toString().split(" ")[0]:""),1),t("td",X,[s.standing?(n(),i("div",Y)):(n(),i("div",Z,st))])],8,W))),128))]),_:1})):(n(),i("p",et,"Ничего не найдено")),e.persons.prev||e.persons.next?(n(),i("nav",ot,[t("ul",nt,[t("li",it,[t("button",{disabled:!e.persons.prev,type:"button",class:"btn btn-link btn-outline-primary",onClick:o[4]||(o[4]=s=>e.getCandidates(e.persons.page-1))},[at,d(" Назад ")],8,rt)]),t("li",lt,[t("button",{disabled:!e.persons.next,type:"button",class:"btn btn-link btn-outline-primary",onClick:o[5]||(o[5]=s=>e.getCandidates(e.persons.page+1))},[d(" Вперёд "),dt],8,ct)])])])):h("",!0)]),_:1})}}}),kt=U(pt,[["__scopeId","data-v-06f606a7"]]);export{kt as default};
