const __vite__fileDeps=["./ActionHeader-BhT5dlQf.js","./index-a1q1DOXp.js","./index-6fGrG267.css","./ActionIcons-Bcx3eW4p.js","./RelationForm-CWDLBNCM.js","./utilities-DuY9392d.js","./state-8kq10HP3.js","./LabelSlot-COZEDAF1.js","./_plugin-vue_export-helper-DlAUqK2U.js","./LabelSlot-BKRWK_aH.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as y,i as E,n as L,l as R,o as n,c as l,b as i,u as o,g as p,B as D,F as g,r as C,w as r,q as V,z as $,x as c,t as v,e as m,f as _}from"./index-a1q1DOXp.js";import{s as u}from"./state-8kq10HP3.js";import"./utilities-DuY9392d.js";const h={key:1,class:"collapse show",id:"relation"},x={key:1},B={key:2},U=y({__name:"RelationDiv",setup(P){const A=m(()=>_(()=>import("./ActionHeader-BhT5dlQf.js"),__vite__mapDeps([0,1,2]),import.meta.url)),S=m(()=>_(()=>import("./ActionIcons-Bcx3eW4p.js"),__vite__mapDeps([3,1,2]),import.meta.url)),f=m(()=>_(()=>import("./RelationForm-CWDLBNCM.js"),__vite__mapDeps([4,1,2,5,6]),import.meta.url)),s=m(()=>_(()=>import("./LabelSlot-COZEDAF1.js"),__vite__mapDeps([7,1,2,8,9]),import.meta.url));E(async()=>{await u.getItem("relations")});const e=L({action:"",itemId:"",item:{},showActions:!1});function I(k){u.updateItem(e.value.action,"relations",e.value.itemId,k),e.value.action="",e.value.itemId=""}return(k,a)=>{const w=R("router-link");return n(),l(g,null,[i(o(A),{id:"relation",header:"Связи",action:e.value.action,onAction:a[0]||(a[0]=t=>e.value.action=e.value.action?"":"create")},null,8,["action"]),e.value.action==="create"?(n(),p(o(f),{key:0,onSubmit:I,onCancel:a[1]||(a[1]=t=>{e.value.action="",e.value.itemId=""})})):D("",!0),o(u).anketa.relations.length?(n(),l("div",h,[(n(!0),l(g,null,C(o(u).anketa.relations,(t,b)=>(n(),l("div",{key:b,class:"card card-body mb-3",onMouseover:a[3]||(a[3]=d=>e.value.showActions=!0),onMouseout:a[4]||(a[4]=d=>e.value.showActions=!1)},[e.value.action==="update"&&e.value.itemId===t.id.toString()?(n(),p(o(f),{key:0,relation:e.value.item,onSubmit:I,onCancel:a[2]||(a[2]=d=>{e.value.action="",e.value.itemId=""})},null,8,["relation"])):(n(),l("div",x,[i(o(s),null,{default:r(()=>[V(i(o(S),{hide:!0,onDelete:d=>o(u).deleteItem(t.id.toString(),"relations"),onUpdate:d=>{e.value.action="update",e.value.item=t,e.value.itemId=t.id.toString()}},null,8,["onDelete","onUpdate"]),[[$,e.value.showActions]])]),_:2},1024),i(o(s),{label:"Тип"},{default:r(()=>[c(v(t.relation),1)]),_:2},1024),i(o(s),{label:"Связь","no-print":!0},{default:r(()=>[i(w,{to:{name:"profile",params:{id:String(t.relation_id)}}},{default:r(()=>[c(" ID #"+v(t.relation_id),1)]),_:2},1032,["to"])]),_:2},1024),i(o(s),{label:"Дата"},{default:r(()=>[c(v(new Date(String(t.created)).toLocaleDateString("ru-RU")),1)]),_:2},1024),t.updated?(n(),p(o(s),{key:0,label:"Обновлено"},{default:r(()=>[c(v(new Date(String(t.updated)).toLocaleDateString("ru-RU")),1)]),_:2},1024)):D("",!0)]))],32))),128))])):(n(),l("p",B,"Данные отсутствуют"))],64)}}});export{U as default};
