const __vite__fileDeps=["./HeaderDiv-CG6mD9Uz.js","./index-DvJzzJdO.js","./index-BqKjTnG4.css","./TableSlots-BzTeSQu4.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as D,k as x,r as b,c as l,b as m,u,e,g as $,y as C,w as L,m as S,l as p,z as c,f as R,F as h,n as T,o as n,p as v,t as s,A as U,h as g,j as f}from"./index-DvJzzJdO.js";import{d as V}from"./utilities-Dot1e486.js";import{c as P,b as A}from"./state-ORi_Y0A4.js";const B={class:"row mb-3"},E={class:"form form-check",role:"form"},N=e("tr",{height:"50px"},[e("th",{width:"5%"},"#"),e("th",{width:"15%"},"Регион"),e("th",null,"Фамилия Имя Отчество"),e("th",{width:"15%"},"Дата рождения"),e("th",{width:"15%"},"Статус"),e("th",{width:"15%"},"Обновлено"),e("th",{width:"15%"},"Сотрудник")],-1),I={key:1},M={key:2},j={class:"pagination justify-content-center py-3"},q=D({__name:"PersonsPage",setup(z){const _=g(()=>f(()=>import("./HeaderDiv-CG6mD9Uz.js"),__vite__mapDeps([0,1,2]),import.meta.url)),w=g(()=>f(()=>import("./TableSlots-BzTeSQu4.js"),__vite__mapDeps([3,1,2]),import.meta.url));x(async()=>{await o()});const y=i=>{switch(i){case"Правка":return"primary";case"ПФО":return"info";case"Окончено":return"secondary";case"Сохранено":return"warning"}},a=b({candidates:[],page:1,prev:!1,next:!1,search:"",updated:`${new Date().toLocaleDateString("ru-RU")} в ${new Date().toLocaleTimeString("ru-RU")}`});async function o(i=1){a.value.page=i;try{const r=await P.get(`${A}/index/${a.value.page}`,{params:{search:a.value.search}});[a.value.candidates,a.value.next,a.value.prev]=r.data,a.value.updated=`${new Date().toLocaleDateString("ru-RU")} в ${new Date().toLocaleTimeString("ru-RU")}`}catch(r){console.error(r)}}const d=V(()=>{o()},500);return(i,r)=>{const k=T("router-link");return n(),l(h,null,[m(u(_),{"page-header":"Кандидаты"}),e("div",B,[e("form",E,[$(e("input",{onInput:r[0]||(r[0]=L((...t)=>u(d)&&u(d)(...t),["prevent"])),class:"form-control",name:"search",id:"search",type:"text",placeholder:"поиск по фамилии, имени, отчеству, инн","onUpdate:modelValue":r[1]||(r[1]=t=>a.value.search=t)},null,544),[[C,a.value.search]])])]),a.value.candidates.length?(n(),S(u(w),{key:0},{caption:p(()=>[v(s(`Обновлено: ${a.value.updated}`)+" ",1),e("a",{class:"btn btn-link fs-5",href:"#",style:{"text-decoration":"none"},title:"Обновить",onClick:r[2]||(r[2]=t=>o())}," ↻ ")]),thead:p(()=>[N]),tbody:p(()=>[(n(!0),l(h,null,U(a.value.candidates,t=>(n(),l("tr",{key:t.id,height:"50px"},[e("td",null,s(t.id),1),e("td",null,s(t.region),1),e("td",null,[m(k,{to:{name:"profile",params:{id:t.id}}},{default:p(()=>[v(s(`${t.surname} ${t.firstname} ${t.patronymic?t.patronymic:""}`),1)]),_:2},1032,["to"])]),e("td",null,s(new Date(t.birthday).toLocaleDateString("ru-RU")),1),e("td",null,[e("label",{class:c(`fs-6 badge bg-${y(t.standing)}`)},s(t.standing),3)]),e("td",null,s(new Date(t.created).toLocaleDateString("ru-RU")),1),e("td",null,s(t.username?t.username.toString().split(" ")[0]:""),1)]))),128))]),_:1})):(n(),l("p",I,"Ничего не найдено")),a.value.prev||a.value.next?(n(),l("nav",M,[e("ul",j,[e("li",{class:c(["page-item",{disabled:!a.value.prev}])},[e("a",{class:"page-link",href:"#",onClick:r[3]||(r[3]=t=>o(a.value.page-1))}," Предыдущая ")],2),e("li",{class:c(["page-item",{disabled:!a.value.next}])},[e("a",{class:"page-link",href:"#",onClick:r[4]||(r[4]=t=>o(a.value.page+1))}," Следующая ")],2)])])):R("",!0)],64)}}});export{q as default};
