const __vite__fileDeps=["assets/FileForm-BZlKJiHy.js","assets/index-BhT_3F5B.js","assets/index-D3owuatg.css","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/FileForm-DDpv4RvI.css","assets/LabelSlot-C8Y-0GKw.js","assets/SelectObject-C9bGtWm8.js","assets/InputElement-BRa9pb8S.js","assets/TextArea-BlZpyNHg.js","assets/BtnGroup-CManQ3k2.js","assets/GroupContent-CBkEmxXT.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as L,U as P,q as T,D as b,o as y,c as C,k as $,w as n,b as t,u as l,K as F,z as S,e as s,f as m,h as V,s as f,J as E,I as A,j as p}from"./index-BhT_3F5B.js";const B=L({__name:"ResumeForm",props:{action:{type:String,default:"create"},resume:{type:Object,default:{}}},emits:["cancel"],setup(U,{emit:g}){const R=s(()=>m(()=>import("./FileForm-BZlKJiHy.js"),__vite__mapDeps([0,1,2,3,4]))),u=s(()=>m(()=>import("./LabelSlot-C8Y-0GKw.js"),__vite__mapDeps([5,1,2]))),D=s(()=>m(()=>import("./SelectObject-C9bGtWm8.js"),__vite__mapDeps([6,1,2]))),r=s(()=>m(()=>import("./InputElement-BRa9pb8S.js"),__vite__mapDeps([7,1,2]))),c=s(()=>m(()=>import("./TextArea-BlZpyNHg.js"),__vite__mapDeps([8,1,2]))),I=s(()=>m(()=>import("./BtnGroup-CManQ3k2.js"),__vite__mapDeps([9,1,2]))),x=s(()=>m(()=>import("./GroupContent-CBkEmxXT.js"),__vite__mapDeps([10,1,2]))),v=g,i=U,o=P(i.resume),_=T(new FormData);async function O(){try{const d=i.action==="create"?await V.post(`${f}/resume/${i.action}`,o.value):await V.patch(`${f}/resume/${E.share.candId}`,o.value),{message:e}=d.data;i.action==="create"?A.push({name:"profile",params:{id:e}}):(v("cancel"),E.getResume()),p.setAlert("alert-success","Данные успешно обновлены")}catch(d){p.setAlert("alert-danger",`Возникла ошибка ${d}`)}}async function k(d){const e=d.target;if(e.files){_.value.append("file",e.files[0]);try{const a=await V.post(`${f}/file/anketa/0`,_.value),{message:w}=a.data;A.push({name:"profile",params:{id:w}}),p.setAlert("alert-success","Файл успешно загружен")}catch(a){console.error(a)}}else p.setAlert("alert-warning","Ошибка при загрузке файла")}return console.log(b.regions),(d,e)=>(y(),C("form",{onSubmit:S(O,["prevent"]),class:"form form-check",role:"form"},[i.action==="create"?(y(),$(l(u),{key:0,label:"Загрузить анкету"},{default:n(()=>[t(l(R),{accept:".json",onSubmit:k},null,8,["accept"])]),_:1})):F("",!0),t(l(u),{label:"Регион"},{default:n(()=>[t(l(D),{name:"region_id",select:l(b).regions,modelValue:o.value.region_id,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.region_id=a)},null,8,["select","modelValue"])]),_:1}),t(l(u),{label:"Фамилия"},{default:n(()=>[t(l(r),{need:!0,name:"surname",place:"Фамилия*",pattern:"[А-Яа-яЁё\\-'\\s]+",modelValue:o.value.surname,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.surname=a)},null,8,["modelValue"])]),_:1}),t(l(u),{label:"Имя"},{default:n(()=>[t(l(r),{need:!0,name:"firstname",place:"Имя*",pattern:"[А-Яа-яЁё\\-'\\s]+",modelValue:o.value.firstname,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.firstname=a)},null,8,["modelValue"])]),_:1}),t(l(u),{label:"Отчество"},{default:n(()=>[t(l(r),{name:"patronymic",place:"Отчество",modelValue:o.value.patronymic,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.patronymic=a)},null,8,["modelValue"])]),_:1}),t(l(u),{label:"Дата рождения*"},{default:n(()=>[t(l(r),{need:!0,name:"birthday",place:"Дата рождения*",typeof:"date",modelValue:o.value.birthday,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.birthday=a)},null,8,["modelValue"])]),_:1}),t(l(u),{label:"Место рождения"},{default:n(()=>[t(l(r),{name:"birthplace",place:"Место рождения",modelValue:o.value.birthplace,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.birthplace=a)},null,8,["modelValue"])]),_:1}),t(l(u),{label:"Гражданство"},{default:n(()=>[t(l(r),{name:"country",place:"Гражданство",modelValue:o.value.country,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.country=a)},null,8,["modelValue"])]),_:1}),t(l(u),{label:"Двойное гражданство"},{default:n(()=>[t(l(r),{name:"ext_country",place:"Двойное гражданство",modelValue:o.value.ext_country,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.ext_country=a)},null,8,["modelValue"])]),_:1}),t(l(u),{label:"СНИЛС"},{default:n(()=>[t(l(r),{name:"snils",place:"СНИЛС",pattern:"[0-9]{11}",modelValue:o.value.snils,"onUpdate:modelValue":e[8]||(e[8]=a=>o.value.snils=a)},null,8,["modelValue"])]),_:1}),t(l(u),{label:"ИНН"},{default:n(()=>[t(l(r),{name:"inn",place:"ИНН",max:"12",pattern:"[0-9]{12}",modelValue:o.value.inn,"onUpdate:modelValue":e[9]||(e[9]=a=>o.value.inn=a)},null,8,["modelValue"])]),_:1}),t(l(u),{label:"Семейное положение"},{default:n(()=>[t(l(r),{name:"marital",place:"Семейное положение",modelValue:o.value.marital,"onUpdate:modelValue":e[10]||(e[10]=a=>o.value.marital=a)},null,8,["modelValue"])]),_:1}),t(l(u),{label:"Образование"},{default:n(()=>[t(l(c),{name:"education",place:"Образование",modelValue:o.value.education,"onUpdate:modelValue":e[11]||(e[11]=a=>o.value.education=a)},null,8,["modelValue"])]),_:1}),t(l(u),{label:"Дополнительно"},{default:n(()=>[t(l(c),{name:"addition",place:"Дополнительно",modelValue:o.value.addition,"onUpdate:modelValue":e[12]||(e[12]=a=>o.value.addition=a)},null,8,["modelValue"])]),_:1}),t(l(I),null,{default:n(()=>[t(l(x),{onCancel:e[13]||(e[13]=a=>v("cancel"))})]),_:1})],32))}});export{B as default};
