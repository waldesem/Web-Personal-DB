const __vite__fileDeps=["./HeaderDiv-C0AWTJb8.js","./index-Dx3HiUnq.js","./index-6fGrG267.css","./UserForm-8MZGdz98.js","./utilities-BVKB9Dez.js","./state-s_e9P3m1.js","./SwitchBox-4YJIQzP3.js","./TableSlots-Cqclv49u.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as I,i as U,B as k,n as S,j as P,c as p,b as r,u as n,a as e,q as m,v as T,s as A,z as b,w as i,F as f,l as B,o as v,r as C,t as l,x as L,e as u,p as O,m as R,f as c}from"./index-Dx3HiUnq.js";import{b as $,s as q,t as g,d as F}from"./utilities-BVKB9Dez.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N=d=>(O("data-v-7606723d"),d=d(),R(),d),j={class:"row mb-3"},z={class:"d-flex justify-content-between mb-3"},H=N(()=>e("tr",null,[e("th",{width:"10%"},"#"),e("th",null,"Имя пользователя"),e("th",{width:"15%"},"Логин"),e("th",{width:"10%"},"Блокировка"),e("th",{width:"15%"},"Создан"),e("th",{width:"15%"},"Вход"),e("th",{width:"15%"},"Регион")],-1)),G={colspan:"7"},J={width:"10%"},K={width:"15%"},Q={width:"10%"},W={width:"15%"},X={width:"15%"},Y={width:"15%"},Z=I({__name:"UsersPage",setup(d){const x=u(()=>c(()=>import("./HeaderDiv-C0AWTJb8.js"),__vite__mapDeps([0,1,2]),import.meta.url)),y=u(()=>c(()=>import("./UserForm-8MZGdz98.js"),__vite__mapDeps([3,1,2,4,5]),import.meta.url)),D=u(()=>c(()=>import("./SwitchBox-4YJIQzP3.js"),__vite__mapDeps([6,1,2]),import.meta.url)),h=u(()=>c(()=>import("./TableSlots-Cqclv49u.js"),__vite__mapDeps([7,1,2]),import.meta.url)),w=F(()=>{_()},500);U(()=>{_()});const V=k(()=>o.value.users.filter(a=>a.deleted==o.value.viewDeleted)),o=S({action:"",search:"",viewDeleted:!1,users:[]});async function _(){try{const a=await $.get(`${q}/users`,{params:{search:o.value.search}});o.value.users=a.data,console.log(a.data)}catch(a){a.request.status==401||a.request.status==403?P.push({name:"login"}):console.error(a)}}return(a,s)=>{const E=B("router-link");return v(),p(f,null,[r(n(x),{"page-header":"Список пользователей",cls:"text-secondary py-5"}),e("div",j,[m(e("input",{onInput:s[0]||(s[0]=A((...t)=>n(w)&&n(w)(...t),["prevent"])),class:"form-control mb-3",name:"search",id:"search",type:"text",placeholder:"Поиск по имени пользователя","onUpdate:modelValue":s[1]||(s[1]=t=>o.value.search=t)},null,544),[[T,o.value.search]])]),e("div",z,[r(n(D),{name:"viewDeleted",label:"Показать удаленные",modelValue:o.value.viewDeleted,"onUpdate:modelValue":s[2]||(s[2]=t=>o.value.viewDeleted=t)},null,8,["modelValue"])]),m(r(n(y),{action:o.value.action,onUpdate:s[3]||(s[3]=t=>{o.value.action="",_()}),onCancel:s[4]||(s[4]=t=>o.value.action="")},null,8,["action"]),[[b,o.value.action]]),m(r(n(h),{"tbl-class":"table align-middle"},{caption:i(()=>[e("button",{class:"btn btn-link text-secondary",type:"button",onClick:s[5]||(s[5]=t=>o.value.action===""?o.value.action="create":o.value.action="")}," Добавить пользователя ")]),thead:i(()=>[H]),tbody:i(()=>[e("tr",null,[e("td",G,[r(n(h),{id:"overflow","tbl-class":"table table-hover align-middle no-bottom-border"},{tbody:i(()=>[(v(!0),p(f,null,C(V.value,t=>(v(),p("tr",{height:"50px",key:t.id},[e("td",J,l(t.id),1),e("td",null,l(t.fullname),1),e("td",K,[r(E,{to:{name:"user",params:{id:t.id}}},{default:i(()=>[L(l(t.username),1)]),_:2},1032,["to"])]),e("td",Q,l(t.blocked?"Да":"Нет"),1),e("td",W,l(n(g)(t.pswd_create)),1),e("td",X,l(n(g)(t.last_login)),1),e("td",Y,l(t.region),1)]))),128))]),_:1})])])]),_:1},512),[[b,o.value.action===""]])],64)}}}),se=M(Z,[["__scopeId","data-v-7606723d"]]);export{se as default};
