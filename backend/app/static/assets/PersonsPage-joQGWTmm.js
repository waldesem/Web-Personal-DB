const __vite__fileDeps=["assets/HeaderDiv-DM__yhnK.js","assets/index-BhT_3F5B.js","assets/index-D3owuatg.css","assets/SelectObject-C9bGtWm8.js","assets/TableSlots-CJWofkZ7.js","assets/AscDesc-C7iROhZk.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/AscDesc-BQH9JYAH.css","assets/PageSwitcher-BQD4nF0-.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as E,n as L,q as T,h as A,s as R,o as c,c as _,t as S,v as B,u as t,a as o,F as w,x as b,b as a,y as I,z as O,k as U,w as h,r as N,A as f,B as d,C as l,D as y,E as M,G as F,e as p,H as z,f as v}from"./index-BhT_3F5B.js";const H={class:"mb-5"},j=o("button",{class:"btn btn-link",type:"button","data-bs-toggle":"collapse","data-bs-target":"#lastViewed"}," Последние просмотренные: ",-1),q={class:"collapse show",id:"lastViewed"},G={class:"row mb-3"},Y={class:"col-md-2"},J={class:"col-md-10"},K=o("i",{class:"bi bi-arrow-clockwise"},null,-1),Q=[K],W={height:"50px"},X={width:"10%"},Z={width:"15%"},ee={width:"15%"},te={width:"10%"},se={width:"10%"},oe={width:"15%"},ae={key:1},de=E({__name:"PersonsPage",setup(re){const D=p(()=>v(()=>import("./HeaderDiv-DM__yhnK.js"),__vite__mapDeps([0,1,2]))),$=p(()=>v(()=>import("./SelectObject-C9bGtWm8.js"),__vite__mapDeps([3,1,2]))),x=p(()=>v(()=>import("./TableSlots-CJWofkZ7.js"),__vite__mapDeps([4,1,2]))),r=p(()=>v(()=>import("./AscDesc-C7iROhZk.js"),__vite__mapDeps([5,1,2,6,7]))),k=p(()=>v(()=>import("./PageSwitcher-BQD4nF0-.js"),__vite__mapDeps([8,1,2])));L(async()=>{await u()});const V={1:"success",2:"success",3:"success",4:"primary",5:"primary",6:"danger",7:"info",8:"secondary",9:"light",10:"warning",11:"light"},P={1:"января",2:"февраля",3:"марта",4:"апреля",5:"мая",6:"июня",7:"июля",8:"августа",9:"сентября",10:"октября",11:"ноября",12:"декабря"},s=T({candidates:[],items:{officer:"Мои кандидаты",search:"Все кандидаты"},page:1,prev:!1,next:!1,search:"",sort:"id",order:"desc",path:"search",updated:`${new Date().toLocaleDateString("ru-RU")} в ${new Date().toLocaleTimeString("ru-RU")}`});async function u(m=1){s.value.page=m;try{const i=await A.get(`${R}/index/${s.value.path}/${s.value.page}`,{params:{search:s.value.search,sort:s.value.sort,order:s.value.order}}),[g,e]=i.data;s.value.candidates=g,s.value.prev=e.has_prev,s.value.next=e.has_next,s.value.updated=`${new Date().toLocaleDateString("ru-RU")} в ${new Date().toLocaleTimeString("ru-RU")}`}catch(i){console.error(i)}}function n(m,i){s.value.sort=m,s.value.order=i,u()}const C=z(()=>{s.value.path="search",!(s.value.search.length<3)&&u()},500);return(m,i)=>{const g=N("router-link");return c(),_(w,null,[S(o("div",H,[j,o("div",q,[o("ul",null,[(c(!0),_(w,null,b(t(f).viewed.reverse().slice(0,3),e=>(c(),_("li",{key:e.id,class:"p-2"},[a(g,{to:{name:"profile",params:{id:e.id}}},{default:h(()=>[d(l(`${e.surname} ${e.firstname} ${e.patronymic?e.patronymic:""}`),1)]),_:2},1032,["to"])]))),128))])])],512),[[B,t(f).viewed.length]]),a(t(D),{"page-header":"Кандидаты"}),o("div",G,[o("div",Y,[a(t($),{name:"action",select:s.value.items,modelValue:s.value.path,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value.path=e),onSubmitData:u},null,8,["select","modelValue"])]),o("div",J,[S(o("input",{onInput:i[1]||(i[1]=O((...e)=>t(C)&&t(C)(...e),["prevent"])),class:"form-control",name:"search",id:"search",type:"text",placeholder:"поиск по Фамилии, Имени, Отчеству, ИНН (не менее 3-х символов)","onUpdate:modelValue":i[2]||(i[2]=e=>s.value.search=e)},null,544),[[I,s.value.search]])])]),s.value.candidates.length?(c(),U(t(x),{key:0,"div-class":"table caption-top align-middle py-3"},{caption:h(()=>[d(l(`Обновлено: ${s.value.updated}`)+" ",1),o("a",{href:"#",title:"Обновить",onClick:i[3]||(i[3]=e=>u())},Q)]),thead:h(()=>[o("tr",W,[o("th",X,[d(" # "),a(t(r),{order:"desc",sort:"id",onSortCandidates:n}),a(t(r),{order:"asc",sort:"id",onSortCandidates:n})]),o("th",Z,[d(" Регион "),a(t(r),{order:"desc",sort:"region_id",onSortCandidates:n}),a(t(r),{order:"asc",sort:"region_id",onSortCandidates:n})]),o("th",null,[d(" Фамилия Имя Отчество "),a(t(r),{order:"desc",sort:"surname",onSortCandidates:n}),a(t(r),{order:"asc",sort:"surname",onSortCandidates:n})]),o("th",ee,[d(" Дата рождения "),a(t(r),{order:"desc",sort:"birthday",onSortCandidates:n}),a(t(r),{order:"asc",sort:"birthday",onSortCandidates:n})]),o("th",te,[d(" Статус "),a(t(r),{order:"desc",sort:"status_id",onSortCandidates:n}),a(t(r),{order:"asc",sort:"status_id",onSortCandidates:n})]),o("th",se,[d(" Создан "),a(t(r),{order:"desc",sort:"created",onSortCandidates:n}),a(t(r),{order:"asc",sort:"created",onSortCandidates:n})]),o("th",oe,[d(" Сотрудник "),a(t(r),{order:"desc",sort:"user_id",onSortCandidates:n}),a(t(r),{order:"asc",sort:"user_id",onSortCandidates:n})])])]),tbody:h(()=>[(c(!0),_(w,null,b(s.value.candidates,e=>(c(),_("tr",{key:e.id,height:"50px"},[o("td",null,l(e.id),1),o("td",null,l(t(y).regions[e.region_id]),1),o("td",null,[a(g,{to:{name:"profile",params:{id:e.id}},onClick:ne=>t(f).viewed.push(e)},{default:h(()=>[d(l(`${e.surname} ${e.firstname} ${e.patronymic?e.patronymic:""}`),1)]),_:2},1032,["to","onClick"])]),o("td",null,l(`${new Date(e.birthday).getDate()} ${P[(new Date(e.birthday).getMonth()+1).toString()]} ${new Date(e.birthday).getFullYear()} года`),1),o("td",null,[o("label",{class:M(`fs-6 badge bg-${V[e.status_id]}`)},l(t(y).status[e.status_id]),3)]),o("td",null,l(t(F)(e.created)),1),o("td",null,l(e.user_id?t(y).users[e.user_id].split(" ")[0]:""),1)]))),128))]),_:1})):(c(),_("p",ae,"Ничего не найдено")),a(t(k),{has_prev:s.value.prev,has_next:s.value.next,switchPrev:s.value.page-1,switchNext:s.value.page+1,onSwitch:u},null,8,["has_prev","has_next","switchPrev","switchNext"])],64)}}});export{de as default};
