const __vite__fileDeps=["./HeaderDiv-DTm--MTY.js","./index-1yFXvMEA.js","./index-BqKjTnG4.css","./UserForm-Ckdwsgb0.js","./state-QybiP1xm.js","./SwitchBox-CIPYMvHR.js","./TableSlots-DVAr-u2W.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as k,k as I,C as U,r as S,c as p,b as l,u as s,e as t,g as m,y as C,w as P,v as b,l as i,F as f,n as T,o as v,z as A,t as n,p as B,h as c,s as L,x as O,j as u}from"./index-1yFXvMEA.js";import{c as R,b as $,f as F}from"./state-QybiP1xm.js";import{t as x,d as M}from"./utilities-CdyyME9-.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j=d=>(L("data-v-d9a1a75c"),d=d(),O(),d),H={class:"row mb-3"},z={class:"d-flex justify-content-between mb-3"},q=j(()=>t("tr",null,[t("th",{width:"5%"},"#"),t("th",null,"Имя пользователя"),t("th",{width:"15%"},"Логин"),t("th",{width:"10%"},"Блокировка"),t("th",{width:"15%"},"Создан"),t("th",{width:"15%"},"Вход"),t("th",{width:"15%"},"Регион")],-1)),G={colspan:"7"},J={width:"5%"},K={width:"15%"},Q={width:"10%"},W={width:"15%"},X={width:"15%"},Y={width:"15%"},Z=k({__name:"UsersPage",setup(d){const y=c(()=>u(()=>import("./HeaderDiv-DTm--MTY.js"),__vite__mapDeps([0,1,2]),import.meta.url)),g=c(()=>u(()=>import("./UserForm-Ckdwsgb0.js"),__vite__mapDeps([3,1,2,4]),import.meta.url)),D=c(()=>u(()=>import("./SwitchBox-CIPYMvHR.js"),__vite__mapDeps([5,1,2]),import.meta.url)),h=c(()=>u(()=>import("./TableSlots-DVAr-u2W.js"),__vite__mapDeps([6,1,2]),import.meta.url)),w=M(()=>{_()},500);I(()=>{_()});const V=U(()=>o.value.users.filter(r=>r.deleted==o.value.viewDeleted)),o=S({action:"",search:"",viewDeleted:!1,users:[]});async function _(){try{const r=await R.get(`${$}/users`,{params:{search:o.value.search}});o.value.users=r.data}catch(r){F(r)}}return(r,a)=>{const E=T("router-link");return v(),p(f,null,[l(s(y),{"page-header":"Список пользователей",cls:"text-secondary py-5"}),t("div",H,[m(t("input",{onInput:a[0]||(a[0]=P((...e)=>s(w)&&s(w)(...e),["prevent"])),class:"form-control mb-3",name:"search",id:"search",type:"text",placeholder:"Поиск по имени пользователя","onUpdate:modelValue":a[1]||(a[1]=e=>o.value.search=e)},null,544),[[C,o.value.search]])]),t("div",z,[l(s(D),{name:"viewDeleted",label:"Показать удаленные",modelValue:o.value.viewDeleted,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.viewDeleted=e)},null,8,["modelValue"])]),m(l(s(g),{action:o.value.action,onUpdate:a[3]||(a[3]=e=>{o.value.action="",_()}),onCancel:a[4]||(a[4]=e=>o.value.action="")},null,8,["action"]),[[b,o.value.action]]),m(l(s(h),{"tbl-class":"table align-middle"},{caption:i(()=>[t("button",{class:"btn btn-link text-secondary",type:"button",onClick:a[5]||(a[5]=e=>o.value.action===""?o.value.action="create":o.value.action="")}," Добавить пользователя ")]),thead:i(()=>[q]),tbody:i(()=>[t("tr",null,[t("td",G,[l(s(h),{id:"overflow","tbl-class":"table table-hover align-middle no-bottom-border"},{tbody:i(()=>[(v(!0),p(f,null,A(V.value,e=>(v(),p("tr",{height:"50px",key:e.id},[t("td",J,n(e.id),1),t("td",null,n(e.fullname),1),t("td",K,[l(E,{to:{name:"user",params:{id:e.id}}},{default:i(()=>[B(n(e.username),1)]),_:2},1032,["to"])]),t("td",Q,n(e.blocked?"Да":"Нет"),1),t("td",W,n(s(x)(e.pswd_create)),1),t("td",X,n(s(x)(e.last_login)),1),t("td",Y,n(e.region),1)]))),128))]),_:1})])])]),_:1},512),[[b,o.value.action===""]])],64)}}}),st=N(Z,[["__scopeId","data-v-d9a1a75c"]]);export{st as default};
