const __vite__fileDeps=["./LabelSlot-CFQC1Hbj.js","./index-Cj2pYzZu.js","./index-BqKjTnG4.css","./_plugin-vue_export-helper-DlAUqK2U.js","./LabelSlot-BKRWK_aH.css","./InputElement-DaxrQ1UY.js","./SelectDiv-DGHNFSzc.js","./SwitchBox-C4Dx5rtd.js","./BtnGroup-CTOwoHSI.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as y,D as g,o as w,c as D,g as p,a as l,w as u,u as a,s as O,b as m,e as i}from"./index-Cj2pYzZu.js";import{a as U,s as I,b as L}from"./utilities-BY8xKrXT.js";import{s as P,d as _}from"./state-Kc3gs5o9.js";const R={class:"p-3"},x={class:"row m-3"},B={class:"col col-auto"},k=y({__name:"UserForm",props:{action:{type:String,default:""},item:{type:Object,default:{}}},emits:["update","cancel"],setup(f,{emit:v}){const s=m(()=>i(()=>import("./LabelSlot-CFQC1Hbj.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),d=m(()=>i(()=>import("./InputElement-DaxrQ1UY.js"),__vite__mapDeps([5,1,2]),import.meta.url)),V=m(()=>i(()=>import("./SelectDiv-DGHNFSzc.js"),__vite__mapDeps([6,1,2]),import.meta.url)),b=m(()=>i(()=>import("./SwitchBox-C4Dx5rtd.js"),__vite__mapDeps([7,1,2]),import.meta.url)),E=m(()=>i(()=>import("./BtnGroup-CTOwoHSI.js"),__vite__mapDeps([8,1,2]),import.meta.url)),c=v,n=f,e=g(n.item);async function A(){try{(await U.post(`${I}/users`,e.value)).status===205?_.setAlert("alert-warning","Пользователь уже существует"):_.setAlert("alert-success","Запись успешно добавлена")}catch(r){L(r)}c("update"),Object.keys(e.value).forEach(r=>delete e.value[r])}return(r,t)=>(w(),D("div",R,[p("form",{onSubmit:O(A,["prevent"]),class:"form form-check",role:"form"},[l(a(s),{label:"Имя пользователя"},{default:u(()=>[l(a(d),{name:"fullname",place:"Имя пользователя",need:n.action!=="edit",pattern:"[А-Яа-я- ]+",modelValue:e.value.fullname,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.fullname=o)},null,8,["need","modelValue"])]),_:1}),l(a(s),{label:"Учетная запись"},{default:u(()=>[l(a(d),{name:"username",place:"Учетная запись",pattern:"[a-zA-Z_]+",need:n.action!=="edit",disable:n.action==="edit",modelValue:e.value.username,"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.username=o)},null,8,["need","disable","modelValue"])]),_:1}),l(a(s),{label:"Электронная почта"},{default:u(()=>[l(a(d),{name:"email",place:"Электронная почта",typeof:"email",need:n.action!=="edit",modelValue:e.value.email,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.email=o)},null,8,["need","modelValue"])]),_:1}),l(a(s),{label:"Регион"},{default:u(()=>[l(a(V),{name:"region",place:"Регион",need:n.action!=="edit",select:a(P).regions,modelValue:e.value.region,"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.region=o)},null,8,["need","select","modelValue"])]),_:1}),l(a(s),{label:"Администратор"},{default:u(()=>[l(a(b),{name:"admin",modelValue:e.value.has_admin,"onUpdate:modelValue":t[4]||(t[4]=o=>e.value.has_admin=o)},null,8,["modelValue"])]),_:1}),p("div",x,[p("div",B,[l(a(E),{offset:!1,"submit-btn":n.action==="create"?"Создать":"Изменить",onCancel:t[5]||(t[5]=o=>c("cancel"))},null,8,["submit-btn"])])])],32)]))}});export{k as default};
