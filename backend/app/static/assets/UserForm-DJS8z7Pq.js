const __vite__fileDeps=["assets/InputElement-lsY1T1RL.js","assets/index-C5gLaoji.js","assets/index-D3owuatg.css","assets/BtnGroup-BNMpN1dP.js","assets/GroupContent-DCuPxVrI.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as h,U as E,o as w,c as y,a,b as l,u as n,w as U,z as C,e as i,f as d,h as c,s as p,j as m}from"./index-C5gLaoji.js";const g={class:"p-3"},x={class:"row m-3"},B={class:"col col-auto"},I={class:"col col-auto"},O={class:"col col-auto"},P={class:"col col-auto"},k=h({__name:"UserForm",props:{action:{type:String,default:""},item:{type:Object,default:{}}},emits:["update"],setup(_,{emit:f}){const u=i(()=>d(()=>import("./InputElement-lsY1T1RL.js"),__vite__mapDeps([0,1,2]))),v=i(()=>d(()=>import("./BtnGroup-BNMpN1dP.js"),__vite__mapDeps([3,1,2]))),V=i(()=>d(()=>import("./GroupContent-DCuPxVrI.js"),__vite__mapDeps([4,1,2]))),b=f,o=_,e=E(o.item);async function A(){try{const r=o.action==="edit"?await c.patch(`${p}/user/${o.item.id}`,e.value):await c.post(`${p}/user`,e.value),{message:t}=r.data;t==="Changed"?m.setAlert("alert-success","Пользователь успешно изменен"):m.setAlert("alert-success","Пользователь успешно создан")}catch(r){console.error(r),m.setAlert("alert-danger","Ошибка сохранения данных")}b("update")}return(r,t)=>(w(),y("div",g,[a("form",{onSubmit:C(A,["prevent"]),class:"form form-check border rounded p-",role:"form"},[a("div",x,[a("div",B,[l(n(u),{name:"fullname",place:"Имя пользователя",pattern:"[a-zA-Zа-яА-Я ]+",modelValue:e.value.fullname,"onUpdate:modelValue":t[0]||(t[0]=s=>e.value.fullname=s)},null,8,["modelValue"])]),a("div",I,[l(n(u),{name:"username",place:"Учетная запись",pattern:"[a-zA-Z]+",disabled:o.action==="edit",modelValue:e.value.username,"onUpdate:modelValue":t[1]||(t[1]=s=>e.value.username=s)},null,8,["disabled","modelValue"])]),a("div",O,[l(n(u),{name:"email",place:"Электронная почта",typeof:"email",modelValue:e.value.email,"onUpdate:modelValue":t[2]||(t[2]=s=>e.value.email=s)},null,8,["modelValue"])]),a("div",P,[l(n(v),{offset:!1},{default:U(()=>[l(n(V),{"submit-btn":o.action==="create"?"Создать":"Изменить"},null,8,["submit-btn"])]),_:1})])])],32)]))}});export{k as default};
