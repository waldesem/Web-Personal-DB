const __vite__fileDeps=["./HeaderDiv-BGsjcrVS.js","./index-8uvu1PmF.js","./index-BqKjTnG4.css","./LabelSlot-BRgWJkXq.js","./_plugin-vue_export-helper-DlAUqK2U.js","./LabelSlot-BKRWK_aH.css","./UserForm-B1qdgfIT.js","./utilities-Dq58mqGZ.js","./state-BEsVv8Mv.js","./BtnGroup-EtpbKM5p.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as U,f as C,l as k,c as m,a,u as t,h as L,g as d,w as l,F as R,z as T,o as _,q as n,t as o,b as f,e as p}from"./index-8uvu1PmF.js";import{d as v,a as $}from"./state-BEsVv8Mv.js";import{a as b,s as y,b as g}from"./utilities-Dq58mqGZ.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={key:1},P={class:"mb-5"},V=["disabled"],h=U({__name:"ProfileUser",setup(B){const w=f(()=>p(()=>import("./HeaderDiv-BGsjcrVS.js"),__vite__mapDeps([0,1,2]),import.meta.url)),r=f(()=>p(()=>import("./LabelSlot-BRgWJkXq.js"),__vite__mapDeps([3,1,2,4,5]),import.meta.url)),D=f(()=>p(()=>import("./UserForm-B1qdgfIT.js"),__vite__mapDeps([6,1,2,7,8]),import.meta.url)),A=f(()=>p(()=>import("./BtnGroup-EtpbKM5p.js"),__vite__mapDeps([9,1,2]),import.meta.url));C(async()=>{const i=T();e.value.id=i.params.id,await u("view")});const e=k({id:"",action:"",profile:{}});async function u(i){try{const s=await b.get(`${y}/users/${e.value.id}`,{params:{action:i}});e.value.profile=s.data,i==="drop"&&v.setAlert("alert-success","Пароль сброшен")}catch(s){g(s)}}async function E(){if(confirm("Вы действительно хотите удалить пользователя?"))try{(await b.delete(`${y}/users/${e.value.id}`)).status===204?(v.setAlert("alert-success","Пользователь отмечен к удалению"),u("view")):v.setAlert("alert-danger","Произошла ошибка")}catch(i){g(i)}}return(i,s)=>(_(),m(R,null,[a(t(w),{"page-header":e.value.profile.fullname,cls:"text-secondary py-5"},null,8,["page-header"]),e.value.action?(_(),L(t(D),{key:0,action:e.value.action,item:e.value.profile,onUpdate:s[0]||(s[0]=c=>{e.value.action="",u("view")}),onCancel:s[1]||(s[1]=c=>{e.value.action=""})},null,8,["action","item"])):(_(),m("div",I,[d("div",P,[a(t(r),{label:"ID"},{default:l(()=>[n(o(e.value.profile.id),1)]),_:1}),a(t(r),{label:"Регион"},{default:l(()=>[n(o(e.value.profile.region),1)]),_:1}),a(t(r),{label:"Имя пользователя"},{default:l(()=>[n(o(e.value.profile.fullname),1)]),_:1}),a(t(r),{label:"Логин"},{default:l(()=>[n(o(e.value.profile.username),1)]),_:1}),a(t(r),{label:"E-mail"},{default:l(()=>[n(o(e.value.profile.email),1)]),_:1}),a(t(r),{label:"Дата создания пароля"},{default:l(()=>[n(o(new Date(e.value.profile.pswd_create).toLocaleString("ru-RU")+" UTC"),1)]),_:1}),a(t(r),{label:"Требует смены пароля"},{default:l(()=>[n(o(e.value.profile.change_pswd?"Да":"Нет"),1)]),_:1}),a(t(r),{label:"Дата последнего входа"},{default:l(()=>[n(o(new Date(e.value.profile.last_login).toLocaleString("ru-RU")+" UTC"),1)]),_:1}),a(t(r),{label:"Попытки входа"},{default:l(()=>[n(o(e.value.profile.attempt),1)]),_:1}),a(t(r),{label:"Заблокирован"},{default:l(()=>[n(o(e.value.profile.blocked?"Заблокирован":"Разблокирован"),1)]),_:1}),a(t(r),{label:"Активность"},{default:l(()=>[n(o(e.value.profile.deleted?"Удален":"Активен"),1)]),_:1}),a(t(r),{label:"Администратор"},{default:l(()=>[n(o(e.value.profile.has_admin?"Да":"Нет"),1)]),_:1}),a(t(r),{label:"Дата создания профиля"},{default:l(()=>[n(o(new Date(e.value.profile.created).toLocaleString("ru-RU")+" UTC"),1)]),_:1})]),a(t(A),{offset:!1},{default:l(()=>[d("button",{class:"btn btn-outline-primary",type:"button",onClick:s[2]||(s[2]=c=>e.value.action===""?e.value.action="edit":e.value.action="")},o(e.value.action===""?"Редактировать":"Отменить"),1),d("button",{onClick:s[3]||(s[3]=c=>u("drop")),type:"button",class:"btn btn-outline-secondary"}," Сбросить пароль "),d("button",{onClick:E,type:"button",class:"btn btn-outline-danger",disabled:e.value.profile.deleted||e.value.id==t($).userId}," Удалить ",8,V)]),_:1})]))],64))}}),H=x(h,[["__scopeId","data-v-342edfb9"]]);export{H as default};
