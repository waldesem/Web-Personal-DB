const __vite__fileDeps=["./HeaderDiv-DTm--MTY.js","./index-1yFXvMEA.js","./index-BqKjTnG4.css","./TableSlots-DVAr-u2W.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as D,k as C,r as S,c as l,b as v,u,e as t,g as L,y as R,w as T,m as V,l as c,f as E,F as p,n as P,o as n,p as h,t as r,z as _,A as U,h as f,j as g}from"./index-1yFXvMEA.js";import{t as A,d as B}from"./utilities-CdyyME9-.js";import{c as N,b as I,f as M}from"./state-QybiP1xm.js";const j={class:"row mb-3"},z={class:"form form-check",role:"form"},F={height:"50px"},H=["width"],O={key:1},q={key:2},G={class:"pagination justify-content-center py-3"},J=["disabled"],K=["disabled"],Z=D({__name:"PersonsPage",setup(Q){const y=f(()=>g(()=>import("./HeaderDiv-DTm--MTY.js"),__vite__mapDeps([0,1,2]),import.meta.url)),b=f(()=>g(()=>import("./TableSlots-DVAr-u2W.js"),__vite__mapDeps([3,1,2]),import.meta.url));C(async()=>{await i()});const k=o=>{switch(o){case"Проверка":return"primary";case"ПФО":return"info";case"Окончено":return"secondary";case"Сохранено":return"warning"}},w={id:["#","5%"],region_id:["Регион","15%"],surname:["Фамилия Имя Отчество","25%"],birthday:["Дата рождения","15%"],status:["Статус","10%"],created:["Создан","15%"],user:["Сотрудник","15%"]},a=S({candidates:[],page:1,prev:!1,next:!1,search:"",updated:`${new Date().toLocaleDateString("ru-RU")} в ${new Date().toLocaleTimeString("ru-RU")}`});async function i(o=1){a.value.page=o;try{const s=await N.get(`${I}/index/${a.value.page}`,{params:{search:a.value.search}});[a.value.candidates,a.value.next,a.value.prev]=s.data,a.value.updated=`${new Date().toLocaleDateString("ru-RU")} в ${new Date().toLocaleTimeString("ru-RU")}`}catch(s){M(s)}}const m=B(()=>{i()},500),$=o=>{const[s,d]=o.split(" ");return`${s} ${d}`};return(o,s)=>{const d=P("router-link");return n(),l(p,null,[v(u(y),{"page-header":"Кандидаты"}),t("div",j,[t("form",z,[L(t("input",{onInput:s[0]||(s[0]=T((...e)=>u(m)&&u(m)(...e),["prevent"])),class:"form-control",name:"search",id:"search",type:"text",placeholder:"поиск по фамилии, имени, отчеству, инн","onUpdate:modelValue":s[1]||(s[1]=e=>a.value.search=e)},null,544),[[R,a.value.search]])])]),a.value.candidates.length?(n(),V(u(b),{key:0},{caption:c(()=>[h(r(`Обновлено: ${a.value.updated}`)+" ",1),t("a",{class:"btn btn-link fs-5",href:"#",style:{"text-decoration":"none"},title:"Обновить",onClick:s[2]||(s[2]=e=>i())}," ↻ ")]),thead:c(()=>[t("tr",F,[(n(),l(p,null,_(w,(e,x)=>t("th",{key:x,width:e[1]},r(e[0]),9,H)),64))])]),tbody:c(()=>[(n(!0),l(p,null,_(a.value.candidates,e=>(n(),l("tr",{key:e.id,height:"50px"},[t("td",null,r(e.id),1),t("td",null,r(e.region),1),t("td",null,[v(d,{to:{name:"profile",params:{id:e.id}}},{default:c(()=>[h(r(`${e.surname} ${e.firstname} ${e.patronymic?e.patronymic:""}`),1)]),_:2},1032,["to"])]),t("td",null,r(new Date(e.birthday).toLocaleDateString("ru-RU")),1),t("td",null,[t("label",{class:U(`fs-6 badge bg-${k(e.status)}`)},r(e.status),3)]),t("td",null,r(u(A)(e.created)),1),t("td",null,r(e.username?$(e.username.toString()):""),1)]))),128))]),_:1})):(n(),l("p",O,"Ничего не найдено")),a.value.prev||a.value.next?(n(),l("nav",q,[t("ul",G,[t("li",{class:"page-item",disabled:!a.value.prev},[t("a",{class:"page-link",href:"#",onClick:s[3]||(s[3]=e=>i(a.value.page-1))}," Предыдущая ")],8,J),t("li",{class:"page-item",disabled:!a.value.next},[t("a",{class:"page-link",href:"#",onClick:s[4]||(s[4]=e=>i(a.value.page+1))}," Следующая ")],8,K)])])):E("",!0)],64)}}});export{Z as default};
