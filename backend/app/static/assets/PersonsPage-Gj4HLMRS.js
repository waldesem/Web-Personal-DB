const __vite__fileDeps=["./HeaderDiv-C-5mBoWb.js","./index-K0Y79g34.js","./index-6fGrG267.css","./FileForm-BYVEwYpZ.js","./_plugin-vue_export-helper-DlAUqK2U.js","./FileForm-By8_2B11.css","./TableSlots-BaukMWaH.js","./PageSwitcher-DmTH3-FZ.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as L,i as E,n as R,j as T,c as i,b as c,u as l,a as s,q as C,v as V,s as A,g as N,w as p,F as h,l as U,o as r,x as f,t as o,r as g,y as B,e as d,f as _}from"./index-K0Y79g34.js";import{e as F,c as I,t as O,f as q,g as M}from"./state-CXEVWkFn.js";const j={class:"position-relative"},z={class:"position-absolute bottom-100 end-0"},H={key:0,class:"spinner-border text-primary"},J={key:1,for:"file",class:"text-primary"},G=s("i",{class:"bi bi-cloud-arrow-down fs-1",title:"Загрузить анкету",style:{cursor:"pointer"}},null,-1),K=[G],Q={class:"row mb-3"},W={class:"form form-check",role:"form"},X=s("i",{class:"bi bi-arrow-clockwise"},null,-1),Y=[X],Z={height:"50px"},ee=["width"],te={key:1},re=L({__name:"PersonsPage",setup(se){const w=d(()=>_(()=>import("./HeaderDiv-C-5mBoWb.js"),__vite__mapDeps([0,1,2]),import.meta.url)),y=d(()=>_(()=>import("./FileForm-BYVEwYpZ.js"),__vite__mapDeps([3,1,2,4,5]),import.meta.url)),b=d(()=>_(()=>import("./TableSlots-BaukMWaH.js"),__vite__mapDeps([6,1,2]),import.meta.url)),x=d(()=>_(()=>import("./PageSwitcher-DmTH3-FZ.js"),__vite__mapDeps([7,1,2]),import.meta.url));E(async()=>{await u()});const D={Проверка:"primary",ПФО:"info",Окончено:"secondary"},$={id:["#","5%"],region_id:["Регион","15%"],surname:["Фамилия Имя Отчество","25%"],birthday:["Дата рождения","15%"],status:["Статус","10%"],created:["Создан","15%"],user:["Сотрудник","15%"]},t=R({candidates:[],page:1,prev:!1,next:!1,search:"",spinner:!1,updated:`${new Date().toLocaleDateString("ru-RU")} в ${new Date().toLocaleTimeString("ru-RU")}`});async function u(n=1){t.value.page=n;try{const a=await F.get(`${I}/index/${t.value.page}`,{params:{search:t.value.search}});[t.value.candidates,t.value.next,t.value.prev]=a.data,t.value.updated=`${new Date().toLocaleDateString("ru-RU")} в ${new Date().toLocaleTimeString("ru-RU")}`}catch(a){a.request.status==401||a.request.status==403?T.push({name:"login"}):console.error(a)}}const v=q(()=>{u()},500);async function k(n){n.preventDefault(),t.value.spinner=!0,M(n,"persons","0"),t.value.spinner=!1}const S=n=>{const[a,m]=n.split(" ");return`${a} ${m}`};return(n,a)=>{const m=U("router-link");return r(),i(h,null,[c(l(w),{"page-header":"Кандидаты"}),s("div",j,[s("div",z,[t.value.spinner?(r(),i("span",H)):(r(),i("label",J,K)),c(l(y),{accept:".json",onSubmit:k})])]),s("div",Q,[s("form",W,[C(s("input",{onInput:a[0]||(a[0]=A((...e)=>l(v)&&l(v)(...e),["prevent"])),class:"form-control",name:"search",id:"search",type:"text",placeholder:"поиск по фамилии, имени, отчеству, инн","onUpdate:modelValue":a[1]||(a[1]=e=>t.value.search=e)},null,544),[[V,t.value.search]])])]),t.value.candidates.length?(r(),N(l(b),{key:0,"div-class":"table align-middle py-3"},{caption:p(()=>[f(o(`Обновлено: ${t.value.updated}`)+" ",1),s("a",{href:"#",title:"Обновить",onClick:a[2]||(a[2]=e=>u())},Y)]),thead:p(()=>[s("tr",Z,[(r(),i(h,null,g($,(e,P)=>s("th",{key:P,width:e[1]},o(e[0]),9,ee)),64))])]),tbody:p(()=>[(r(!0),i(h,null,g(t.value.candidates,e=>(r(),i("tr",{key:e.id,height:"50px"},[s("td",null,o(e.id),1),s("td",null,o(e.region),1),s("td",null,[c(m,{to:{name:"profile",params:{id:e.id}}},{default:p(()=>[f(o(`${e.surname} ${e.firstname} ${e.patronymic?e.patronymic:""}`),1)]),_:2},1032,["to"])]),s("td",null,o(new Date(e.birthday).toLocaleDateString("ru-RU")),1),s("td",null,[s("label",{class:B(`fs-6 badge bg-${D[e.status]}`)},o(e.status),3)]),s("td",null,o(l(O)(e.created)),1),s("td",null,o(e.username?S(e.username.toString()):""),1)]))),128))]),_:1})):(r(),i("p",te,"Ничего не найдено")),c(l(x),{has_prev:t.value.prev,has_next:t.value.next,switchPrev:t.value.page-1,switchNext:t.value.page+1,onSwitch:u},null,8,["has_prev","has_next","switchPrev","switchNext"])],64)}}});export{re as default};
