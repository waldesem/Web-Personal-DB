const __vite__fileDeps=["./LabelSlot-BRgWJkXq.js","./index-8uvu1PmF.js","./index-BqKjTnG4.css","./_plugin-vue_export-helper-DlAUqK2U.js","./LabelSlot-BKRWK_aH.css","./InputElement-C4ralCAM.js","./SelectDiv-DgMWm3SF.js","./SwitchBox-CWBTJVUZ.js","./BtnGroup-EtpbKM5p.js","./GroupContent-DDUo5R5b.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as D,D as O,o as g,c as w,g as p,a as l,w as s,u as t,n as I,b as r,e as u}from"./index-8uvu1PmF.js";import{a as L,s as P,b as R}from"./utilities-Dq58mqGZ.js";import{s as U,d as c}from"./state-BEsVv8Mv.js";const C={class:"p-3"},T={class:"row m-3"},x={class:"col col-auto"},h=D({__name:"UserForm",props:{action:{type:String,default:""},item:{type:Object,default:{}}},emits:["update","cancel"],setup(f,{emit:v}){const m=r(()=>u(()=>import("./LabelSlot-BRgWJkXq.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),d=r(()=>u(()=>import("./InputElement-C4ralCAM.js"),__vite__mapDeps([5,1,2]),import.meta.url)),V=r(()=>u(()=>import("./SelectDiv-DgMWm3SF.js"),__vite__mapDeps([6,1,2]),import.meta.url)),b=r(()=>u(()=>import("./SwitchBox-CWBTJVUZ.js"),__vite__mapDeps([7,1,2]),import.meta.url)),E=r(()=>u(()=>import("./BtnGroup-EtpbKM5p.js"),__vite__mapDeps([8,1,2]),import.meta.url)),A=r(()=>u(()=>import("./GroupContent-DDUo5R5b.js"),__vite__mapDeps([9,1,2]),import.meta.url)),_=v,n=f,e=O(n.item);async function y(){try{(await L.post(`${P}/users`,e.value)).status===205?c.setAlert("alert-warning","Пользователь уже существует"):c.setAlert("alert-success","Запись успешно добавлена")}catch(i){R(i)}_("update"),Object.keys(e.value).forEach(i=>delete e.value[i])}return(i,a)=>(g(),w("div",C,[p("form",{onSubmit:I(y,["prevent"]),class:"form form-check",role:"form"},[l(t(m),{label:"Имя пользователя"},{default:s(()=>[l(t(d),{name:"fullname",place:"Имя пользователя",need:n.action!=="edit",pattern:"[А-Яа-я- ]+",modelValue:e.value.fullname,"onUpdate:modelValue":a[0]||(a[0]=o=>e.value.fullname=o)},null,8,["need","modelValue"])]),_:1}),l(t(m),{label:"Учетная запись"},{default:s(()=>[l(t(d),{name:"username",place:"Учетная запись",pattern:"[a-zA-Z_]+",need:n.action!=="edit",disable:n.action==="edit",modelValue:e.value.username,"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.username=o)},null,8,["need","disable","modelValue"])]),_:1}),l(t(m),{label:"Электронная почта"},{default:s(()=>[l(t(d),{name:"email",place:"Электронная почта",typeof:"email",need:n.action!=="edit",modelValue:e.value.email,"onUpdate:modelValue":a[2]||(a[2]=o=>e.value.email=o)},null,8,["need","modelValue"])]),_:1}),l(t(m),{label:"Регион"},{default:s(()=>[l(t(V),{name:"region",place:"Регион",need:n.action!=="edit",select:t(U).regions,modelValue:e.value.region,"onUpdate:modelValue":a[3]||(a[3]=o=>e.value.region=o)},null,8,["need","select","modelValue"])]),_:1}),l(t(m),{label:"Администратор"},{default:s(()=>[l(t(b),{name:"admin",modelValue:e.value.has_admin,"onUpdate:modelValue":a[4]||(a[4]=o=>e.value.has_admin=o)},null,8,["modelValue"])]),_:1}),p("div",T,[p("div",x,[l(t(E),{offset:!1},{default:s(()=>[l(t(A),{"submit-btn":n.action==="create"?"Создать":"Изменить",onCancel:a[5]||(a[5]=o=>_("cancel"))},null,8,["submit-btn"])]),_:1})])])],32)]))}});export{h as default};
