const __vite__fileDeps=["./LabelSlot-BRgWJkXq.js","./index-8uvu1PmF.js","./index-BqKjTnG4.css","./_plugin-vue_export-helper-DlAUqK2U.js","./LabelSlot-BKRWK_aH.css","./SelectDiv-DgMWm3SF.js","./InputElement-C4ralCAM.js","./TextArea-DpQzSpkq.js","./BtnGroup-EtpbKM5p.js","./GroupContent-DDUo5R5b.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as A,D as U,o as R,c as D,a as o,w as u,u as a,n as I,b as r,e as d,r as O}from"./index-8uvu1PmF.js";import{s as g,c as L,d as V}from"./state-BEsVv8Mv.js";import{a as P,s as T}from"./utilities-Dq58mqGZ.js";const w=A({__name:"ResumeForm",props:{action:{type:String,default:"create"},resume:{type:Object,default:{}}},emits:["cancel"],setup(f,{emit:v}){const n=r(()=>d(()=>import("./LabelSlot-BRgWJkXq.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),_=r(()=>d(()=>import("./SelectDiv-DgMWm3SF.js"),__vite__mapDeps([5,1,2]),import.meta.url)),m=r(()=>d(()=>import("./InputElement-C4ralCAM.js"),__vite__mapDeps([6,1,2]),import.meta.url)),b=r(()=>d(()=>import("./TextArea-DpQzSpkq.js"),__vite__mapDeps([7,1,2]),import.meta.url)),c=r(()=>d(()=>import("./BtnGroup-EtpbKM5p.js"),__vite__mapDeps([8,1,2]),import.meta.url)),E=r(()=>d(()=>import("./GroupContent-DDUo5R5b.js"),__vite__mapDeps([9,1,2]),import.meta.url)),i=v,p=f,l=U(p.resume);async function y(){try{const s=await P.post(`${T}/persons`,l.value),{person_id:e}=s.data;Object.keys(l.value).forEach(t=>delete l.value[t]),p.action==="create"?O.push({name:"profile",params:{id:e}}):(i("cancel"),L.getItem("persons")),V.setAlert("alert-success","Данные успешно обновлены")}catch(s){V.setAlert("alert-danger",`Возникла ошибка ${s}`)}}return(s,e)=>(R(),D("form",{onSubmit:I(y,["prevent"]),class:"form form-check",role:"form"},[o(a(n),{label:"Регион"},{default:u(()=>[o(a(_),{name:"region_id",select:a(g).regions,modelValue:l.value.region,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.region=t)},null,8,["select","modelValue"])]),_:1}),o(a(n),{label:"Фамилия"},{default:u(()=>[o(a(m),{need:!0,name:"surname",place:"Фамилия*",pattern:"[А-Яа-яЁё\\-'\\s]+",modelValue:l.value.surname,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.surname=t)},null,8,["modelValue"])]),_:1}),o(a(n),{label:"Имя"},{default:u(()=>[o(a(m),{need:!0,name:"firstname",place:"Имя*",pattern:"[А-Яа-яЁё\\-'\\s]+",modelValue:l.value.firstname,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.firstname=t)},null,8,["modelValue"])]),_:1}),o(a(n),{label:"Отчество"},{default:u(()=>[o(a(m),{name:"patronymic",place:"Отчество",modelValue:l.value.patronymic,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.patronymic=t)},null,8,["modelValue"])]),_:1}),o(a(n),{label:"Дата рождения*"},{default:u(()=>[o(a(m),{need:!0,name:"birthday",place:"Дата рождения*",typeof:"date",modelValue:l.value.birthday,"onUpdate:modelValue":e[4]||(e[4]=t=>l.value.birthday=t)},null,8,["modelValue"])]),_:1}),o(a(n),{label:"Место рождения"},{default:u(()=>[o(a(m),{name:"birthplace",place:"Место рождения",modelValue:l.value.birthplace,"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.birthplace=t)},null,8,["modelValue"])]),_:1}),o(a(n),{label:"Гражданство"},{default:u(()=>[o(a(m),{name:"citizenship",place:"Гражданство",modelValue:l.value.citizenship,"onUpdate:modelValue":e[6]||(e[6]=t=>l.value.citizenship=t)},null,8,["modelValue"])]),_:1}),o(a(n),{label:"Двойное гражданство"},{default:u(()=>[o(a(m),{name:"dual",place:"Двойное гражданство",modelValue:l.value.dual,"onUpdate:modelValue":e[7]||(e[7]=t=>l.value.dual=t)},null,8,["modelValue"])]),_:1}),o(a(n),{label:"СНИЛС"},{default:u(()=>[o(a(m),{name:"snils",place:"СНИЛС",pattern:"[0-9]{11}",modelValue:l.value.snils,"onUpdate:modelValue":e[8]||(e[8]=t=>l.value.snils=t)},null,8,["modelValue"])]),_:1}),o(a(n),{label:"ИНН"},{default:u(()=>[o(a(m),{name:"inn",place:"ИНН",max:"12",pattern:"[0-9]{12}",modelValue:l.value.inn,"onUpdate:modelValue":e[9]||(e[9]=t=>l.value.inn=t)},null,8,["modelValue"])]),_:1}),o(a(n),{label:"Семейное положение"},{default:u(()=>[o(a(m),{name:"marital",place:"Семейное положение",modelValue:l.value.marital,"onUpdate:modelValue":e[10]||(e[10]=t=>l.value.marital=t)},null,8,["modelValue"])]),_:1}),o(a(n),{label:"Дополнительно"},{default:u(()=>[o(a(b),{name:"addition",place:"Дополнительно",modelValue:l.value.addition,"onUpdate:modelValue":e[11]||(e[11]=t=>l.value.addition=t)},null,8,["modelValue"])]),_:1}),o(a(c),null,{default:u(()=>[o(a(E),{onCancel:e[12]||(e[12]=t=>i("cancel"))})]),_:1})],32))}});export{w as default};
