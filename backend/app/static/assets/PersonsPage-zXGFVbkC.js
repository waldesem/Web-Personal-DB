const __vite__fileDeps=["./HeaderDiv-OH_t60b5.js","./index-DEyEzVLJ.js","./index-BqKjTnG4.css","./TableSlots-CKKi7rK4.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as k,k as b,r as D,c as l,b as p,u,e,g as x,y as $,w as C,m as L,l as d,f as S,F as m,n as R,o,p as h,t as r,z as T,A as U,h as v,j as g}from"./index-DEyEzVLJ.js";import{d as V}from"./utilities-Dot1e486.js";import{c as P,b as A}from"./state-C-E6YQ2M.js";const B={class:"row mb-3"},E={class:"form form-check",role:"form"},N=e("tr",{height:"50px"},[e("th",{width:"5%"},"#"),e("th",{width:"15%"},"Регион"),e("th",{width:"25%"},"Фамилия Имя Отчество"),e("th",{width:"15%"},"Дата рождения"),e("th",{width:"10%"},"Статус"),e("th",{width:"15%"},"Обновлено"),e("th",{width:"15%"},"Сотрудник")],-1),I={key:1},M={key:2},j={class:"pagination justify-content-center py-3"},z=["disabled"],F=["disabled"],J=k({__name:"PersonsPage",setup(O){const _=v(()=>g(()=>import("./HeaderDiv-OH_t60b5.js"),__vite__mapDeps([0,1,2]),import.meta.url)),f=v(()=>g(()=>import("./TableSlots-CKKi7rK4.js"),__vite__mapDeps([3,1,2]),import.meta.url));b(async()=>{await n()});const w=i=>{switch(i){case"Проверка":return"primary";case"ПФО":return"info";case"Окончено":return"secondary";case"Сохранено":return"warning"}},a=D({candidates:[],page:1,prev:!1,next:!1,search:"",updated:`${new Date().toLocaleDateString("ru-RU")} в ${new Date().toLocaleTimeString("ru-RU")}`});async function n(i=1){a.value.page=i;try{const s=await P.get(`${A}/index/${a.value.page}`,{params:{search:a.value.search}});[a.value.candidates,a.value.next,a.value.prev]=s.data,a.value.updated=`${new Date().toLocaleDateString("ru-RU")} в ${new Date().toLocaleTimeString("ru-RU")}`}catch(s){console.error(s)}}const c=V(()=>{n()},500);return(i,s)=>{const y=R("router-link");return o(),l(m,null,[p(u(_),{"page-header":"Кандидаты"}),e("div",B,[e("form",E,[x(e("input",{onInput:s[0]||(s[0]=C((...t)=>u(c)&&u(c)(...t),["prevent"])),class:"form-control",name:"search",id:"search",type:"text",placeholder:"поиск по фамилии, имени, отчеству, инн","onUpdate:modelValue":s[1]||(s[1]=t=>a.value.search=t)},null,544),[[$,a.value.search]])])]),a.value.candidates.length?(o(),L(u(f),{key:0},{caption:d(()=>[h(r(`Обновлено: ${a.value.updated}`)+" ",1),e("a",{class:"btn btn-link fs-5",href:"#",style:{"text-decoration":"none"},title:"Обновить",onClick:s[2]||(s[2]=t=>n())}," ↻ ")]),thead:d(()=>[N]),tbody:d(()=>[(o(!0),l(m,null,T(a.value.candidates,t=>(o(),l("tr",{key:t.id,height:"50px"},[e("td",null,r(t.id),1),e("td",null,r(t.region),1),e("td",null,[p(y,{to:{name:"profile",params:{id:t.id}}},{default:d(()=>[h(r(`${t.surname} ${t.firstname} ${t.patronymic?t.patronymic:""}`),1)]),_:2},1032,["to"])]),e("td",null,r(new Date(t.birthday).toLocaleDateString("ru-RU")),1),e("td",null,[e("label",{class:U(`fs-6 badge bg-${w(t.standing)}`)},r(t.standing),3)]),e("td",null,r(new Date(t.created).toLocaleDateString("ru-RU")),1),e("td",null,r(t.username?t.username.toString().split(" ")[0]:""),1)]))),128))]),_:1})):(o(),l("p",I,"Ничего не найдено")),a.value.prev||a.value.next?(o(),l("nav",M,[e("ul",j,[e("li",{class:"page-item",disabled:!a.value.prev},[e("a",{class:"page-link",href:"#",onClick:s[3]||(s[3]=t=>n(a.value.page-1))}," Предыдущая ")],8,z),e("li",{class:"page-item",disabled:!a.value.next},[e("a",{class:"page-link",href:"#",onClick:s[4]||(s[4]=t=>n(a.value.page+1))}," Следующая ")],8,F)])])):S("",!0)],64)}}});export{J as default};
