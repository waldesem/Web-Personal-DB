const __vite__fileDeps=["./LabelSlot-BomMvJ3C.js","./index-DCiFGIcJ.js","./index-BqKjTnG4.css","./_plugin-vue_export-helper-DlAUqK2U.js","./LabelSlot-BKRWK_aH.css","./InputElement-D_14b2jY.js","./SelectDiv-CFaj09AT.js","./SwitchBox-BTxysKe7.js","./BtnGroup-DS5og2Te.js","./GroupContent-ApZYR8E5.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as w,E as y,o as D,c as I,h as p,a,w as s,u as e,s as L,b as r,e as u}from"./index-DCiFGIcJ.js";import{a as O,s as P}from"./utilities-DksN3XFX.js";import{a as R,d as _}from"./state-Kk6UeE2d.js";const U={class:"p-3"},C={class:"row m-3"},T={class:"col col-auto"},k=w({__name:"UserForm",props:{action:{type:String,default:""},item:{type:Object,default:{}}},emits:["update","cancel"],setup(f,{emit:v}){const m=r(()=>u(()=>import("./LabelSlot-BomMvJ3C.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),i=r(()=>u(()=>import("./InputElement-D_14b2jY.js"),__vite__mapDeps([5,1,2]),import.meta.url)),V=r(()=>u(()=>import("./SelectDiv-CFaj09AT.js"),__vite__mapDeps([6,1,2]),import.meta.url)),b=r(()=>u(()=>import("./SwitchBox-BTxysKe7.js"),__vite__mapDeps([7,1,2]),import.meta.url)),E=r(()=>u(()=>import("./BtnGroup-DS5og2Te.js"),__vite__mapDeps([8,1,2]),import.meta.url)),A=r(()=>u(()=>import("./GroupContent-ApZYR8E5.js"),__vite__mapDeps([9,1,2]),import.meta.url)),c=v,n=f,l=y(n.item);async function g(){try{(await O.post(`${P}/users`,l.value)).status===205?_.setAlert("alert-warning","Пользователь уже существует"):_.setAlert("alert-success","Запись успешно добавлена")}catch(d){console.error(d),_.setAlert("alert-danger","Ошибка сохранения данных")}c("update")}return(d,t)=>(D(),I("div",U,[p("form",{onSubmit:L(g,["prevent"]),class:"form form-check",role:"form"},[a(e(m),{label:"Имя пользователя"},{default:s(()=>[a(e(i),{name:"fullname",place:"Имя пользователя",need:n.action!=="edit",pattern:"[a-zA-Zа-яА-Я ]+",modelValue:l.value.fullname,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value.fullname=o)},null,8,["need","modelValue"])]),_:1}),a(e(m),{label:"Учетная запись"},{default:s(()=>[a(e(i),{name:"username",place:"Учетная запись",pattern:"[a-zA-Z]+",need:n.action!=="edit",disable:n.action==="edit",modelValue:l.value.username,"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.username=o)},null,8,["need","disable","modelValue"])]),_:1}),a(e(m),{label:"Электронная почта"},{default:s(()=>[a(e(i),{name:"email",place:"Электронная почта",typeof:"email",need:n.action!=="edit",modelValue:l.value.email,"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.email=o)},null,8,["need","modelValue"])]),_:1}),a(e(m),{label:"Регион"},{default:s(()=>[a(e(V),{name:"region",place:"Регион",need:n.action!=="edit",select:e(R).regions,modelValue:l.value.region,"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.region=o)},null,8,["need","select","modelValue"])]),_:1}),a(e(m),{label:"Администратор"},{default:s(()=>[a(e(b),{name:"admin",modelValue:l.value.has_admin,"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.has_admin=o)},null,8,["modelValue"])]),_:1}),p("div",C,[p("div",T,[a(e(E),{offset:!1},{default:s(()=>[a(e(A),{"submit-btn":n.action==="create"?"Создать":"Изменить",onCancel:t[5]||(t[5]=o=>c("cancel"))},null,8,["submit-btn"])]),_:1})])])],32)]))}});export{k as default};
