const __vite__fileDeps=["./HeaderDiv-C5mVbKg1.js","./index-BCJo_gEN.js","./index-6fGrG267.css","./LabelSlot-CvGLSY44.js","./_plugin-vue_export-helper-DlAUqK2U.js","./LabelSlot-BKRWK_aH.css","./UserForm-DtpEsGTR.js","./state-CDYnk2KN.js","./utilities-B_ayHb2j.js","./BtnGroup-Ce4btkpU.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as D,i as E,n as $,c as m,b as a,u as t,g as L,w as r,F as R,A as x,o as _,x as n,t as l,a as p,e as c,f as v}from"./index-BCJo_gEN.js";import{d as b,e as u}from"./state-CDYnk2KN.js";import{s as g}from"./utilities-B_ayHb2j.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={key:1,class:"mb-3"},P=["disabled"],V=D({__name:"ProfileUser",setup(B){const y=c(()=>v(()=>import("./HeaderDiv-C5mVbKg1.js"),__vite__mapDeps([0,1,2]),import.meta.url)),s=c(()=>v(()=>import("./LabelSlot-CvGLSY44.js"),__vite__mapDeps([3,1,2,4,5]),import.meta.url)),A=c(()=>v(()=>import("./UserForm-DtpEsGTR.js"),__vite__mapDeps([6,1,2,7,8]),import.meta.url)),k=c(()=>v(()=>import("./BtnGroup-Ce4btkpU.js"),__vite__mapDeps([9,1,2]),import.meta.url));E(async()=>{const i=x();e.value.id=i.params.id,await d("view")});const e=$({id:"",action:"",role:"",profile:{}});async function d(i){try{const o=await b.get(`${g}/user/${e.value.id}`,{params:{action:i}});e.value.profile=o.data,i==="drop"?u.setAlert("alert-success","Пароль сброшен"):i==="block"&&u.setAlert("alert-success",`Пользователь ${e.value.profile.blocked?"заблокирован":"разблокирован"}`)}catch(o){u.setAlert("alert-danger",o)}}async function w(){if(confirm("Вы действительно хотите удалить пользователя?"))try{(await b.delete(`${g}/user/${e.value.id}`)).status===204?(u.setAlert("alert-success","Пользователь отмечен к удалению"),d("view")):u.setAlert("alert-danger","Произошла ошибка")}catch(i){u.setAlert("alert-danger",i)}}return(i,o)=>(_(),m(R,null,[a(t(y),{"page-header":e.value.profile.fullname,cls:"text-secondary py-5"},null,8,["page-header"]),e.value.action?(_(),L(t(A),{key:0,action:e.value.action,item:e.value.profile,onUpdate:o[0]||(o[0]=f=>{e.value.action="",d("view")}),onCancel:o[1]||(o[1]=f=>{e.value.action=""})},null,8,["action","item"])):(_(),m("div",U,[a(t(s),{label:"ID"},{default:r(()=>[n(l(e.value.profile.id),1)]),_:1}),a(t(s),{label:"Регион"},{default:r(()=>[n(l(e.value.profile.region),1)]),_:1}),a(t(s),{label:"Имя пользователя"},{default:r(()=>[n(l(e.value.profile.fullname),1)]),_:1}),a(t(s),{label:"Логин"},{default:r(()=>[n(l(e.value.profile.username),1)]),_:1}),a(t(s),{label:"E-mail"},{default:r(()=>[n(l(e.value.profile.email),1)]),_:1}),a(t(s),{label:"Дата создания пароля"},{default:r(()=>[n(l(new Date(e.value.profile.pswd_create).toLocaleString("ru-RU")),1)]),_:1}),a(t(s),{label:"Требует смены пароля"},{default:r(()=>[n(l(e.value.profile.change_pswd?"Да":"Нет"),1)]),_:1}),a(t(s),{label:"Дата последнего входа"},{default:r(()=>[n(l(new Date(e.value.profile.last_login).toLocaleString("ru-RU")),1)]),_:1}),a(t(s),{label:"Попытки входа"},{default:r(()=>[n(l(e.value.profile.attempt),1)]),_:1}),a(t(s),{label:"Заблокирован"},{default:r(()=>[n(l(e.value.profile.blocked?"Заблокирован":"Разблокирован"),1)]),_:1}),a(t(s),{label:"Активность"},{default:r(()=>[n(l(e.value.profile.deleted?"Удален":"Активен"),1)]),_:1}),a(t(s),{label:"Администратор"},{default:r(()=>[n(l(e.value.profile.has_admin?"Да":"Нет"),1)]),_:1}),a(t(s),{label:"Дата создания профиля"},{default:r(()=>[n(l(new Date(e.value.profile.created).toLocaleString("ru-RU")),1)]),_:1}),a(t(s),{label:"Дата последнего изменения профиля"},{default:r(()=>[n(l(new Date(e.value.profile.updated).toLocaleString("ru-RU")),1)]),_:1}),a(t(k),{offset:!1},{default:r(()=>[p("button",{class:"btn btn-outline-primary",type:"button",onClick:o[2]||(o[2]=f=>e.value.action===""?e.value.action="edit":e.value.action="")},l(e.value.action===""?"Редактировать":"Отменить"),1),p("button",{onClick:o[3]||(o[3]=f=>d("block")),class:"btn btn-outline-info"},l(e.value.profile.blocked?"Разблокировать":"Заблокировать"),1),p("button",{onClick:o[4]||(o[4]=f=>d("drop")),type:"button",class:"btn btn-outline-secondary"}," Сбросить пароль "),p("button",{onClick:w,type:"button",class:"btn btn-outline-danger",disabled:e.value.profile.deleted}," Удалить ",8,P)]),_:1})]))],64))}}),F=C(V,[["__scopeId","data-v-30ea8a1b"]]);export{F as default};
