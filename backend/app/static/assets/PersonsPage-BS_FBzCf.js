const __vite__fileDeps=["assets/HeaderDiv-Bjks6c5q.js","assets/index-C5gLaoji.js","assets/index-D3owuatg.css","assets/SelectObject-DfHMJpEA.js","assets/TableSlots-DLCx_Olv.js","assets/AscDesc-u_MHh6YH.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/AscDesc-BQH9JYAH.css","assets/PageSwitcher-BNolqZMk.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as A,n as L,q as T,h as R,s as O,o as c,c as _,t as S,v as B,u as t,a,F as f,x as D,b as o,y as I,z as U,k as N,w as h,r as M,A as y,B as d,C as l,D as b,E as j,G as z,e as p,H as F,f as v}from"./index-C5gLaoji.js";const H={class:"mb-5"},q=a("button",{class:"btn btn-link",type:"button","data-bs-toggle":"collapse","data-bs-target":"#lastViewed"}," Последние просмотренные: ",-1),G={class:"collapse show",id:"lastViewed"},Y={class:"row mb-3"},J={class:"col-md-2"},K={class:"col-md-10"},Q=a("i",{class:"bi bi-arrow-clockwise"},null,-1),W=[Q],X={height:"50px"},Z={width:"10%"},ee={width:"15%"},te={width:"15%"},se={width:"10%"},ae={width:"10%"},oe={width:"15%"},re={key:1},de=A({__name:"PersonsPage",setup(ne){const $=p(()=>v(()=>import("./HeaderDiv-Bjks6c5q.js"),__vite__mapDeps([0,1,2]))),x=p(()=>v(()=>import("./SelectObject-DfHMJpEA.js"),__vite__mapDeps([3,1,2]))),k=p(()=>v(()=>import("./TableSlots-DLCx_Olv.js"),__vite__mapDeps([4,1,2]))),r=p(()=>v(()=>import("./AscDesc-u_MHh6YH.js"),__vite__mapDeps([5,1,2,6,7]))),V=p(()=>v(()=>import("./PageSwitcher-BNolqZMk.js"),__vite__mapDeps([8,1,2])));L(async()=>{await u()});const P={1:"success",2:"success",3:"success",4:"primary",5:"primary",6:"danger",7:"info",8:"secondary",9:"light",10:"warning",11:"light"},E={1:"января",2:"февраля",3:"марта",4:"апреля",5:"мая",6:"июня",7:"июля",8:"августа",9:"сентября",10:"октября",11:"ноября",12:"декабря"},s=T({candidates:[],items:{officer:"Мои кандидаты",search:"Все кандидаты"},page:1,prev:!1,next:!1,search:"",sort:"id",order:"desc",path:"search",updated:`${new Date().toLocaleDateString("ru-RU")} в ${new Date().toLocaleTimeString("ru-RU")}`});async function u(m=1){s.value.page=m;try{const i=await R.get(`${O}/index/${s.value.path}/${s.value.page}`,{params:{search:s.value.search,sort:s.value.sort,order:s.value.order}}),[g,e]=i.data;s.value.candidates=g,s.value.prev=e.has_prev,s.value.next=e.has_next,s.value.updated=`${new Date().toLocaleDateString("ru-RU")} в ${new Date().toLocaleTimeString("ru-RU")}`}catch(i){console.error(i)}}function n(m,i){s.value.sort=m,s.value.order=i,u()}const C=F(()=>{s.value.path="search",!(s.value.search.length<3)&&u()},500);return(m,i)=>{const g=M("router-link");return c(),_(f,null,[S(a("div",H,[q,a("div",G,[a("ul",null,[(c(!0),_(f,null,D(Array.from(t(y).viewed).reverse().slice(0,3),(e,w)=>(c(),_("li",{key:w,class:"p-2"},[o(g,{to:{name:"profile",params:{id:Object.keys(e)[w]}}},{default:h(()=>[d(l(Object.values(e)[w]),1)]),_:2},1032,["to"])]))),128))])])],512),[[B,t(y).viewed.size]]),o(t($),{"page-header":"Кандидаты"}),a("div",Y,[a("div",J,[o(t(x),{name:"action",select:s.value.items,modelValue:s.value.path,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value.path=e),onSubmitData:u},null,8,["select","modelValue"])]),a("div",K,[S(a("input",{onInput:i[1]||(i[1]=U((...e)=>t(C)&&t(C)(...e),["prevent"])),class:"form-control",name:"search",id:"search",type:"text",placeholder:"поиск по Фамилии, Имени, Отчеству, ИНН (не менее 3-х символов)","onUpdate:modelValue":i[2]||(i[2]=e=>s.value.search=e)},null,544),[[I,s.value.search]])])]),s.value.candidates.length?(c(),N(t(k),{key:0,"div-class":"table caption-top align-middle py-3"},{caption:h(()=>[d(l(`Обновлено: ${s.value.updated}`)+" ",1),a("a",{href:"#",title:"Обновить",onClick:i[3]||(i[3]=e=>u())},W)]),thead:h(()=>[a("tr",X,[a("th",Z,[d(" # "),o(t(r),{order:"desc",sort:"id",onSortCandidates:n}),o(t(r),{order:"asc",sort:"id",onSortCandidates:n})]),a("th",ee,[d(" Регион "),o(t(r),{order:"desc",sort:"region_id",onSortCandidates:n}),o(t(r),{order:"asc",sort:"region_id",onSortCandidates:n})]),a("th",null,[d(" Фамилия Имя Отчество "),o(t(r),{order:"desc",sort:"surname",onSortCandidates:n}),o(t(r),{order:"asc",sort:"surname",onSortCandidates:n})]),a("th",te,[d(" Дата рождения "),o(t(r),{order:"desc",sort:"birthday",onSortCandidates:n}),o(t(r),{order:"asc",sort:"birthday",onSortCandidates:n})]),a("th",se,[d(" Статус "),o(t(r),{order:"desc",sort:"status_id",onSortCandidates:n}),o(t(r),{order:"asc",sort:"status_id",onSortCandidates:n})]),a("th",ae,[d(" Создан "),o(t(r),{order:"desc",sort:"created",onSortCandidates:n}),o(t(r),{order:"asc",sort:"created",onSortCandidates:n})]),a("th",oe,[d(" Сотрудник "),o(t(r),{order:"desc",sort:"user_id",onSortCandidates:n}),o(t(r),{order:"asc",sort:"user_id",onSortCandidates:n})])])]),tbody:h(()=>[(c(!0),_(f,null,D(s.value.candidates,e=>(c(),_("tr",{key:e.id,height:"50px"},[a("td",null,l(e.id),1),a("td",null,l(t(b).regions[e.region_id]),1),a("td",null,[o(g,{to:{name:"profile",params:{id:e.id}},onClick:w=>t(y).viewed.add({candidate_id:`${e.surname} ${e.firstname} ${e.patronymic?e.patronymic:""}`.trim()})},{default:h(()=>[d(l(`${e.surname} ${e.firstname} ${e.patronymic?e.patronymic:""}`),1)]),_:2},1032,["to","onClick"])]),a("td",null,l(`${new Date(e.birthday).getDate()} ${E[(new Date(e.birthday).getMonth()+1).toString()]} ${new Date(e.birthday).getFullYear()} года`),1),a("td",null,[a("label",{class:j(`fs-6 badge bg-${P[e.status_id]}`)},l(t(b).status[e.status_id]),3)]),a("td",null,l(t(z)(e.created)),1),a("td",null,l(e.user_id?t(b).users[e.user_id].split(" ")[0]:""),1)]))),128))]),_:1})):(c(),_("p",re,"Ничего не найдено")),o(t(V),{has_prev:s.value.prev,has_next:s.value.next,switchPrev:s.value.page-1,switchNext:s.value.page+1,onSwitch:u},null,8,["has_prev","has_next","switchPrev","switchNext"])],64)}}});export{de as default};
