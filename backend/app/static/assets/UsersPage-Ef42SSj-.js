const __vite__fileDeps=["./HeaderDiv-C5mVbKg1.js","./index-BCJo_gEN.js","./index-6fGrG267.css","./UserForm-DtpEsGTR.js","./state-CDYnk2KN.js","./utilities-B_ayHb2j.js","./SwitchBox-DXehRm-5.js","./TableSlots-AI_6LU3l.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as I,i as U,D as k,n as A,c as m,b as r,u as a,a as e,q as p,v as S,s as C,z as f,w as i,F as b,l as P,o as v,r as T,t as n,x as B,e as c,p as L,m as O,f as u}from"./index-BCJo_gEN.js";import{d as R,e as $,c as F}from"./state-CDYnk2KN.js";import{s as M,t as x,d as N}from"./utilities-B_ayHb2j.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q=d=>(L("data-v-03e0ce94"),d=d(),O(),d),z={class:"row mb-3"},H={class:"d-flex justify-content-between mb-3"},G=q(()=>e("tr",null,[e("th",{width:"10%"},"#"),e("th",null,"Имя пользователя"),e("th",{width:"15%"},"Логин"),e("th",{width:"10%"},"Блокировка"),e("th",{width:"15%"},"Создан"),e("th",{width:"15%"},"Вход"),e("th",{width:"15%"},"Регион")],-1)),J={colspan:"7"},K={width:"10%"},Q={width:"15%"},W={width:"10%"},X={width:"15%"},Y={width:"15%"},Z={width:"15%"},ee=I({__name:"UsersPage",setup(d){const y=c(()=>u(()=>import("./HeaderDiv-C5mVbKg1.js"),__vite__mapDeps([0,1,2]),import.meta.url)),g=c(()=>u(()=>import("./UserForm-DtpEsGTR.js"),__vite__mapDeps([3,1,2,4,5]),import.meta.url)),D=c(()=>u(()=>import("./SwitchBox-DXehRm-5.js"),__vite__mapDeps([6,1,2]),import.meta.url)),h=c(()=>u(()=>import("./TableSlots-AI_6LU3l.js"),__vite__mapDeps([7,1,2]),import.meta.url)),w=N(()=>{_()},500);U(()=>{_()});const V=k(()=>o.value.users.filter(l=>l.deleted==o.value.viewDeleted)),o=A({action:"",search:"",viewDeleted:!1,users:[]});async function _(){try{const l=await R.get(`${M}/users`,{params:{search:o.value.search}});o.value.users=l.data}catch(l){$.setAlert("alert-success",l)}}return(l,s)=>{const E=P("router-link");return v(),m(b,null,[r(a(y),{"page-header":"Список пользователей",cls:"text-secondary py-5"}),e("div",z,[p(e("input",{onInput:s[0]||(s[0]=C((...t)=>a(w)&&a(w)(...t),["prevent"])),class:"form-control mb-3",name:"search",id:"search",type:"text",placeholder:"Поиск по имени пользователя","onUpdate:modelValue":s[1]||(s[1]=t=>o.value.search=t)},null,544),[[S,o.value.search]])]),e("div",H,[r(a(D),{name:"viewDeleted",label:"Показать удаленные",modelValue:o.value.viewDeleted,"onUpdate:modelValue":s[2]||(s[2]=t=>o.value.viewDeleted=t)},null,8,["modelValue"])]),p(r(a(g),{action:o.value.action,onUpdate:s[3]||(s[3]=t=>{o.value.action="",_()}),onCancel:s[4]||(s[4]=t=>o.value.action="")},null,8,["action"]),[[f,o.value.action]]),p(r(a(h),{"tbl-class":"table align-middle"},{caption:i(()=>[e("button",{class:"btn btn-link text-secondary",type:"button",onClick:s[5]||(s[5]=t=>o.value.action===""?o.value.action="create":o.value.action="")}," Добавить пользователя ")]),thead:i(()=>[G]),tbody:i(()=>[e("tr",null,[e("td",J,[r(a(h),{id:"overflow","tbl-class":"table table-hover align-middle no-bottom-border"},{tbody:i(()=>[(v(!0),m(b,null,T(V.value,t=>(v(),m("tr",{height:"50px",key:t.id},[e("td",K,n(t.id),1),e("td",null,n(t.fullname),1),e("td",Q,[r(E,{to:{name:"user",params:{id:t.id}}},{default:i(()=>[B(n(t.username),1)]),_:2},1032,["to"])]),e("td",W,n(t.blocked?"Да":"Нет"),1),e("td",X,n(a(x)(t.pswd_create)),1),e("td",Y,n(a(x)(t.last_login)),1),e("td",Z,n(a(F).regions[t.region]),1)]))),128))]),_:1})])])]),_:1},512),[[f,o.value.action===""]])],64)}}}),ne=j(ee,[["__scopeId","data-v-03e0ce94"]]);export{ne as default};
