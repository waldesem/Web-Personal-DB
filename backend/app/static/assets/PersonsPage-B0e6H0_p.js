const __vite__fileDeps=["./HeaderDiv-BGsjcrVS.js","./index-8uvu1PmF.js","./index-BqKjTnG4.css","./TableSlots-t_DLv2CU.js","./PageSwitcher-B8oDViZm.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as S,f as P,l as L,c as i,a as d,u as n,g as a,m as C,v as E,n as R,h as T,w as c,F as m,i as V,o as l,q as f,t as s,s as g,x as N,b as h,e as _}from"./index-8uvu1PmF.js";import{a as U,s as A,b as B,t as I,d as M}from"./utilities-Dq58mqGZ.js";const O={class:"row mb-3"},F={class:"form form-check",role:"form"},H={height:"50px"},q=["width"],z={key:1},K=S({__name:"PersonsPage",setup(j){const w=h(()=>_(()=>import("./HeaderDiv-BGsjcrVS.js"),__vite__mapDeps([0,1,2]),import.meta.url)),x=h(()=>_(()=>import("./TableSlots-t_DLv2CU.js"),__vite__mapDeps([3,1,2]),import.meta.url)),y=h(()=>_(()=>import("./PageSwitcher-B8oDViZm.js"),__vite__mapDeps([4,1,2]),import.meta.url));P(async()=>{await u()});const D=o=>{switch(o){case"Проверка":return"primary";case"ПФО":return"info";case"Окончено":return"secondary";case"Сохранено":return"warning"}},$={id:["#","5%"],region_id:["Регион","15%"],surname:["Фамилия Имя Отчество","25%"],birthday:["Дата рождения","15%"],status:["Статус","10%"],created:["Создан","15%"],user:["Сотрудник","15%"]},t=L({candidates:[],page:1,prev:!1,next:!1,search:"",updated:`${new Date().toLocaleDateString("ru-RU")} в ${new Date().toLocaleTimeString("ru-RU")}`});async function u(o=1){t.value.page=o;try{const r=await U.get(`${A}/index/${t.value.page}`,{params:{search:t.value.search}});[t.value.candidates,t.value.next,t.value.prev]=r.data,t.value.updated=`${new Date().toLocaleDateString("ru-RU")} в ${new Date().toLocaleTimeString("ru-RU")}`}catch(r){B(r)}}const v=M(()=>{u()},500),b=o=>{const[r,p]=o.split(" ");return`${r} ${p}`};return(o,r)=>{const p=V("router-link");return l(),i(m,null,[d(n(w),{"page-header":"Кандидаты"}),a("div",O,[a("form",F,[C(a("input",{onInput:r[0]||(r[0]=R((...e)=>n(v)&&n(v)(...e),["prevent"])),class:"form-control",name:"search",id:"search",type:"text",placeholder:"поиск по фамилии, имени, отчеству, инн","onUpdate:modelValue":r[1]||(r[1]=e=>t.value.search=e)},null,544),[[E,t.value.search]])])]),t.value.candidates.length?(l(),T(n(x),{key:0},{caption:c(()=>[f(s(`Обновлено: ${t.value.updated}`)+" ",1),a("a",{class:"btn btn-link fs-5",href:"#",style:{"text-decoration":"none"},title:"Обновить",onClick:r[2]||(r[2]=e=>u())}," ↻ ")]),thead:c(()=>[a("tr",H,[(l(),i(m,null,g($,(e,k)=>a("th",{key:k,width:e[1]},s(e[0]),9,q)),64))])]),tbody:c(()=>[(l(!0),i(m,null,g(t.value.candidates,e=>(l(),i("tr",{key:e.id,height:"50px"},[a("td",null,s(e.id),1),a("td",null,s(e.region),1),a("td",null,[d(p,{to:{name:"profile",params:{id:e.id}}},{default:c(()=>[f(s(`${e.surname} ${e.firstname} ${e.patronymic?e.patronymic:""}`),1)]),_:2},1032,["to"])]),a("td",null,s(new Date(e.birthday).toLocaleDateString("ru-RU")),1),a("td",null,[a("label",{class:N(`fs-6 badge bg-${D(e.status)}`)},s(e.status),3)]),a("td",null,s(n(I)(e.created)),1),a("td",null,s(e.username?b(e.username.toString()):""),1)]))),128))]),_:1})):(l(),i("p",z,"Ничего не найдено")),d(n(y),{has_prev:t.value.prev,has_next:t.value.next,switchPrev:t.value.page-1,switchNext:t.value.page+1,onSwitch:u},null,8,["has_prev","has_next","switchPrev","switchNext"])],64)}}});export{K as default};
