import{d as _,n as p,q as h,h as r,s as d,o as n,c,a as s,E as m,C as i,K as v,F as u,x as b,B as M,u as y,G as k,p as x,m as C}from"./index-C5gLaoji.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const f=l=>(x("data-v-f1f22d40"),l=l(),C(),l),w={href:"#offcanvasMessage",role:"button","data-bs-toggle":"offcanvas"},B={key:0,class:"position-absolute translate-middle badge rounded-pill text-bg-success"},I={class:"offcanvas offcanvas-end","data-bs-scroll":"true",id:"offcanvasMessage"},D={class:"offcanvas-body"},$={class:"d-flex justify-content-between mb-3"},N=f(()=>s("i",{class:"bi bi-arrow-clockwise"},null,-1)),V=[N],j=f(()=>s("i",{class:"bi bi-trash"},null,-1)),A=[j],E={class:"card-header"},F={class:"d-flex justify-content-between"},q=["onClick"],z={class:"card-body text-break text-start"},G=_({__name:"MessageDiv",setup(l){p(()=>{e.value.updateMessages()});const e=h({isStarted:!1,messages:Array(),async updateMessages(){try{const o=await r.get(`${d}/messages`),{messages:a}=o.data;this.messages=a}catch(o){console.error(o)}this.isStarted||(this.isStarted=!0,setInterval(this.updateMessages,1e6))},async deleteMessage(o=""){try{const a=await r.delete(`${d}/messages`,{params:{id:o}});console.log(a.status),this.updateMessages()}catch(a){console.error(a)}}});return(o,a)=>(n(),c(u,null,[s("a",w,[s("i",{class:m(["fs-3",`${e.value.messages.length?"bi bi-bell-fill":"bi bi-bell"}`])},null,2),e.value.messages.length?(n(),c("span",B,i(e.value.messages.length),1)):v("",!0)]),s("div",I,[s("div",D,[s("div",$,[s("a",{href:"#",class:"link-danger",title:"Обновить сообщения",onClick:a[0]||(a[0]=(...t)=>e.value.updateMessages&&e.value.updateMessages(...t))},V),s("a",{href:"#",class:"link-danger",title:"Удалить все сообщения",onClick:a[1]||(a[1]=(...t)=>e.value.deleteMessage&&e.value.deleteMessage(...t))},A)]),(n(!0),c(u,null,b(e.value.messages,(t,g)=>(n(),c("div",{key:g,class:"card"},[s("div",E,[s("small",F,[M(i(y(k)(t.created))+" ",1),s("button",{type:"button",class:"btn-close btn-sm",onClick:K=>e.value.deleteMessage(t.id)},null,8,q)])]),s("small",z,i(t.message),1)]))),128))])])],64))}}),H=S(G,[["__scopeId","data-v-f1f22d40"]]);export{H as default};
