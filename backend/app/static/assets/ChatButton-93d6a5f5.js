import{d as m,q as y,l as f,v as d,u as g,o as c,c as l,b as t,F as x,h as w,n as u,t as B,x as k,y as C,z as S,g as r,s as $}from"./index-1e5f1f68.js";const j={key:0,class:"d-print-none"},I=t("a",{class:"chatbot-button dropdown-toggle",role:"button","data-bs-toggle":"dropdown","data-bs-auto-close":"false"},[t("i",{class:"bi bi-chat-dots-fill fs-1"})],-1),O={class:"dropdown-menu",id:"chatbot"},D=t("p",{class:"dropdown-header text-center fs-5"},"StaffSecBot",-1),V=t("hr",{class:"dropdown-divider"},null,-1),q={id:"chatcontent"},z={class:"py-3"},E=["onSubmit"],F={class:"row"},L={class:"col-md-9"},M={class:"col-md-1"},N=["disabled"],T=t("i",{class:"bi bi-send"},null,-1),A={key:0,class:"spinner-grow spinner-grow-sm text-primary"},H={key:1,class:"visually-hidden",role:"status"},U={class:"col-md-1"},G=["disabled"],J=t("i",{class:"bi bi-trash"},null,-1),K=[J],R=m({__name:"ChatButton",setup(P){const h=y(),_=f(),s=d([]);s.value.push({chatBot:"Добро пожаловать в чат!"});const n=d(""),e=d(!1);function p(){s.value=[],s.value.push({chatBot:"Добро пожаловать в чат!"})}async function v(){e.value=!0,s.value.push({Вы:n.value});try{const o=await h.axiosInstance.post(`${$}/chat`,{data:n.value});s.value.push(o.data)}catch(o){s.value.push({chatBot:o})}n.value="";const i=document.getElementById("chatcontent");i&&(i.scrollTop=i.scrollHeight),e.value=!1}return(i,o)=>["admins","login"].includes(g(_).pageIdentity)?(c(),l("div",j,[I,t("div",O,[D,V,t("div",q,[(c(!0),l(x,null,w(s.value,(a,b)=>(c(),l("div",{key:b,class:u(`${Object.keys(a)[0]==="chatBot"?"px-3":"px-5"} py-2`)},[t("div",{class:u(`p-3 bg-${Object.keys(a)[0]!=="chatBot"?"danger":"success"} bg-opacity-75 border rounded text-wrap text-light`)},B(`${Object.keys(a)[0]}: ${Object.values(a)[0]}`),3)],2))),128))]),t("div",z,[t("form",{onSubmit:k(v,["prevent"]),class:"form form-check",role:"form"},[t("div",F,[t("div",L,[C(t("input",{class:"form-control",id:"chat",name:"chat",required:"","onUpdate:modelValue":o[0]||(o[0]=a=>n.value=a)},null,512),[[S,n.value]])]),t("div",M,[t("button",{disabled:e.value,class:"btn btn-outline-primary btn-sm",title:"Отправить",type:"submit"},[T,e.value?(c(),l("span",A)):r("",!0),e.value?(c(),l("span",H,"Отправка...")):r("",!0)],8,N)]),t("div",U,[t("button",{disabled:e.value,class:"btn btn-outline-secondary btn-sm",onClick:p,type:"button",title:"Очистить"},K,8,G)])])],40,E)])])])):r("",!0)}});export{R as default};
