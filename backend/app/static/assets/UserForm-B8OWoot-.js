const __vite__fileDeps=["./LabelSlot-B-p4gUyz.js","./index-BYAJzIZ5.js","./index-6fGrG267.css","./_plugin-vue_export-helper-DlAUqK2U.js","./LabelSlot-BKRWK_aH.css","./InputElement-BodEtqwB.js","./SelectDiv-Cv6yX2kN.js","./SwitchBox-CDuZhC8N.js","./BtnGroup-IqX8hDfJ.js","./GroupContent-BsrK9STy.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as D,J as I,o as L,c as O,a as p,b as l,w as s,u as t,s as P,e as r,f as i}from"./index-BYAJzIZ5.js";import{c as R,d as f,e as c}from"./state-p7j6PBAe.js";import{s as v,c as U}from"./utilities-DuY9392d.js";const C={class:"p-3"},T={class:"row m-3"},x={class:"col col-auto"},k=D({__name:"UserForm",props:{action:{type:String,default:""},item:{type:Object,default:{}}},emits:["update","cancel"],setup(V,{emit:b}){const u=r(()=>i(()=>import("./LabelSlot-B-p4gUyz.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),d=r(()=>i(()=>import("./InputElement-BodEtqwB.js"),__vite__mapDeps([5,1,2]),import.meta.url)),A=r(()=>i(()=>import("./SelectDiv-Cv6yX2kN.js"),__vite__mapDeps([6,1,2]),import.meta.url)),E=r(()=>i(()=>import("./SwitchBox-CDuZhC8N.js"),__vite__mapDeps([7,1,2]),import.meta.url)),g=r(()=>i(()=>import("./BtnGroup-IqX8hDfJ.js"),__vite__mapDeps([8,1,2]),import.meta.url)),w=r(()=>i(()=>import("./GroupContent-BsrK9STy.js"),__vite__mapDeps([9,1,2]),import.meta.url)),_=b,o=V,e=I(o.item);async function y(){try{const m=o.action==="edit"?await f.patch(`${v}/user/${o.item.id}`,e.value):await f.post(`${v}/user`,e.value);console.log(m.status),o.action==="edit"?c.setAlert("alert-success","Пользователь успешно изменен"):c.setAlert("alert-success","Пользователь успешно создан")}catch(m){console.error(m),c.setAlert("alert-danger","Ошибка сохранения данных")}U(e.value),_("update")}return(m,a)=>(L(),O("div",C,[p("form",{onSubmit:P(y,["prevent"]),class:"form form-check",role:"form"},[l(t(u),{label:"Имя пользователя"},{default:s(()=>[l(t(d),{name:"fullname",place:"Имя пользователя",need:o.action!=="edit",pattern:"[a-zA-Zа-яА-Я ]+",modelValue:e.value.fullname,"onUpdate:modelValue":a[0]||(a[0]=n=>e.value.fullname=n)},null,8,["need","modelValue"])]),_:1}),l(t(u),{label:"Учетная запись"},{default:s(()=>[l(t(d),{name:"username",place:"Учетная запись",pattern:"[a-zA-Z]+",need:o.action!=="edit",disable:o.action==="edit",modelValue:e.value.username,"onUpdate:modelValue":a[1]||(a[1]=n=>e.value.username=n)},null,8,["need","disable","modelValue"])]),_:1}),l(t(u),{label:"Электронная почта"},{default:s(()=>[l(t(d),{name:"email",place:"Электронная почта",typeof:"email",need:o.action!=="edit",modelValue:e.value.email,"onUpdate:modelValue":a[2]||(a[2]=n=>e.value.email=n)},null,8,["need","modelValue"])]),_:1}),l(t(u),{label:"Регион"},{default:s(()=>[l(t(A),{name:"region",place:"Регион",need:o.action!=="edit",select:t(R).regions,modelValue:e.value.region,"onUpdate:modelValue":a[3]||(a[3]=n=>e.value.region=n)},null,8,["need","select","modelValue"])]),_:1}),l(t(u),{label:"Администратор"},{default:s(()=>[l(t(E),{name:"admin",modelValue:e.value.has_admin,"onUpdate:modelValue":a[4]||(a[4]=n=>e.value.has_admin=n)},null,8,["modelValue"])]),_:1}),p("div",T,[p("div",x,[l(t(g),{offset:!1},{default:s(()=>[l(t(w),{"submit-btn":o.action==="create"?"Создать":"Изменить",onCancel:a[5]||(a[5]=n=>_("cancel"))},null,8,["submit-btn"])]),_:1})])])],32)]))}});export{k as default};
