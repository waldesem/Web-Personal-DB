{% macro check_form_macro(id, check = {}) %}

{% from "elements.html.jinja" import label_macro, input_macro, textarea_macro, select_macro, btn_group_macro %}
{% set options = ["СОГЛАСОВАНО", "СОГЛАСОВАНО С КОММЕНТАРИЕМ", "ОТКАЗАНО В СОГЛАСОВАНИИ"] %}
{% set no_negative = {
    workplace: "Негатива по местам работы не обнаружено",
    document: "Среди недействительных документов не обнаружен",
    inn: "ИНН соответствует паспорту",
    debt: "Задолженности не обнаружены",
    bankruptcy: "Решений о признании банкротом не имеется",
    bki: "Кредитная история не положительная",
    courts: "Судебные дела не обнаружены",
    affilation: "Аффилированность не выявлена",
    terrorist: "В списке террористов не обнаружен",
    mvd: "В розыск не объявлен",
    internet: "В открытых источниках негатив не обнаружен",
    cronos: "В Кронос негатив не выявлен",
    comment: "Комментарии отсутствуют",
    conclusion: "СОГЛАСОВАНО"
  }
%}

{% set check_items = {
    'workplace': ["Проверка по местам работы", check['workplace'] if check['workplace'] else no_negative['workplace']],
    'document': ["Проверка документов", check['document'] if check['document'] else no_negative['document']],
    'inn': ["Проверка ИНН", check['inn'] if check['inn'] else no_negative['inn']],
    'debt': ["Проверка задолженностей", check['debt'] if check['debt'] else no_negative['debt']],
    'bankruptcy': ["Проверка банкротства", check['bankruptcy'] if check['bankruptcy'] else no_negative['bankruptcy']],
    'bki': ["Проверка БКИ", check['bki'] if check['bki'] else no_negative['bki']],
    'courts': ["Проверка судебных дел", check['courts'] if check['courts'] else no_negative['courts']],
    'affilation': ["Проверка аффилированности", check['affilation'] if check['affilation'] else no_negative['affilation']],
    'terrorist': ["Проверка террористов", check['terrorist'] if check['terrorist'] else no_negative['terrorist']],
    'mvd': ["Проверка в розыск", check['mvd'] if check['mvd'] else no_negative['mvd']],
    'internet': ["Проверка в открытых источниках", check['internet'] if check['internet'] else no_negative['internet']],
    'cronos': ["Проверка в Кронос", check['cronos'] if check['cronos'] else no_negative['cronos']],
    'additional': ["Дополнительная информация", check['additional'] if check['additional'] else no_negative['additional']],
    'comment': ["Комментарии", check['comment'] if check['comment'] else no_negative['comment']],
} %}

<form 
  class="form form-check" 
  hx-post="{{ url_for('route.post_item_id', item='checks', item_id=id) }}"
  hx-target="#checks"
  hx-trigger="submit"
  hx-swap="innerHTML"
>
  
  {{ input_macro("id", "id", type="hidden", value=check['id']) }}

  {% for key, value in check_items.items() %}
  {% call label_macro(value[0]) %}
  {{ textarea_macro(key, value[0], value[1]) }}
  {% endcall %}
  {% endfor %}


  {% call label_macro("Результат") %}
  {{ select_macro("conclusion", options, check['conclusion']) }}
  {% endcall %}

  {{ btn_group_macro() }}
</form>
{% endmacro %}