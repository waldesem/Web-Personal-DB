{% macro anketa_tab_macro(id, person = []) %}

{% from "profile/macros/persons.html" import resume_div_macro %}
{% from "profile/macros/staffs.html" import staff_div_macro %}
{% from "profile/macros/workplaces.html" import work_div_macro %}
{% from "profile/macros/educations.html" import education_div_macro %}
{% from "profile/macros/affilations.html" import affilation_div_macro %}
{% from "profile/macros/previous.html" import prev_div_macro %}
{% from "profile/macros/relations.html" import relation_div_macro %}
{% from "profile/macros/addresses.html" import address_div_macro %}
{% from "profile/macros/contacts.html" import contact_div_macro %}
{% from "profile/macros/documents.html" import document_div_macro %}

{% set accordion = {
  'persons': ['Резюме', resume_div_macro(person['persons'])],
  'staffs': ['Должности', staff_div_macro(id, person['staffs'])],
  'workplaces': ['Работа', work_div_macro(id, person['workplaces'])],
  'educations': ['Образование', education_div_macro(id, person['educations'])],
  'affilations': ['Аффилированные организации', affilation_div_macro(id, person['affiliations'])],
  'previous': ['Предыдущие имена', prev_div_macro(id, person['previous_names'])],
  'relations': ['Связи', relation_div_macro(id, person['relations'])],
  'addresses': ['Адреса', address_div_macro(id, person['addresses'])],
  'contacts': ['Контакты', contact_div_macro(id, person['contacts'])],
  'documents': ['Документы', document_div_macro(id, person['documents'])],
} %}

<div class="accordion" id="profile">
  {% for key, value in accordion.items() %}
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button 
        class="accordion-button collapsed" 
        type="button" 
        data-bs-toggle="collapse" 
        data-bs-target={{"#accordion-" + key}}
      >
        {{ value[0] }}
      </button>
    </h2>
    <div 
      id={{"accordion-" + key}} 
      class="accordion-collapse collapse {{ 'show' if key == 'persons' }}" 
      data-bs-parent="#profile"
    >
      <div class="accordion-body" id="{{ key }}">
        {{ value[1] }}
      </div>
    </div>
  </div>
  {% endfor %}
</div>

{% endmacro %}
