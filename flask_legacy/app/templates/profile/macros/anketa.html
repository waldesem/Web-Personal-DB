{% macro anketa_tab_macro(id, person = []) %}

{% from "profile/divs/persons.html" import resume_div_macro %}
{% from "profile/divs/staffs.html" import staff_div_macro %}
{% from "profile/divs/workplaces.html" import work_div_macro %}
{% from "profile/divs/educations.html" import education_div_macro %}
{% from "profile/divs/affilations.html" import affilation_div_macro %}
{% from "profile/divs/previous.html" import prev_div_macro %}
{% from "profile/divs/relations.html" import relation_div_macro %}
{% from "profile/divs/addresses.html" import address_div_macro %}
{% from "profile/divs/contacts.html" import contact_div_macro %}
{% from "profile/divs/documents.html" import document_div_macro %}

{% set accordion = {
  'persons': ['Резюме', resume_div_macro(person['persons'])],
  'staffs': ['Должности', staff_div_macro(id, person['staffs'])],
  'works': ['Работа', work_div_macro(id, person['workplaces'])],
  'educates': ['Образование', education_div_macro(id, person['educations'])],
  'affils': ['Аффилированные организации', affilation_div_macro(id, person['affiliations'])],
  'prevs': ['Предыдущие имена', prev_div_macro(id, person['previous_names'])],
  'relates': ['Связи', relation_div_macro(id, person['relations'])],
  'address': ['Адреса', address_div_macro(id, person['addresses'])],
  'contacts': ['Контакты', contact_div_macro(id, person['contacts'])],
  'docums': ['Документы', document_div_macro(id, person['documents'])],
} %}

<div class="accordion" id="profile">
  {% for key, value in accordion.items() %}
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target={{"#accordion" + key}}>
        {{ value[0] }}
      </button>
    </h2>
    <div id={{"accordion" + key}} class="accordion-collapse collapse {{ 'show' if key == 'persons' }}" data-bs-parent="#profile">
      <div class="accordion-body" id="profile-{{ key }}">
        {{ value[1] }}
      </div>
    </div>
  </div>
  {% endfor %}
</div>

{% endmacro %}
