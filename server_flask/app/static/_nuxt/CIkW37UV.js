import{u as T,b as A,a as D}from"./D0Q5Al_0.js";import{m as G,ap as R,j as M,_ as E,f as C,q as H,s as U,r as $,a4 as P,K as I,P as J,X as K,v as X,x as Z,y as L,o as S,c as Q,a as W,C as Y,z as ee,A as ae,aq as le,h as O,w as p,b as t,p as te,i as n,E as oe}from"./BL57t9pv.js";import{_ as ne}from"./A1NmxWM6.js";import{_ as re}from"./Yo-9r0Kq.js";const b=G(M.ui.strategy,M.ui.textarea,R),ue=C({inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rows:{type:Number,default:3},maxrows:{type:Number,default:0},autoresize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},resize:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(b.size).includes(e)}},color:{type:String,default:()=>b.default.color,validator(e){return[...M.ui.colors,...Object.keys(b.color)].includes(e)}},variant:{type:String,default:()=>b.default.variant,validator(e){return[...Object.keys(b.variant),...Object.values(b.color).flatMap(i=>Object.keys(i))].includes(e)}},textareaClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(e,{emit:i}){const{ui:d,attrs:h}=H("textarea",U(e,"ui"),b,U(e,"class")),{emitFormBlur:l,emitFormInput:y,inputId:f,color:v,size:V,name:s}=T(e,b),a=$(P({},e.modelModifiers,{trim:!1,lazy:!1,number:!1})),u=$(null),m=()=>{var r;e.autofocus&&((r=u.value)==null||r.focus())},g=()=>{if(e.autoresize){if(!u.value)return;u.value.rows=e.rows;const r=u.value.style.overflow;u.value.style.overflow="hidden";const c=window.getComputedStyle(u.value),_=parseInt(c.paddingTop),k=parseInt(c.paddingBottom),q=_+k,F=parseInt(c.lineHeight),{scrollHeight:N}=u.value,B=(N-q)/F;B>e.rows&&(u.value.rows=e.maxrows?Math.min(B,e.maxrows):B),u.value.style.overflow=r}},w=r=>{a.value.trim&&(r=r.trim()),a.value.number&&(r=le(r)),i("update:modelValue",r),y()},z=r=>{g(),a.value.lazy||w(r.target.value)},o=r=>{const c=r.target.value;i("change",c),a.value.lazy&&w(c),a.value.trim&&(r.target.value=c.trim())},j=r=>{i("blur",r),l()};I(()=>{setTimeout(()=>{m()},e.autofocusDelay)}),J(()=>e.modelValue,()=>{K(g)}),I(()=>{setTimeout(()=>{m(),g()},100)});const x=X(()=>{var c,_;const r=((_=(c=d.value.color)==null?void 0:c[v.value])==null?void 0:_[e.variant])||d.value.variant[e.variant];return Z(L(d.value.base,d.value.form,d.value.rounded,d.value.placeholder,d.value.size[V.value],e.padded?d.value.padding[V.value]:"p-0",r==null?void 0:r.replaceAll("{color}",v.value),!e.resize&&"resize-none"),e.textareaClass)});return{ui:d,attrs:h,name:s,inputId:f,textarea:u,textareaClass:x,onInput:z,onChange:o,onBlur:j}}}),se=["id","value","name","rows","required","disabled","placeholder"];function ie(e,i,d,h,l,y){return S(),Q("div",{class:ae(e.ui.wrapper)},[W("textarea",Y({id:e.inputId,ref:"textarea",value:e.modelValue,name:e.name,rows:e.rows,required:e.required,disabled:e.disabled,placeholder:e.placeholder,class:e.textareaClass},e.attrs,{onInput:i[0]||(i[0]=(...f)=>e.onInput&&e.onInput(...f)),onBlur:i[1]||(i[1]=(...f)=>e.onBlur&&e.onBlur(...f)),onChange:i[2]||(i[2]=(...f)=>e.onChange&&e.onChange(...f))}),null,16,se),ee(e.$slots,"default")],2)}const de=E(ue,[["render",ie]]),me=C({__name:"BtnGroup",emits:["cancel"],setup(e,{emit:i}){const d=i;return(h,l)=>{const y=te,f=ne;return S(),O(f,{class:"mt-3",size:"md",orientation:"horizontal"},{default:p(()=>[t(y,{label:"Принять",color:"green",variant:"outline",type:"submit"}),t(y,{label:"Отмена",color:"red",variant:"outline",onClick:l[0]||(l[0]=v=>d("cancel"))})]),_:1})}}}),ye=C({__name:"ResumeForm",props:{resume:{type:Object,default:{}}},emits:["cancel","update"],setup(e,{emit:i}){const d=i,l=U(e.resume);l.value.birthday=l.value.birthday?new Date(l.value.birthday).toISOString().slice(0,10):"";function y(){d("cancel"),f()}function f(){Object.assign(l.value,{surname:"",firstname:"",patronymic:"",birthday:"",birthplace:"",citizenship:"",dual:"",inn:"",snils:"",marital:"",addition:""})}const v=s=>{const a=[];return s.surname&&!s.surname.match(/^[а-яёЁА-Я-\s]+$/)&&a.push({path:"surname",message:"Поле должно содержать только русские буквы"}),s.firstname&&!s.firstname.match(/^[а-яёЁА-Я-\s]+$/)&&a.push({path:"firstname",message:"Поле должно содержать только русские буквы"}),s.patronymic&&!s.patronymic.match(/^[а-яёЁА-Я-\s]+$/)&&a.push({path:"patronymic",message:"Поле должно содержать только русские буквы"}),Object.prototype.toString.call(s.birthday)||(console.log(s.birthday),a.push({path:"birthday",message:"Поле должно содержать дату"})),new Date(s.birthday)>new Date&&(console.log(s.birthday),a.push({path:"birthday",message:"Поле должно содержать корректную дату"})),s.snils&&!s.snils.match(/^[0-9]{11}$/)&&a.push({path:"snils",message:"Поле должно содержать 11 цифр"}),s.inn&&!s.inn.match(/^[0-9]{12}$/)&&a.push({path:"inn",message:"Поле должно содержать 12 цифр"}),s.designation&&!s.designation.match(/^([a-zA-Z]:)?[/\\][\w.-]+(\/|\\)[\w.-]+$/)&&a.push({path:"designation",message:"Поле должно содержать корректный путь"}),a};async function V(){d("update",l.value),f()}return(s,a)=>{const u=A,m=D,g=de,w=me,z=re;return S(),O(z,{state:n(l),validate:v,onSubmit:oe(V,["prevent"])},{default:p(()=>[t(m,{class:"mb-3",label:"Фамилия",name:"surname"},{default:p(()=>[t(u,{modelValue:n(l).surname,"onUpdate:modelValue":a[0]||(a[0]=o=>n(l).surname=o),modelModifiers:{trim:!0},required:"",placeholder:"Фамилия"},null,8,["modelValue"])]),_:1}),t(m,{class:"mb-3",label:"Имя",name:"firstname"},{default:p(()=>[t(u,{modelValue:n(l).firstname,"onUpdate:modelValue":a[1]||(a[1]=o=>n(l).firstname=o),modelModifiers:{trim:!0},required:"",placeholder:"Имя"},null,8,["modelValue"])]),_:1}),t(m,{class:"mb-3",label:"Отчество",name:"patronymic"},{default:p(()=>[t(u,{modelValue:n(l).patronymic,"onUpdate:modelValue":a[2]||(a[2]=o=>n(l).patronymic=o),modelModifiers:{trim:!0},placeholder:"Отчество"},null,8,["modelValue"])]),_:1}),t(m,{class:"mb-3",label:"Дата рождения",name:"birthday"},{default:p(()=>[t(u,{modelValue:n(l).birthday,"onUpdate:modelValue":a[3]||(a[3]=o=>n(l).birthday=o),required:"",type:"date"},null,8,["modelValue"])]),_:1}),t(m,{class:"mb-3",label:"Место рождения"},{default:p(()=>[t(g,{modelValue:n(l).birthplace,"onUpdate:modelValue":a[4]||(a[4]=o=>n(l).birthplace=o),modelModifiers:{trim:!0,lazy:!0},placeholder:"Место рождения"},null,8,["modelValue"])]),_:1}),t(m,{class:"mb-3",label:"Гражданство",name:"citizenship"},{default:p(()=>[t(u,{modelValue:n(l).citizenship,"onUpdate:modelValue":a[5]||(a[5]=o=>n(l).citizenship=o),modelModifiers:{trim:!0},placeholder:"Гражданство"},null,8,["modelValue"])]),_:1}),t(m,{class:"mb-3",label:"Двойное гражданство",name:"dual"},{default:p(()=>[t(u,{modelValue:n(l).dual,"onUpdate:modelValue":a[6]||(a[6]=o=>n(l).dual=o),modelModifiers:{trim:!0},placeholder:"Двойное гражданство"},null,8,["modelValue"])]),_:1}),t(m,{class:"mb-3",label:"СНИЛС",name:"snils"},{default:p(()=>[t(u,{modelValue:n(l).snils,"onUpdate:modelValue":a[7]||(a[7]=o=>n(l).snils=o),modelModifiers:{trim:!0,lazy:!0},placeholder:"СНИЛС"},null,8,["modelValue"])]),_:1}),t(m,{class:"mb-3",label:"ИНН",name:"inn"},{default:p(()=>[t(u,{modelValue:n(l).inn,"onUpdate:modelValue":a[8]||(a[8]=o=>n(l).inn=o),modelModifiers:{trim:!0,lazy:!0},placeholder:"ИНН"},null,8,["modelValue"])]),_:1}),t(m,{class:"mb-3",label:"Семейное положение",name:"marital"},{default:p(()=>[t(g,{modelValue:n(l).marital,"onUpdate:modelValue":a[9]||(a[9]=o=>n(l).marital=o),modelModifiers:{trim:!0,lazy:!0},placeholder:"Семейное положение"},null,8,["modelValue"])]),_:1}),t(m,{class:"mb-3",label:"Дополнительно"},{default:p(()=>[t(g,{modelValue:n(l).addition,"onUpdate:modelValue":a[10]||(a[10]=o=>n(l).addition=o),modelModifiers:{trim:!0,lazy:!0},placeholder:"Дополнительно"},null,8,["modelValue"])]),_:1}),t(m,{help:"Следует использовать только в режиме редактирования иначе данные будут перезаписаны",class:"mb-3",label:"Материалы",name:"destination"},{default:p(()=>[t(u,{modelValue:n(l).destination,"onUpdate:modelValue":a[11]||(a[11]=o=>n(l).destination=o),modelModifiers:{trim:!0,lazy:!0},placeholder:"Материалы"},null,8,["modelValue"])]),_:1}),t(w,{onCancel:y})]),_:1},8,["state"])}}});export{ye as _,me as a,de as b};
