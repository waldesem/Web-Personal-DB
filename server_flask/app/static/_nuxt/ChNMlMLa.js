import{_ as $}from"./CvFgdwu2.js";import{_ as D}from"./DeOlo96I.js";import{_ as j}from"./DZZmJpvd.js";import{_ as F}from"./DVqmOnQS.js";import{f as B,g as I,o as a,h as m,w as d,b as h,j as s,c as i,a as t,q as b,m as M,x as V,l as L,d as p,t as l,i as N,F as T,p as U,e as E,y as P}from"./BLczYTEp.js";import{d as A}from"./Dot1e486.js";import{c as R,d as q,a as H,e as z,s as G}from"./CRlNADb7.js";import{_ as J}from"./DlAUqK2U.js";import"./DISlfMCt.js";const r=c=>(U("data-v-357e0e79"),c=c(),E(),c),K={key:0,class:"position-relative"},O={class:"position-absolute bottom-100 end-0 px-3"},Q=r(()=>t("label",{title:"Загрузить json",for:"file",class:"text-primary fs-5",style:{cursor:"pointer"}},[p("Загрузить "),t("i",{class:"bi bi-filetype-json fs-5"})],-1)),W={class:"row mb-3"},X={class:"form form-check"},Y=r(()=>t("i",{class:"bi bi-arrow-clockwise"},null,-1)),Z=[Y],tt=r(()=>t("tr",{height:"50px"},[t("th",{width:"5%"},"#"),t("th",{width:"15%"},"Регион"),t("th",null,"Фамилия Имя Отчество"),t("th",{width:"15%"},"Дата рождения"),t("th",{width:"15%"},"Обновлено"),t("th",{width:"15%"},"Сотрудник"),t("th",{width:"5%",class:"text-center"},"Статус")],-1)),et=["onClick"],st={class:"text-center"},ot={key:0,class:"spinner-border spinner-grow-sm text-danger",role:"status",title:"Проверка"},nt={key:1,class:"text-success fs-5",title:"Окончено"},at=r(()=>t("i",{class:"bi bi-emoji-smile"},null,-1)),it=[at],lt={key:2,class:"fs-6 taxt-danger"},rt={key:3,class:"mb-4"},ct={class:"pagination justify-content-center"},dt={class:"page-item"},pt=["disabled"],ut=r(()=>t("i",{class:"bi bi-chevron-double-left"},null,-1)),_t={class:"page-item"},mt=["disabled"],ht=r(()=>t("i",{class:"bi bi-chevron-double-right"},null,-1)),bt=B({__name:"persons",setup(c){const f=R(),v=q(),g=H(),o=z(),y=G();I(async()=>{f.alertMessage.value.show=!1,await o.getCandidates()});const u=A(()=>{o.getCandidates()},500);function k(_){P(`/profile/${_}`)}return(_,n)=>{const x=$,w=D,C=j,S=F;return a(),m(S,null,{default:d(()=>[h(x,{"page-header":"Кандидаты"}),s(y).user.value.role==s(g).classes.value.roles.user?(a(),i("div",K,[t("div",O,[Q,h(w,{accept:".json",onSubmit:n[0]||(n[0]=e=>s(v).submitFile(e,"persons","0"))})])])):b("",!0),t("div",W,[t("form",X,[M(t("input",{onInput:n[1]||(n[1]=L((...e)=>s(u)&&s(u)(...e),["prevent"])),class:"form-control",name:"search",id:"search",type:"text",placeholder:"поиск по фамилии, имени, отчеству, дате рождения, инн","onUpdate:modelValue":n[2]||(n[2]=e=>s(o).persons.value.search=e)},null,544),[[V,s(o).persons.value.search]])])]),s(o).persons.value.candidates.length?(a(),m(C,{key:1,"tbl-class":"table align-middle table-hover"},{caption:d(()=>[p(l(`Обновлено: ${s(o).persons.value.updated}`)+" ",1),t("a",{class:"btn btn-link fs-5",href:"#",style:{"text-decoration":"none"},title:"Обновить",onClick:n[3]||(n[3]=e=>s(o).getCandidates())},Z)]),thead:d(()=>[tt]),tbody:d(()=>[(a(!0),i(T,null,N(s(o).persons.value.candidates,e=>(a(),i("tr",{key:e.id,height:"50px",onClick:ft=>k(e.id)},[t("td",null,l(e.id),1),t("td",null,l(e.region),1),t("td",null,l(`${e.surname} ${e.firstname} ${e.patronymic?e.patronymic:""}`),1),t("td",null,l(new Date(e.birthday).toLocaleDateString("ru-RU")),1),t("td",null,l(new Date(e.created).toLocaleDateString("ru-RU")),1),t("td",null,l(e.username?e.username.toString().split(" ")[0]:""),1),t("td",st,[e.standing?(a(),i("div",ot)):(a(),i("div",nt,it))])],8,et))),128))]),_:1})):(a(),i("p",lt,"Ничего не найдено")),s(o).persons.value.prev||s(o).persons.value.next?(a(),i("nav",rt,[t("ul",ct,[t("li",dt,[t("button",{disabled:!s(o).persons.value.prev,type:"button",class:"btn btn-link btn-outline-primary",onClick:n[4]||(n[4]=e=>s(o).getCandidates(s(o).persons.value.page-1))},[ut,p(" Назад ")],8,pt)]),t("li",_t,[t("button",{disabled:!s(o).persons.value.next,type:"button",class:"btn btn-link btn-outline-primary",onClick:n[5]||(n[5]=e=>s(o).getCandidates(s(o).persons.value.page+1))},[p(" Вперёд "),ht],8,mt)])])])):b("",!0)]),_:1})}}}),Dt=J(bt,[["__scopeId","data-v-357e0e79"]]);export{Dt as default};
