import{d as M,r as w,w as J,P as Ge,o,c as k,b as a,g as l,f as oe,e,l as R,E as V,A as N,y as ce,m as ze,h as _e,_ as Pe,j as $e,k as Re,Q as We,q as Ae,t as Y,s as q,R as lt,v as st,x as it,F as L,G,z as h,C as ye,B as T,D as E,S as Be,N as Le,U as Q,V as X,i as Ke,u as de,n as rt,H as le,T as Z,W as ut,X as Ve,Y as ge,Z as xe,$ as Je,a0 as Ie,a1 as Ee,a2 as Se,a3 as dt,a4 as Qe,a5 as ct,a6 as ve,I as pt,J as mt,a7 as ft,a8 as Ne,a9 as vt,aa as _t}from"./DWkXyvYO.js";import{u as W}from"./DNvdZEfF.js";import{u as Xe,a as se}from"./BU50ieNN.js";import{_ as He}from"./CZjS2EnC.js";import{a as pe,_ as bt}from"./BxRuhaE2.js";import{_ as yt,a as ee,b as te,c as ie,d as Oe}from"./BXUL-ZmB.js";import{_ as fe}from"./BBk3QZbH.js";import{_ as re}from"./Ck1huEKZ.js";import{_ as ue}from"./CW3WTNyl.js";import{_ as gt}from"./DGXi7NbU.js";import{i as Fe,u as he,o as j,t as kt,a as Ce,A as be,s as Ze,l as ht,N as Te,b as K,c as $t,f as et,O as we,T as wt,d as De,e as St,P as ke,g as me,h as tt}from"./8dn-MDE-.js";import{_ as It}from"./DxLYsHw3.js";import{u as Ut}from"./LfyFHyhR.js";import"./b7Pa5xvB.js";import"./C05_pIlN.js";const Dt={wrapper:"w-full flex flex-col",container:"w-full flex flex-col",item:{base:"",size:"text-sm",color:"text-gray-500 dark:text-gray-400",padding:"pt-1.5 pb-3",icon:"ms-auto transform transition-transform duration-200 flex-shrink-0"},transition:{enterActiveClass:"overflow-hidden transition-[height] duration-200 ease-out",leaveActiveClass:"overflow-hidden transition-[height] duration-200 ease-out"},default:{openIcon:"i-heroicons-chevron-down-20-solid",closeIcon:"",class:"mb-1.5 w-full",variant:"soft",truncate:!0}},Vt={wrapper:"relative w-full flex items-center justify-between",container:"flex items-center min-w-0",inner:"min-w-0",base:"group relative w-full flex items-center gap-1.5 px-2.5 py-3.5 rounded-md font-medium text-sm focus:outline-none focus-visible:outline-none dark:focus-visible:outline-none focus-visible:ring-inset focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400 disabled:cursor-not-allowed disabled:opacity-75",before:"before:absolute before:inset-x-0 before:inset-y-2 before:inset-px before:rounded-md hover:before:bg-gray-50 dark:hover:before:bg-gray-800/50",after:"after:absolute after:bottom-0 after:inset-x-2.5 after:block after:h-[2px] after:mt-2",active:"text-gray-900 dark:text-white after:bg-primary-500 dark:after:bg-primary-400 after:rounded-full",inactive:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",label:"truncate relative",icon:{base:"flex-shrink-0 w-5 h-5 relative",active:"text-gray-700 dark:text-gray-200",inactive:"text-gray-400 dark:text-gray-500 group-hover:text-gray-700 dark:group-hover:text-gray-200"},avatar:{base:"flex-shrink-0",size:"2xs"},badge:{base:"flex-shrink-0 ml-auto relative rounded",color:"gray",variant:"solid",size:"xs"}},Et={wrapper:"relative space-y-2",container:"relative w-full",base:"focus:outline-none",list:{base:"relative",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-lg",shadow:"",padding:"p-1",height:"h-10",width:"w-full",marker:{wrapper:"absolute top-[4px] left-[4px] duration-200 ease-out focus:outline-none",base:"w-full h-full",background:"bg-white dark:bg-gray-900",rounded:"rounded-md",shadow:"shadow-sm"},tab:{base:"relative inline-flex items-center justify-center flex-shrink-0 w-full ui-focus-visible:outline-0 ui-focus-visible:ring-2 ui-focus-visible:ring-primary-500 dark:ui-focus-visible:ring-primary-400 ui-not-focus-visible:outline-none focus:outline-none disabled:cursor-not-allowed disabled:opacity-75 transition-colors duration-200 ease-out",background:"",active:"text-gray-900 dark:text-white",inactive:"text-gray-500 dark:text-gray-400",height:"h-8",padding:"px-3",size:"text-sm",font:"font-medium",rounded:"rounded-md",shadow:"",icon:"w-4 h-4 flex-shrink-0 me-2"}}},Ft={class:"flex justify-left"},Ct=["src"],Tt=M({__name:"PhotoCard",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["message"],async setup(n,{emit:$}){let c,S;const t=W(),p=$,i=n,u=w(""),{refresh:y}=([c,S]=J(async()=>Xe("image",async()=>{const v=await $fetch("/api/image/"+i.candId,{responseType:"blob"});u.value=window.URL.createObjectURL(new Blob([v]))})),c=await c,S(),c),{open:r,reset:m,onCancel:_,onChange:s}=Ge({accept:"image/*",multiple:!1});return _(()=>{m()}),s(async v=>{if(!v)return;const g=new FormData,f=v[0];g.append("file",f);const{message:C}=await t("/api/file/image/"+i.candId,{method:"POST",body:g});await y(),p("message",C),m()}),(v,g)=>{const f=R;return o(),k("div",Ft,[a(f,{variant:"link",disabled:!n.editable,onClick:e(r)},{leading:l(()=>[oe("img",{src:e(u),width:"160",height:"160",title:"Загрузить фото"},null,8,Ct)]),_:1},8,["disabled","onClick"])])}}}),zt={class:"flex grid grid-cols-6 gap-3 mb-3"},ne=M({__name:"LabelSlot",props:{label:{type:String,default:""},labelClass:{type:String,default:"col-span-1"},inputClass:{type:String,default:"col-span-5 break-words"}},setup(n){const $=n;return(c,S)=>(o(),k("div",zt,[oe("div",{class:N($.labelClass)},V($.label),3),oe("div",{class:N($.inputClass)},[ce(c.$slots,"default")],2)]))}}),xt=ze(_e.ui.strategy,_e.ui.horizontalNavigation,Vt),Ot=M({components:{UIcon:$e,UAvatar:Re,UBadge:He,ULink:We},inheritAttrs:!1,props:{links:{type:Array,default:()=>[]},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(n){const{ui:$,attrs:c}=Ae("horizontalNavigation",Y(n,"ui"),xt,Y(n,"class")),S=q(()=>Array.isArray(n.links[0])?n.links:[n.links]);return{ui:$,attrs:c,sections:S,getULinkProps:lt,twMerge:st,twJoin:it}}}),Mt={key:0,class:"sr-only"};function Bt(n,$,c,S,t,p){const i=Re,u=$e,y=He,r=We;return o(),k("nav",ye({class:n.ui.wrapper},n.attrs),[(o(!0),k(L,null,G(n.sections,(m,_)=>(o(),k("ul",{key:`section${_}`,class:N(n.ui.container)},[(o(!0),k(L,null,G(m,(s,v)=>(o(),k("li",{key:`section${_}-${v}`,class:N(n.ui.inner)},[a(r,ye({ref_for:!0},n.getULinkProps(s),{class:[n.ui.base,n.ui.before,n.ui.after],"active-class":n.ui.active,"inactive-class":n.ui.inactive,onClick:s.click,onKeyup:$[0]||($[0]=Be(g=>g.target.blur(),["enter"]))}),{default:l(({isActive:g})=>[ce(n.$slots,"avatar",{link:s,isActive:g},()=>[s.avatar?(o(),h(i,ye({key:0,ref_for:!0},{size:n.ui.avatar.size,...s.avatar},{class:[n.ui.avatar.base]}),null,16,["class"])):T("",!0)]),ce(n.$slots,"icon",{link:s,isActive:g},()=>[s.icon?(o(),h(u,{key:0,name:s.icon,class:N(n.twMerge(n.twJoin(n.ui.icon.base,g?n.ui.icon.active:n.ui.icon.inactive),s.iconClass))},null,8,["name","class"])):T("",!0)]),ce(n.$slots,"default",{link:s,isActive:g},()=>[s.label?(o(),k("span",{key:0,class:N(n.twMerge(n.ui.label,s.labelClass))},[g?(o(),k("span",Mt," Current page: ")):T("",!0),E(" "+V(s.label),1)],2)):T("",!0)]),ce(n.$slots,"badge",{link:s,isActive:g},()=>[s.badge?(o(),h(y,ye({key:0,ref_for:!0},{size:n.ui.badge.size,color:n.ui.badge.color,variant:n.ui.badge.variant,...typeof s.badge=="string"||typeof s.badge=="number"?{label:s.badge}:s.badge},{class:n.ui.badge.base}),null,16,["class"])):T("",!0)])]),_:2},1040,["class","active-class","inactive-class","onClick"])],2))),128))],2))),128))],16)}const Pt=Pe(Ot,[["render",Bt]]),ae=M({__name:"NaviHorizont",props:{navlen:{type:Number,default:4},candId:{type:String,default:""},inputId:{type:String,default:""},item:{type:String,default:""}},emits:["delete","update","upgrade"],setup(n,{emit:$}){const c=Le(),S=W(),t=$,p=n,{open:i,reset:u,onCancel:y,onChange:r}=Ge();r(async _=>{if(!_)return;const s=new FormData;if(_){for(const v of _)s.append("file",v);await S(`/api/file/${p.item}/${p.candId}`,{method:"POST",body:s}),c.add({icon:"i-heroicons-check-circle",title:"Информация",description:"Файлы успешно загружены",color:"green"})}u()}),y(()=>{u()});const m=[{label:"Изменить",icon:"i-heroicons-pencil-square",click:()=>t("update")},{label:"Удалить",icon:"i-heroicons-trash",click:()=>t("delete")},{label:"Обновить",icon:"i-heroicons-arrow-path",click:()=>t("upgrade")},{label:"Загрузить",icon:"i-heroicons-cloud-arrow-up",slot:"upload",click:()=>i()}];return(_,s)=>{const v=Pt;return o(),h(v,{links:m.slice(0,p.navlen)},null,8,["links"])}}}),At={key:0},Lt={key:1},Ht={key:1},qt=M({__name:"ResumeDiv",props:{editable:{type:Boolean,default:!1},candId:{type:String,default:""},person:{type:Object,default:{}}},emits:["update","message"],setup(n,{emit:$}){Q(["FormsResumeForm","ElementsSkeletonDiv"]);const c=$,S=Le(),t=W(),p=n,i=w(!1),u=w(""),y=w(!1),r=w(!1);async function m(){if(!confirm("Вы действительно хотите изменить регион?"))return;const{message:f}=await t(`/api/region/${p.candId}`,{params:{region:u.value}});f=="success"?(c("update"),S.add({icon:"i-heroicons-check-circle",title:"Информация",description:"Изменение региона успешно",color:"green"})):S.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Регион не был изменен",color:"red"})}async function _(){r.value=!0,await t("/api/folder/"+p.candId),r.value=!1}async function s(f){y.value=!0,i.value=!1;const{message:C}=await t(`/api/items/persons/${p.candId}`,{method:"POST",body:f});y.value=!1,c("update"),c("message",C)}async function v(){y.value=!0;const{message:f}=await t(`/api/items/persons/${p.candId}`,{method:"DELETE"});return y.value=!1,c("message",f),rt("/persons")}async function g(){i.value=!1,c("update")}return(f,C)=>{const I=yt,U=ee,D=fe,b=ne,B=R,z=ae,x=te;return o(),h(x,null,X({default:l(()=>[e(i)?(o(),k("div",At,[a(I,{resume:p.person,onCancel:g,onUpdate:s},null,8,["resume"])])):(o(),k("div",Lt,[e(y)?(o(),h(U,{key:0,rows:14})):(o(),k("div",Ht,[a(b,{label:"Регион"},{default:l(()=>[a(D,{modelValue:e(u),"onUpdate:modelValue":C[0]||(C[0]=O=>Ke(u)?u.value=O:null),style:{width:"20%"},options:["Главный офис","РЦ Юг","РЦ Запад","РЦ Урал","РЦ Восток"],disabled:!p.editable,placeholder:p.person.region,onChange:m},null,8,["modelValue","disabled","placeholder"])]),_:1}),a(b,{label:"Фамилия"},{default:l(()=>[E(V(p.person.surname),1)]),_:1}),a(b,{label:"Имя"},{default:l(()=>[E(V(p.person.firstname),1)]),_:1}),a(b,{label:"Отчество"},{default:l(()=>[E(V(p.person.patronymic),1)]),_:1}),a(b,{label:"Дата рождения"},{default:l(()=>[E(V(e(de)(p.person.birthday,"DD.MM.YYYY")),1)]),_:1}),a(b,{label:"Место рождения"},{default:l(()=>[E(V(p.person.birthplace),1)]),_:1}),a(b,{label:"Гражданство"},{default:l(()=>[E(V(p.person.citizenship),1)]),_:1}),p.person.dual?(o(),h(b,{key:0,label:"Двойное гражданство"},{default:l(()=>[E(V(p.person.dual),1)]),_:1})):T("",!0),a(b,{label:"СНИЛС"},{default:l(()=>[E(V(p.person.snils),1)]),_:1}),a(b,{label:"ИНН"},{default:l(()=>[E(V(p.person.inn),1)]),_:1}),a(b,{label:"Семейное положение"},{default:l(()=>[E(V(p.person.marital),1)]),_:1}),a(b,{label:"Дата записи"},{default:l(()=>[E(V(e(de)(p.person.created,"DD.MM.YYYY HH:mm")),1)]),_:1}),a(b,{label:"Пользователь"},{default:l(()=>[E(V(p.person.username?p.person.username:""),1)]),_:1}),p.person.addition?(o(),h(b,{key:1,label:"Дополнительная информация"},{default:l(()=>[E(V(p.person.addition),1)]),_:1})):T("",!0),a(b,{label:"Материалы"},{default:l(()=>[a(B,{loading:e(r),label:"Открыть",variant:"link",onClick:_},null,8,["loading"])]),_:1})]))]))]),_:2},[p.editable&&!e(i)?{name:"footer",fn:l(()=>[a(z,{"cand-id":p.candId,item:"persons",onDelete:v,onUpdate:C[1]||(C[1]=O=>i.value=!0),onUpgrade:C[2]||(C[2]=O=>c("update"))},null,8,["cand-id"])]),key:"0"}:void 0]),1024)}}}),jt=M({__name:"StaffForm",props:{staff:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(n,{emit:$}){const c=$,t=Y(n.staff);function p(){c("update",t.value),u()}function i(){c("cancel"),u()}function u(){Object.assign(t.value,{position:"",department:""})}return(y,r)=>{const m=pe,_=re,s=ie,v=ue;return o(),h(v,{state:e(t),onSubmit:le(p,["prevent"])},{default:l(()=>[a(_,{class:"mb-3",label:"Должность"},{default:l(()=>[a(m,{modelValue:e(t).position,"onUpdate:modelValue":r[0]||(r[0]=g=>e(t).position=g),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Должность"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Подразделение"},{default:l(()=>[a(m,{modelValue:e(t).department,"onUpdate:modelValue":r[1]||(r[1]=g=>e(t).department=g),modelModifiers:{trim:!0,lazy:!0},placeholder:"Подразделение"},null,8,["modelValue"])]),_:1}),a(s,{onCancel:i})]),_:1},8,["state"])}}}),Yt={key:0,class:"py-3"},Nt={key:1},Gt={key:1},Rt={key:2,class:"p-3"},Wt={key:1,class:"text-primary"},Kt=M({__name:"StaffDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["message"],async setup(n,{emit:$}){let c,S;Q(["FormsStaffForm","ElementsSkeletonDiv"]);const t=$,p=W(),i=n,u=w(!1),y=w(!1),r=w(!1),m=w(""),_=w({}),s=w([]),{refresh:v,status:g}=([c,S]=J(async()=>se("staffs",async()=>{s.value=await p("/api/items/staffs/"+i.candId)})),c=await c,S(),c);async function f(D){U(),y.value=!0;const{message:b}=await p(`/api/items/staffs/${i.candId}`,{method:"POST",body:D});y.value=!1,await v(),t("message",b)}async function C(D){if(U(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:b}=await p(`/api/items/staffs/${D}`,{method:"DELETE"});await v(),t("message",b)}function I(){U(),v()}function U(){u.value=!1,r.value=!1,m.value=""}return(D,b)=>{const B=R,z=jt,x=te,O=ee,F=ne,H=ae;return o(),k(L,null,[i.editable?(o(),h(B,{key:0,label:e(u)?"Скрыть форму":"Добавить запись",variant:"link",onClick:b[0]||(b[0]=d=>u.value=!e(u))},null,8,["label"])):T("",!0),a(Z,{name:"slide-fade"},{default:l(()=>[e(u)?(o(),k("div",Yt,[a(x,null,{default:l(()=>[a(z,{"cand-id":i.candId,onCancel:I,onUpdate:f},null,8,["cand-id"])]),_:1})])):T("",!0)]),_:1}),e(s)&&e(s).length?(o(),k("div",Nt,[(o(!0),k(L,null,G(e(s),(d,A)=>(o(),k("div",{key:A,class:"p-1"},[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:2})):(o(),h(x,{key:1},X({default:l(()=>[e(r)&&e(m)==d.id.toString()?(o(),h(z,{key:0,"cand-id":i.candId,staff:e(_),onCancel:I,onUpdate:f},null,8,["cand-id","staff"])):(o(),k("div",Gt,[a(F,{label:"Должность"},{default:l(()=>[E(V(d.position),1)]),_:2},1024),a(F,{label:"Департамент"},{default:l(()=>[E(V(d.department),1)]),_:2},1024)]))]),_:2},[i.editable&&(!e(r)||e(m)!=d.id.toString())?{name:"footer",fn:l(()=>[a(H,{navlen:3,onDelete:P=>C(d.id),onUpdate:P=>{_.value=d,m.value=d.id.toString(),r.value=!0},onUpgrade:b[1]||(b[1]=P=>e(v)())},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(o(),k("div",Rt,[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:2})):(o(),k("p",Wt,"Данные о должностях отсутствуют"))]))],64)}}}),Jt=M({__name:"EducationForm",props:{education:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(n,{emit:$}){const c=$,t=Y(n.education);function p(){c("update",t.value),u()}function i(){c("cancel"),u()}function u(){Object.assign(t.value,{view:"",institution:"",finished:"",specialty:""})}return(y,r)=>{const m=fe,_=re,s=pe,v=ie,g=ue;return o(),h(g,{state:e(t),onSubmit:le(p,["prevent"])},{default:l(()=>[a(_,{class:"mb-3",label:"Вид образования"},{default:l(()=>[a(m,{modelValue:e(t).view,"onUpdate:modelValue":r[0]||(r[0]=f=>e(t).view=f),required:"",options:["Основное общее","Среднее общее","Среднее профессиональное","Высшее","Неоконченное высшее образование","Другое образование"]},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Название учебного заведения"},{default:l(()=>[a(s,{modelValue:e(t).institution,"onUpdate:modelValue":r[1]||(r[1]=f=>e(t).institution=f),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Название учебного заведения"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Год окончания"},{default:l(()=>[a(s,{modelValue:e(t).finished,"onUpdate:modelValue":r[2]||(r[2]=f=>e(t).finished=f),modelModifiers:{trim:!0,lazy:!0},placeholder:"Год окончания"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Специальность"},{default:l(()=>[a(s,{modelValue:e(t).specialty,"onUpdate:modelValue":r[3]||(r[3]=f=>e(t).specialty=f),modelModifiers:{trim:!0,lazy:!0},placeholder:"Специальность"},null,8,["modelValue"])]),_:1}),a(v,{onCancel:i})]),_:1},8,["state"])}}}),Qt={key:0,class:"py-3"},Xt={key:1},Zt={key:1},en={key:2,class:"p-3"},tn={key:1,class:"text-primary"},nn=M({__name:"EducateDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["message"],async setup(n,{emit:$}){let c,S;Q(["FormsEducationForm","ElementsSkeletonDiv"]);const t=$,p=W(),i=n,u=w(!1),y=w(!1),r=w(""),m=w(!1),_=w({}),s=w([]),{refresh:v,status:g}=([c,S]=J(async()=>se("educations",async()=>{s.value=await p("/api/items/educations/"+i.candId)})),c=await c,S(),c);async function f(D){U(),y.value=!0;const{message:b}=await p(`/api/items/educations/${i.candId}`,{method:"POST",body:D});y.value=!1,await v(),t("message",b)}async function C(D){if(U(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:b}=await p(`/api/items/educations/${D}`,{method:"DELETE"});await v(),t("message",b)}function I(){U(),v()}function U(){m.value=!1,r.value="",u.value=!1}return(D,b)=>{const B=R,z=Jt,x=te,O=ee,F=ne,H=ae;return o(),k(L,null,[i.editable?(o(),h(B,{key:0,label:e(u)?"Скрыть форму":"Добавить запись",variant:"link",onClick:b[0]||(b[0]=d=>u.value=!e(u))},null,8,["label"])):T("",!0),a(Z,{name:"slide-fade"},{default:l(()=>[e(u)?(o(),k("div",Qt,[a(x,null,{default:l(()=>[a(z,{"cand-id":i.candId,onCancel:I,onUpdate:f},null,8,["cand-id"])]),_:1})])):T("",!0)]),_:1}),e(s)&&e(s).length?(o(),k("div",Xt,[(o(!0),k(L,null,G(e(s),(d,A)=>(o(),k("div",{key:A,class:"p-1"},[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:8})):(o(),h(x,{key:1},X({default:l(()=>[e(m)&&e(r)==d.id.toString()?(o(),h(z,{key:0,"cand-id":i.candId,education:e(_),onCancel:I,onUpdate:f},null,8,["cand-id","education"])):(o(),k("div",Zt,[a(F,{label:"Уровень образования"},{default:l(()=>[E(V(d.view),1)]),_:2},1024),a(F,{label:"Название учебного заведения"},{default:l(()=>[E(V(d.institution),1)]),_:2},1024),a(F,{label:"Год окончания"},{default:l(()=>[E(V(d.finished),1)]),_:2},1024),a(F,{label:"Специальность"},{default:l(()=>[E(V(d.specialty),1)]),_:2},1024)]))]),_:2},[i.editable&&(!e(m)||e(r)!=d.id.toString())?{name:"footer",fn:l(()=>[a(H,{navlen:3,onDelete:P=>C(d.id),onUpdate:P=>{_.value=d,r.value=d.id.toString(),m.value=!0},onUpgrade:b[1]||(b[1]=P=>e(v)())},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(o(),k("div",en,[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:8})):(o(),k("p",tn,"Данные отсутствуют"))]))],64)}}}),an=M({__name:"WorkplaceForm",props:{work:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(n,{emit:$}){const c=$,t=Y(n.work);t.value.starts=t.value.starts?de(t.value.starts,"YYYY-MM-DD").value:"",t.value.finished=t.value.finished?de(t.value.finished,"YYYY-MM-DD").value:"";function p(){c("update",t.value),u()}function i(){c("cancel"),u()}function u(){Object.assign(t.value,{now_work:!1,starts:"",finished:"",workplace:"",position:"",addresses:"",reason:""})}return(y,r)=>{const m=gt,_=re,s=pe,v=ie,g=ue;return o(),h(g,{state:e(t),onSubmit:le(p,["prevent"])},{default:l(()=>[a(_,{class:"mb-3",label:"Текущая работа"},{default:l(()=>[a(m,{modelValue:e(t).now_work,"onUpdate:modelValue":r[0]||(r[0]=f=>e(t).now_work=f)},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Начало работы"},{default:l(()=>[a(s,{modelValue:e(t).starts,"onUpdate:modelValue":r[1]||(r[1]=f=>e(t).starts=f),required:"",placeholder:"Начало работы",type:"date"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Окончание работы"},{default:l(()=>[a(s,{modelValue:e(t).finished,"onUpdate:modelValue":r[2]||(r[2]=f=>e(t).finished=f),required:"",placeholder:"Окончание работы",type:"date"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Место работы"},{default:l(()=>[a(s,{modelValue:e(t).workplace,"onUpdate:modelValue":r[3]||(r[3]=f=>e(t).workplace=f),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Место работы"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Должность"},{default:l(()=>[a(s,{modelValue:e(t).position,"onUpdate:modelValue":r[4]||(r[4]=f=>e(t).position=f),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Должность"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Адрес организации"},{default:l(()=>[a(s,{modelValue:e(t).addresses,"onUpdate:modelValue":r[5]||(r[5]=f=>e(t).addresses=f),modelModifiers:{trim:!0,lazy:!0},placeholder:"Адрес организации"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Причина увольнения"},{default:l(()=>[a(s,{modelValue:e(t).reason,"onUpdate:modelValue":r[6]||(r[6]=f=>e(t).reason=f),modelModifiers:{trim:!0,lazy:!0},placeholder:"Причина увольнения"},null,8,["modelValue"])]),_:1}),a(v,{onCancel:i})]),_:1},8,["state"])}}}),on={key:0,class:"py-3"},ln={key:1},sn={key:1},rn={key:2,class:"p-3"},un={key:1,class:"text-primary"},dn=M({__name:"WorkDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["message"],async setup(n,{emit:$}){let c,S;Q(["FormsWorkForm","ElementsSkeletonDiv"]);const t=$,p=W(),i=n,u=w(!1),y=w(!1),r=w(!1),m=w(""),_=w({}),s=w([]),{refresh:v,status:g}=([c,S]=J(async()=>se("workplaces",async()=>{s.value=await p("/api/items/workplaces/"+i.candId)})),c=await c,S(),c);async function f(D){U(),y.value=!0;const{message:b}=await p(`/api/items/workplaces/${i.candId}`,{method:"POST",body:D});y.value=!1,await v(),t("message",b)}async function C(D){if(U(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:b}=await p(`/api/items/workplaces/${D}`,{method:"DELETE"});await v(),t("message",b)}function I(){U(),v()}function U(){r.value=!1,m.value="",u.value=!1}return(D,b)=>{const B=R,z=an,x=te,O=ee,F=ne,H=ae;return o(),k(L,null,[i.editable?(o(),h(B,{key:0,label:e(u)?"Скрыть форму":"Добавить запись",variant:"link",onClick:b[0]||(b[0]=d=>u.value=!e(u))},null,8,["label"])):T("",!0),a(Z,{name:"slide-fade"},{default:l(()=>[e(u)?(o(),k("div",on,[a(x,null,{default:l(()=>[a(z,{"cand-id":i.candId,onCancel:I,onUpdate:f},null,8,["cand-id"])]),_:1})])):T("",!0)]),_:1}),e(s)&&e(s).length?(o(),k("div",ln,[(o(!0),k(L,null,G(e(s),(d,A)=>(o(),k("div",{key:A,class:"p-1"},[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:8})):(o(),h(x,{key:1},X({default:l(()=>[e(r)&&e(m)==d.id.toString()?(o(),h(z,{key:0,"cand-id":i.candId,work:e(_),onCancel:I,onUpdate:f},null,8,["cand-id","work"])):(o(),k("div",sn,[d.now_work?(o(),h(F,{key:0,label:"Текущая работа"},{default:l(()=>[E(V(d.now_work?"Да":"Нет"),1)]),_:2},1024)):T("",!0),a(F,{label:"Начало работы"},{default:l(()=>[E(V(e(de)(d.starts,"DD.MM.YYYY")),1)]),_:2},1024),d.now_work?T("",!0):(o(),h(F,{key:1,label:"Окончание работы"},{default:l(()=>[E(V(e(de)(d.finished,"DD.MM.YYYY")),1)]),_:2},1024)),a(F,{label:"Место работы"},{default:l(()=>[E(V(d.workplace),1)]),_:2},1024),a(F,{label:"Адрес"},{default:l(()=>[E(V(d.addresses),1)]),_:2},1024),a(F,{label:"Должность"},{default:l(()=>[E(V(d.position),1)]),_:2},1024),d.reason?(o(),h(F,{key:2,label:"Причина увольнения"},{default:l(()=>[E(V(d.reason),1)]),_:2},1024)):T("",!0)]))]),_:2},[i.editable&&(!e(r)||e(m)!=d.id.toString())?{name:"footer",fn:l(()=>[a(H,{navlen:3,onDelete:P=>C(d.id),onUpdate:P=>{_.value=d,m.value=d.id.toString(),r.value=!0},onUpgrade:b[1]||(b[1]=P=>e(v)())},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(o(),k("div",rn,[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:8})):(o(),k("p",un,"Данные о работе отсутствуют"))]))],64)}}}),cn=M({__name:"DocumentForm",props:{docs:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(n,{emit:$}){const c=$,t=Y(n.docs);t.value.issue=t.value.issue?de(t.value.issue,"YYYY-MM-DD").value:"";function p(){c("update",t.value),u()}function i(){c("cancel"),u()}function u(){Object.assign(t.value,{view:"",series:"",digits:"",agency:"",issue:""})}return(y,r)=>{const m=fe,_=re,s=pe,v=ie,g=ue;return o(),h(g,{state:e(t),onSubmit:le(p,["prevent"])},{default:l(()=>[a(_,{class:"mb-3",label:"Вид документа"},{default:l(()=>[a(m,{modelValue:e(t).view,"onUpdate:modelValue":r[0]||(r[0]=f=>e(t).view=f),required:"",options:["Паспорт","Иностарнный паспорт","Другое"]},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Серия документа"},{default:l(()=>[a(s,{modelValue:e(t).series,"onUpdate:modelValue":r[1]||(r[1]=f=>e(t).series=f),modelModifiers:{trim:!0,lazy:!0},placeholder:"Серия документа"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Номер документа"},{default:l(()=>[a(s,{modelValue:e(t).digits,"onUpdate:modelValue":r[2]||(r[2]=f=>e(t).digits=f),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Номер документа"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Кем выдан"},{default:l(()=>[a(s,{modelValue:e(t).agency,"onUpdate:modelValue":r[3]||(r[3]=f=>e(t).agency=f),modelModifiers:{trim:!0},placeholder:"Кем выдан"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Дата выдачи"},{default:l(()=>[a(s,{modelValue:e(t).issue,"onUpdate:modelValue":r[4]||(r[4]=f=>e(t).issue=f),modelModifiers:{trim:!0,lazy:!0},required:"",type:"date"},null,8,["modelValue"])]),_:1}),a(v,{onCancel:i})]),_:1},8,["state"])}}}),pn={key:0,class:"py-3"},mn={key:1},fn={key:1},vn={key:2,class:"p-3"},_n={key:1,class:"text-primary"},bn=M({__name:"DocumDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["message"],async setup(n,{emit:$}){let c,S;Q(["FormsDocumentForm","ElementsSkeletonDiv"]);const t=$,p=W(),i=n,u=w(!1),y=w(!1),r=w(""),m=w(!1),_=w({}),s=w([]),{refresh:v,status:g}=([c,S]=J(async()=>se("documents",async()=>{s.value=await p("/api/items/documents/"+i.candId)})),c=await c,S(),c);async function f(D){U(),y.value=!0;const{message:b}=await p(`/api/items/documents/${i.candId}`,{method:"POST",body:D});y.value=!1,await v(),t("message",b)}async function C(D){if(U(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:b}=await p(`/api/items/documents/${D}`,{method:"DELETE"});await v(),t("message",b)}function I(){U(),v()}function U(){m.value=!1,r.value="",u.value=!1}return(D,b)=>{const B=R,z=cn,x=te,O=ee,F=ne,H=ae;return o(),k(L,null,[i.editable?(o(),h(B,{key:0,label:e(u)?"Скрыть форму":"Добавить запись",variant:"link",onClick:b[0]||(b[0]=d=>u.value=!e(u))},null,8,["label"])):T("",!0),a(Z,{name:"slide-fade"},{default:l(()=>[e(u)?(o(),k("div",pn,[a(x,null,{default:l(()=>[a(z,{"cand-id":i.candId,onCancel:I,onUpdate:f},null,8,["cand-id"])]),_:1})])):T("",!0)]),_:1}),e(s)&&e(s).length?(o(),k("div",mn,[(o(!0),k(L,null,G(e(s),(d,A)=>(o(),k("div",{key:A,class:"p-1"},[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:8})):(o(),h(x,{key:1},X({default:l(()=>[e(m)&&e(r)==d.id.toString()?(o(),h(z,{key:0,"cand-id":i.candId,docs:e(_),onCancel:I,onUpdate:f},null,8,["cand-id","docs"])):(o(),k("div",fn,[a(F,{label:"Вид документа"},{default:l(()=>[E(V(d.view),1)]),_:2},1024),a(F,{label:"Номер документа"},{default:l(()=>[E(V(d.digits),1)]),_:2},1024),a(F,{label:"Серия документа"},{default:l(()=>[E(V(d.series),1)]),_:2},1024),a(F,{label:"Дата выдачи"},{default:l(()=>[E(V(e(de)(d.issue,"DD.MM.YYYY")),1)]),_:2},1024),a(F,{label:"Кем выдан"},{default:l(()=>[E(V(d.agency),1)]),_:2},1024)]))]),_:2},[i.editable&&(!e(m)||e(r)!=d.id.toString())?{name:"footer",fn:l(()=>[a(H,{navlen:3,onDelete:P=>C(d.id),onUpdate:P=>{_.value=d,r.value=d.id.toString(),m.value=!0},onUpgrade:b[1]||(b[1]=P=>e(v)())},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(o(),k("div",vn,[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:8})):(o(),k("p",_n,"Данные отсутствуют"))]))],64)}}}),yn=M({__name:"AddressForm",props:{addrs:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(n,{emit:$}){const c=$,t=Y(n.addrs);function p(){c("update",t.value),u()}function i(){c("cancel"),u()}function u(){Object.assign(t.value,{view:"",addresses:""})}return(y,r)=>{const m=fe,_=re,s=pe,v=ie,g=ue;return o(),h(g,{state:e(t),onSubmit:le(p,["prevent"])},{default:l(()=>[a(_,{class:"mb-3",label:"Вид адреса"},{default:l(()=>[a(m,{modelValue:e(t).view,"onUpdate:modelValue":r[0]||(r[0]=f=>e(t).view=f),modelModifiers:{trim:!0,lazy:!0},required:"",options:["Адрес регистрации","Адрес проживания","Другое"]},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Адрес"},{default:l(()=>[a(s,{modelValue:e(t).addresses,"onUpdate:modelValue":r[1]||(r[1]=f=>e(t).addresses=f),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Адрес"},null,8,["modelValue"])]),_:1}),a(v,{onCancel:i})]),_:1},8,["state"])}}}),gn={key:0,class:"p-1"},kn={key:1},hn={key:1},$n={key:2,class:"p-3"},wn={key:1,class:"text-primary"},Sn=M({__name:"AddressDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["message"],async setup(n,{emit:$}){let c,S;Q(["FormsAddressForm","ElementsSkeletonDiv"]);const t=$,p=W(),i=n,u=w(!1),y=w(!1),r=w(!1),m=w(""),_=w({}),s=w([]),{refresh:v,status:g}=([c,S]=J(async()=>se("addresses",async()=>{s.value=await p("/api/items/addresses/"+i.candId)})),c=await c,S(),c);async function f(D){U(),y.value=!0;const{message:b}=await p(`/api/items/addresses/${i.candId}`,{method:"POST",body:D});y.value=!1,await v(),t("message",b)}async function C(D){if(U(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:b}=await p(`/api/items/addresses/${D}`,{method:"DELETE"});await v(),t("message",b)}function I(){U(),v()}function U(){r.value=!1,u.value=!1,m.value=""}return(D,b)=>{const B=R,z=yn,x=te,O=ee,F=ne,H=ae;return o(),k(L,null,[i.editable?(o(),h(B,{key:0,label:e(u)?"Скрыть форму":"Добавить запись",variant:"link",onClick:b[0]||(b[0]=d=>u.value=!e(u))},null,8,["label"])):T("",!0),a(Z,{name:"slide-fade"},{default:l(()=>[e(u)?(o(),k("div",gn,[a(x,null,{default:l(()=>[a(z,{"cand-id":i.candId,onCancel:I,onUpdate:f},null,8,["cand-id"])]),_:1})])):T("",!0)]),_:1}),e(s)&&e(s).length?(o(),k("div",kn,[(o(!0),k(L,null,G(e(s),(d,A)=>(o(),k("div",{key:A,class:"py-3"},[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:8})):(o(),h(x,{key:1},X({default:l(()=>[e(r)&&e(m)==d.id.toString()?(o(),h(z,{key:0,"cand-id":i.candId,addrs:e(_),onCancel:I,onUpdate:f},null,8,["cand-id","addrs"])):(o(),k("div",hn,[a(F,{label:"Тип"},{default:l(()=>[E(V(d.view),1)]),_:2},1024),a(F,{label:"Адрес"},{default:l(()=>[E(V(d.addresses),1)]),_:2},1024)]))]),_:2},[i.editable&&(!e(r)||e(m)!=d.id.toString())?{name:"footer",fn:l(()=>[a(H,{navlen:3,onDelete:P=>C(d.id),onUpdate:P=>{_.value=d,m.value=d.id.toString(),r.value=!0},onUpgrade:b[1]||(b[1]=P=>e(v)())},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(o(),k("div",$n,[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:8})):(o(),k("p",wn,"Адреса отсутствуют"))]))],64)}}}),In=M({__name:"ContactForm",props:{contact:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(n,{emit:$}){const c=$,t=Y(n.contact);function p(){c("update",t.value),u()}function i(){c("cancel"),u()}function u(){Object.assign(t.value,{view:"",contact:""})}return(y,r)=>{const m=fe,_=re,s=pe,v=ie,g=ue;return o(),h(g,{state:e(t),onSubmit:le(p,["prevent"])},{default:l(()=>[a(_,{class:"mb-3",label:"Вид контакта"},{default:l(()=>[a(m,{modelValue:e(t).view,"onUpdate:modelValue":r[0]||(r[0]=f=>e(t).view=f),modelModifiers:{trim:!0,lazy:!0},required:"",options:["Телефон","Электронная почта","Другое"]},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Контакт"},{default:l(()=>[a(s,{modelValue:e(t).contact,"onUpdate:modelValue":r[1]||(r[1]=f=>e(t).contact=f),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Контакт"},null,8,["modelValue"])]),_:1}),a(v,{onCancel:i})]),_:1},8,["state"])}}}),Un={key:0,class:"py-3"},Dn={key:1},Vn={key:1},En={key:2,class:"p-3"},Fn={key:1,class:"text-primary"},Cn=M({__name:"ContactDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["message"],async setup(n,{emit:$}){let c,S;Q(["FormsContactForm","ElementsSkeletonDiv"]);const t=$,p=W(),i=n,u=w(!1),y=w(!1),r=w(""),m=w(!1),_=w({}),s=w([]),{refresh:v,status:g}=([c,S]=J(async()=>se("contacts",async()=>{s.value=await p("/api/items/contacts/"+i.candId)})),c=await c,S(),c);async function f(D){U(),y.value=!0;const{message:b}=await p(`/api/items/contacts/${i.candId}`,{method:"POST",body:D});y.value=!1,await v(),t("message",b)}async function C(D){if(U(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:b}=await p(`/api/items/contacts/${D}`,{method:"DELETE"});await v(),t("message",b)}function I(){U(),v()}function U(){m.value=!1,r.value="",u.value=!1}return(D,b)=>{const B=R,z=In,x=te,O=ee,F=ne,H=ae;return o(),k(L,null,[i.editable?(o(),h(B,{key:0,label:e(u)?"Скрыть форму":"Добавить запись",variant:"link",onClick:b[0]||(b[0]=d=>u.value=!e(u))},null,8,["label"])):T("",!0),a(Z,{name:"slide-fade"},{default:l(()=>[e(u)?(o(),k("div",Un,[a(x,null,{default:l(()=>[a(z,{"cand-id":i.candId,onCancel:I,onUpdate:f},null,8,["cand-id"])]),_:1})])):T("",!0)]),_:1}),e(s)&&e(s).length?(o(),k("div",Dn,[(o(!0),k(L,null,G(e(s),(d,A)=>(o(),k("div",{key:A,class:"p-1"},[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:8})):(o(),h(x,{key:1},X({default:l(()=>[e(m)&&e(r)==d.id.toString()?(o(),h(z,{key:0,"cand-id":i.candId,contact:e(_),onCancel:I,onUpdate:f},null,8,["cand-id","contact"])):(o(),k("div",Vn,[a(F,{label:"Вид"},{default:l(()=>[E(V(d.view),1)]),_:2},1024),a(F,{label:"Контакт"},{default:l(()=>[E(V(d.contact),1)]),_:2},1024)]))]),_:2},[i.editable&&(!e(m)||e(r)!=d.id.toString())?{name:"footer",fn:l(()=>[a(H,{navlen:3,onDelete:P=>C(d.id),onUpdate:P=>{_.value=d,r.value=d.id.toString(),m.value=!0},onUpgrade:b[1]||(b[1]=P=>e(v)())},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(o(),k("div",En,[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:2})):(o(),k("p",Fn,"Данные отсутствуют"))]))],64)}}}),Tn=M({__name:"AffilationForm",props:{affils:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(n,{emit:$}){const c=$,t=Y(n.affils);function p(){c("update",t.value),u()}function i(){c("cancel"),u()}function u(){Object.assign(t.value,{view:"",organization:"",inn:""})}return(y,r)=>{const m=fe,_=re,s=pe,v=ie,g=ue;return o(),h(g,{state:e(t),onSubmit:le(p,["prevent"])},{default:l(()=>[a(_,{class:"mb-3",label:"Тип участия"},{default:l(()=>[a(m,{modelValue:e(t).view,"onUpdate:modelValue":r[0]||(r[0]=f=>e(t).view=f),modelModifiers:{trim:!0,lazy:!0},required:"",options:["Являлся государственным/муниципальным служащим","Являлся государственным должностным лицом","Связанные лица работают в государственных организациях","Участвует в деятельности коммерческих организаций"]},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Организация"},{default:l(()=>[a(s,{modelValue:e(t).organization,"onUpdate:modelValue":r[1]||(r[1]=f=>e(t).organization=f),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Организация"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"ИНН"},{default:l(()=>[a(s,{modelValue:e(t).inn,"onUpdate:modelValue":r[2]||(r[2]=f=>e(t).inn=f),modelModifiers:{trim:!0,lazy:!0},placeholder:"ИНН"},null,8,["modelValue"])]),_:1}),a(v,{onCancel:i})]),_:1},8,["state"])}}}),zn={key:0,class:"py-3"},xn={key:1},On={key:1},Mn={key:2,class:"p-3"},Bn={key:1,class:"text-primary"},Pn=M({__name:"AffilDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["message"],async setup(n,{emit:$}){let c,S;Q(["FormsAffilationForm","ElementsSkeletonDiv"]);const t=$,p=W(),i=n,u=w(!1),y=w(!1),r=w(!1),m=w(""),_=w({}),s=w([]),{refresh:v,status:g}=([c,S]=J(async()=>se("affilations",async()=>{s.value=await p("/api/items/affilations/"+i.candId)})),c=await c,S(),c);async function f(D){U(),y.value=!0;const{message:b}=await p(`/api/items/affilations/${i.candId}`,{method:"POST",body:D});y.value=!1,await v(),t("message",b)}async function C(D){if(U(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:b}=await p(`/api/items/affilations/${D}`,{method:"DELETE"});await v(),t("message",b)}function I(){U(),v()}function U(){r.value=!1,m.value="",u.value=!1}return(D,b)=>{const B=R,z=Tn,x=te,O=ee,F=ne,H=ae;return o(),k(L,null,[i.editable?(o(),h(B,{key:0,label:e(u)?"Скрыть форму":"Добавить запись",variant:"link",onClick:b[0]||(b[0]=d=>u.value=!e(u))},null,8,["label"])):T("",!0),a(Z,{name:"slide-fade"},{default:l(()=>[e(u)?(o(),k("div",zn,[a(x,null,{default:l(()=>[a(z,{"cand-id":i.candId,onCancel:I,onUpdate:f},null,8,["cand-id"])]),_:1})])):T("",!0)]),_:1}),e(s)&&e(s).length?(o(),k("div",xn,[(o(!0),k(L,null,G(e(s),(d,A)=>(o(),k("div",{key:A,class:"p-1"},[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:8})):(o(),h(x,{key:1},X({default:l(()=>[e(r)&&e(m)==d.id.toString()?(o(),h(z,{key:0,"cand-id":i.candId,affils:e(_),onCancel:I,onUpdate:f},null,8,["cand-id","affils"])):(o(),k("div",On,[a(F,{label:"Тип участия"},{default:l(()=>[E(V(d.view),1)]),_:2},1024),a(F,{label:"Организация"},{default:l(()=>[E(V(d.organization),1)]),_:2},1024),a(F,{label:"ИНН"},{default:l(()=>[E(V(d.inn),1)]),_:2},1024)]))]),_:2},[i.editable&&(!e(r)||e(m)!=d.id.toString())?{name:"footer",fn:l(()=>[a(H,{navlen:3,onDelete:P=>C(d.id),onUpdate:P=>{_.value=d,m.value=d.id.toString(),r.value=!0},onUpgrade:b[1]||(b[1]=P=>e(v)())},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(o(),k("div",Mn,[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:8})):(o(),k("p",Bn,"Данные отсутствуют"))]))],64)}}}),An=M({__name:"PreviousForm",props:{previous:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(n,{emit:$}){const c=$,t=Y(n.previous);function p(){c("update",t.value),u()}function i(){c("cancel"),u()}function u(){Object.assign(t.value,{surname:"",firstname:"",patronymic:"",changed:"",reason:""})}return(y,r)=>{const m=pe,_=re,s=ie,v=ue;return o(),h(v,{state:e(t),onSubmit:le(p,["prevent"])},{default:l(()=>[a(_,{class:"mb-3",label:"Фамилия"},{default:l(()=>[a(m,{modelValue:e(t).surname,"onUpdate:modelValue":r[0]||(r[0]=g=>e(t).surname=g),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Фамилия"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Имя"},{default:l(()=>[a(m,{modelValue:e(t).firstname,"onUpdate:modelValue":r[1]||(r[1]=g=>e(t).firstname=g),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Имя"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Отчество"},{default:l(()=>[a(m,{modelValue:e(t).patronymic,"onUpdate:modelValue":r[2]||(r[2]=g=>e(t).patronymic=g),modelModifiers:{trim:!0,lazy:!0},placeholder:"Отчество"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Год изменения"},{default:l(()=>[a(m,{modelValue:e(t).changed,"onUpdate:modelValue":r[3]||(r[3]=g=>e(t).changed=g),modelModifiers:{trim:!0,lazy:!0},placeholder:"Год изменения"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Причина изменения"},{default:l(()=>[a(m,{modelValue:e(t).reason,"onUpdate:modelValue":r[4]||(r[4]=g=>e(t).reason=g),modelModifiers:{trim:!0,lazy:!0},placeholder:"Причина изменения"},null,8,["modelValue"])]),_:1}),a(s,{onCancel:i})]),_:1},8,["state"])}}}),Ln={key:0,class:"py-3"},Hn={key:1},qn={key:1},jn={key:2,class:"p-3"},Yn={key:1,class:"text-primary"},Nn=M({__name:"PrevDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["message"],async setup(n,{emit:$}){let c,S;Q(["FormsPreviousForm","ElementsSkeletonDiv"]);const t=$,p=W(),i=n,u=w(!1),y=w(!1),r=w(!1),m=w(""),_=w({}),s=w([]),{refresh:v,status:g}=([c,S]=J(async()=>se("previous",async()=>{s.value=await p("/api/items/previous/"+i.candId)})),c=await c,S(),c);async function f(D){U(),y.value=!0;const{message:b}=await p(`/api/items/previous/${i.candId}`,{method:"POST",body:D});y.value=!1,await v(),t("message",b)}async function C(D){if(U(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:b}=await p(`/api/items/previous/${D}`,{method:"DELETE"});await v(),t("message",b)}function I(){U(),v()}function U(){r.value=!1,m.value="",u.value=!1}return(D,b)=>{const B=R,z=An,x=te,O=ee,F=ne,H=ae;return o(),k(L,null,[i.editable?(o(),h(B,{key:0,label:e(u)?"Скрыть форму":"Добавить запись",variant:"link",onClick:b[0]||(b[0]=d=>u.value=!e(u))},null,8,["label"])):T("",!0),a(Z,{name:"slide-fade"},{default:l(()=>[e(u)?(o(),k("div",Ln,[a(x,null,{default:l(()=>[a(z,{"cand-id":i.candId,onCancel:I,onUpdate:f},null,8,["cand-id"])]),_:1})])):T("",!0)]),_:1}),e(s)&&e(s).length?(o(),k("div",Hn,[(o(!0),k(L,null,G(e(s),(d,A)=>(o(),k("div",{key:A,class:"p-1"},[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:4})):(o(),h(x,{key:1},X({default:l(()=>[e(r)&&e(m)==d.id.toString()?(o(),h(z,{key:0,"cand-id":i.candId,previous:e(_),onCancel:I,onUpdate:f},null,8,["cand-id","previous"])):(o(),k("div",qn,[a(F,{label:"Фамилия"},{default:l(()=>[E(V(d.surname),1)]),_:2},1024),a(F,{label:"Имя"},{default:l(()=>[E(V(d.firstname),1)]),_:2},1024),d.patronymic?(o(),h(F,{key:0,label:"Отчество"},{default:l(()=>[E(V(d.patronymic),1)]),_:2},1024)):T("",!0),d.changed?(o(),h(F,{key:1,label:"Год изменения"},{default:l(()=>[E(V(d.changed),1)]),_:2},1024)):T("",!0),d.reason?(o(),h(F,{key:2,label:"Причина"},{default:l(()=>[E(V(d.reason),1)]),_:2},1024)):T("",!0)]))]),_:2},[i.editable&&(!e(r)||e(m)!=d.id.toString())?{name:"footer",fn:l(()=>[a(H,{navlen:3,onDelete:P=>C(d.id.toString()),onUpdate:P=>{_.value=d,m.value=d.id.toString(),r.value=!0},onUpgrade:b[1]||(b[1]=P=>e(v)())},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(o(),k("div",jn,[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:4})):(o(),k("p",Yn,"Данные отсутствуют"))]))],64)}}}),Gn=M({__name:"RelationForm",props:{relation:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(n,{emit:$}){const c=$,t=Y(n.relation);async function p(){c("update",t.value),u()}function i(){c("cancel"),u()}function u(){Object.assign(t.value,{relation:"",relation_id:""})}return(y,r)=>{const m=fe,_=re,s=pe,v=ie,g=ue;return o(),h(g,{state:e(t),onSubmit:le(p,["prevent"])},{default:l(()=>[a(_,{class:"mb-3",label:"Тип связи"},{default:l(()=>[a(m,{modelValue:e(t).relation,"onUpdate:modelValue":r[0]||(r[0]=f=>e(t).relation=f),modelModifiers:{trim:!0,lazy:!0},required:"",options:["Одно лицо","Родители-Дети","Братья-Сестры","Супруг-Супруга","Родственники","Близкая связь"]},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"ID связи"},{default:l(()=>[a(s,{modelValue:e(t).relation_id,"onUpdate:modelValue":r[1]||(r[1]=f=>e(t).relation_id=f),modelModifiers:{trim:!0,lazy:!0},required:"",type:"number"},null,8,["modelValue"])]),_:1}),a(v,{onCancel:i})]),_:1},8,["state"])}}}),Rn={key:0,class:"py-3"},Wn={key:1},Kn={key:1},Jn={key:2,class:"p-3"},Qn={key:1,class:"text-primary"},Xn=M({__name:"RelateDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["message"],async setup(n,{emit:$}){let c,S;Q(["FormsRelationForm","ElementsSkeletonDiv"]);const t=$,p=W(),i=n,u=w(!1),y=w(!1),r=w(!1),m=w(""),_=w({}),s=w([]),{refresh:v,status:g}=([c,S]=J(async()=>se("relations",async()=>{s.value=await p("/api/items/relations/"+i.candId)})),c=await c,S(),c);async function f(D){U(),y.value=!0;const{message:b}=await p(`/api/items/relations/${i.candId}`,{method:"POST",body:D});y.value=!1,await v(),t("message",b)}async function C(D){if(U(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:b}=await p(`/api/items/relations/${D}`,{method:"DELETE"});await v(),t("message",b)}function I(){U(),v()}function U(){r.value=!1,m.value="",u.value=!1}return(D,b)=>{const B=R,z=Gn,x=te,O=ee,F=ne,H=ut,d=ae;return o(),k(L,null,[i.editable?(o(),h(B,{key:0,label:e(u)?"Скрыть форму":"Добавить запись",variant:"link",onClick:b[0]||(b[0]=A=>u.value=!e(u))},null,8,["label"])):T("",!0),a(Z,{name:"slide-fade"},{default:l(()=>[e(u)?(o(),k("div",Rn,[a(x,null,{default:l(()=>[a(z,{"cand-id":i.candId,onCancel:I,onUpdate:f},null,8,["cand-id"])]),_:1})])):T("",!0)]),_:1}),e(s)&&e(s).length?(o(),k("div",Wn,[(o(!0),k(L,null,G(e(s),(A,P)=>(o(),k("div",{key:P,class:"p-1"},[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:2})):(o(),h(x,{key:1},X({default:l(()=>[e(r)&&e(m)==A.id.toString()?(o(),h(z,{key:0,"cand-id":i.candId,relation:e(_),onCancel:I,onUpdate:f},null,8,["cand-id","relation"])):(o(),k("div",Kn,[a(F,{label:"Тип"},{default:l(()=>[E(V(A.relation),1)]),_:2},1024),a(F,{label:"Связь"},{default:l(()=>[a(H,{to:`/profile/${A.relation_id}`},{default:l(()=>[E(" ID #"+V(A.relation_id),1)]),_:2},1032,["to"])]),_:2},1024)]))]),_:2},[i.editable&&(!e(r)||e(m)!=A.id.toString())?{name:"footer",fn:l(()=>[a(d,{navlen:3,onDelete:Ye=>C(A.id.toString()),onUpdate:Ye=>{_.value=A,m.value=A.id.toString(),r.value=!0},onUpgrade:b[1]||(b[1]=Ye=>e(v)())},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(o(),k("div",Jn,[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:2})):(o(),k("p",Qn,"Данные отсутствуют"))]))],64)}}});function Zn(n){typeof queueMicrotask=="function"?queueMicrotask(n):Promise.resolve().then(n).catch($=>setTimeout(()=>{throw $}))}var ea=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(ea||{});let nt=Symbol("DisclosureContext");function qe(n){let $=Ie(nt,null);if($===null){let c=new Error(`<${n} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,qe),c}return $}let at=Symbol("DisclosurePanelContext");function ta(){return Ie(at,null)}let na=M({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(n,{slots:$,attrs:c}){let S=w(n.defaultOpen?0:1),t=w(null),p=w(null),i={buttonId:w(`headlessui-disclosure-button-${Fe()}`),panelId:w(`headlessui-disclosure-panel-${Fe()}`),disclosureState:S,panel:t,button:p,toggleDisclosure(){S.value=he(S.value,{0:1,1:0})},closeDisclosure(){S.value!==1&&(S.value=1)},close(u){i.closeDisclosure();let y=u?u instanceof HTMLElement?u:u.value instanceof HTMLElement?j(u):j(i.button):j(i.button);y==null||y.focus()}};return Ve(nt,i),kt(q(()=>he(S.value,{0:Ce.Open,1:Ce.Closed}))),()=>{let{defaultOpen:u,...y}=n,r={open:S.value===0,close:i.close};return be({theirProps:y,ourProps:{},slot:r,slots:$,attrs:c,name:"Disclosure"})}}}),aa=M({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(n,{attrs:$,slots:c,expose:S}){let t=qe("DisclosureButton"),p=ta(),i=q(()=>p===null?!1:p.value===t.panelId.value);ge(()=>{i.value||n.id!==null&&(t.buttonId.value=n.id)}),xe(()=>{i.value||(t.buttonId.value=null)});let u=w(null);S({el:u,$el:u}),i.value||Je(()=>{t.button.value=u.value});let y=Ze(q(()=>({as:n.as,type:$.type})),u);function r(){var s;n.disabled||(i.value?(t.toggleDisclosure(),(s=j(t.button))==null||s.focus()):t.toggleDisclosure())}function m(s){var v;if(!n.disabled)if(i.value)switch(s.key){case K.Space:case K.Enter:s.preventDefault(),s.stopPropagation(),t.toggleDisclosure(),(v=j(t.button))==null||v.focus();break}else switch(s.key){case K.Space:case K.Enter:s.preventDefault(),s.stopPropagation(),t.toggleDisclosure();break}}function _(s){switch(s.key){case K.Space:s.preventDefault();break}}return()=>{var s;let v={open:t.disclosureState.value===0},{id:g,...f}=n,C=i.value?{ref:u,type:y.value,onClick:r,onKeydown:m}:{id:(s=t.buttonId.value)!=null?s:g,ref:u,type:y.value,"aria-expanded":t.disclosureState.value===0,"aria-controls":t.disclosureState.value===0||j(t.panel)?t.panelId.value:void 0,disabled:n.disabled?!0:void 0,onClick:r,onKeydown:m,onKeyup:_};return be({ourProps:C,theirProps:f,slot:v,attrs:$,slots:c,name:"DisclosureButton"})}}}),oa=M({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(n,{attrs:$,slots:c,expose:S}){let t=qe("DisclosurePanel");ge(()=>{n.id!==null&&(t.panelId.value=n.id)}),xe(()=>{t.panelId.value=null}),S({el:t.panel,$el:t.panel}),Ve(at,t.panelId);let p=ht(),i=q(()=>p!==null?(p.value&Ce.Open)===Ce.Open:t.disclosureState.value===0);return()=>{var u;let y={open:t.disclosureState.value===0,close:t.close},{id:r,...m}=n,_={id:(u=t.panelId.value)!=null?u:r,ref:t.panel};return be({ourProps:_,theirProps:m,slot:y,attrs:$,slots:c,features:Te.RenderStrategy|Te.Static,visible:i.value,name:"DisclosurePanel"})}}}),la=M({props:{onFocus:{type:Function,required:!0}},setup(n){let $=w(!0);return()=>$.value?Ee(et,{as:"button",type:"button",features:$t.Focusable,onFocus(c){c.preventDefault();let S,t=50;function p(){var i;if(t--<=0){S&&cancelAnimationFrame(S);return}if((i=n.onFocus)!=null&&i.call(n)){$.value=!1,cancelAnimationFrame(S);return}S=requestAnimationFrame(p)}S=requestAnimationFrame(p)}}):null}});var sa=(n=>(n[n.Forwards=0]="Forwards",n[n.Backwards=1]="Backwards",n))(sa||{}),ia=(n=>(n[n.Less=-1]="Less",n[n.Equal=0]="Equal",n[n.Greater=1]="Greater",n))(ia||{});let ot=Symbol("TabsContext");function Ue(n){let $=Ie(ot,null);if($===null){let c=new Error(`<${n} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,Ue),c}return $}let je=Symbol("TabsSSRContext"),ra=M({name:"TabGroup",emits:{change:n=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(n,{slots:$,attrs:c,emit:S}){var t;let p=w((t=n.selectedIndex)!=null?t:n.defaultIndex),i=w([]),u=w([]),y=q(()=>n.selectedIndex!==null),r=q(()=>y.value?n.selectedIndex:p.value);function m(f){var C;let I=we(_.tabs.value,j),U=we(_.panels.value,j),D=I.filter(b=>{var B;return!((B=j(b))!=null&&B.hasAttribute("disabled"))});if(f<0||f>I.length-1){let b=he(p.value===null?0:Math.sign(f-p.value),{[-1]:()=>1,0:()=>he(Math.sign(f),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),B=he(b,{0:()=>I.indexOf(D[0]),1:()=>I.indexOf(D[D.length-1])});B!==-1&&(p.value=B),_.tabs.value=I,_.panels.value=U}else{let b=I.slice(0,f),B=[...I.slice(f),...b].find(x=>D.includes(x));if(!B)return;let z=(C=I.indexOf(B))!=null?C:_.selectedIndex.value;z===-1&&(z=_.selectedIndex.value),p.value=z,_.tabs.value=I,_.panels.value=U}}let _={selectedIndex:q(()=>{var f,C;return(C=(f=p.value)!=null?f:n.defaultIndex)!=null?C:null}),orientation:q(()=>n.vertical?"vertical":"horizontal"),activation:q(()=>n.manual?"manual":"auto"),tabs:i,panels:u,setSelectedIndex(f){r.value!==f&&S("change",f),y.value||m(f)},registerTab(f){var C;if(i.value.includes(f))return;let I=i.value[p.value];if(i.value.push(f),i.value=we(i.value,j),!y.value){let U=(C=i.value.indexOf(I))!=null?C:p.value;U!==-1&&(p.value=U)}},unregisterTab(f){let C=i.value.indexOf(f);C!==-1&&i.value.splice(C,1)},registerPanel(f){u.value.includes(f)||(u.value.push(f),u.value=we(u.value,j))},unregisterPanel(f){let C=u.value.indexOf(f);C!==-1&&u.value.splice(C,1)}};Ve(ot,_);let s=w({tabs:[],panels:[]}),v=w(!1);ge(()=>{v.value=!0}),Ve(je,q(()=>v.value?null:s.value));let g=q(()=>n.selectedIndex);return ge(()=>{Se([g],()=>{var f;return m((f=n.selectedIndex)!=null?f:n.defaultIndex)},{immediate:!0})}),Je(()=>{if(!y.value||r.value==null||_.tabs.value.length<=0)return;let f=we(_.tabs.value,j);f.some((C,I)=>j(_.tabs.value[I])!==j(C))&&_.setSelectedIndex(f.findIndex(C=>j(C)===j(_.tabs.value[r.value])))}),()=>{let f={selectedIndex:p.value};return Ee(L,[i.value.length<=0&&Ee(la,{onFocus:()=>{for(let C of i.value){let I=j(C);if((I==null?void 0:I.tabIndex)===0)return I.focus(),!0}return!1}}),be({theirProps:{...c,...wt(n,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:f,slots:$,attrs:c,name:"TabGroup"})])}}}),ua=M({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(n,{attrs:$,slots:c}){let S=Ue("TabList");return()=>{let t={selectedIndex:S.selectedIndex.value},p={role:"tablist","aria-orientation":S.orientation.value};return be({ourProps:p,theirProps:n,slot:t,attrs:$,slots:c,name:"TabList"})}}}),da=M({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(n,{attrs:$,slots:c,expose:S}){var t;let p=(t=n.id)!=null?t:`headlessui-tabs-tab-${Fe()}`,i=Ue("Tab"),u=w(null);S({el:u,$el:u}),ge(()=>i.registerTab(u)),xe(()=>i.unregisterTab(u));let y=Ie(je),r=q(()=>{if(y.value){let U=y.value.tabs.indexOf(p);return U===-1?y.value.tabs.push(p)-1:U}return-1}),m=q(()=>{let U=i.tabs.value.indexOf(u);return U===-1?r.value:U}),_=q(()=>m.value===i.selectedIndex.value);function s(U){var D;let b=U();if(b===De.Success&&i.activation.value==="auto"){let B=(D=St(u))==null?void 0:D.activeElement,z=i.tabs.value.findIndex(x=>j(x)===B);z!==-1&&i.setSelectedIndex(z)}return b}function v(U){let D=i.tabs.value.map(b=>j(b)).filter(Boolean);if(U.key===K.Space||U.key===K.Enter){U.preventDefault(),U.stopPropagation(),i.setSelectedIndex(m.value);return}switch(U.key){case K.Home:case K.PageUp:return U.preventDefault(),U.stopPropagation(),s(()=>ke(D,me.First));case K.End:case K.PageDown:return U.preventDefault(),U.stopPropagation(),s(()=>ke(D,me.Last))}if(s(()=>he(i.orientation.value,{vertical(){return U.key===K.ArrowUp?ke(D,me.Previous|me.WrapAround):U.key===K.ArrowDown?ke(D,me.Next|me.WrapAround):De.Error},horizontal(){return U.key===K.ArrowLeft?ke(D,me.Previous|me.WrapAround):U.key===K.ArrowRight?ke(D,me.Next|me.WrapAround):De.Error}}))===De.Success)return U.preventDefault()}let g=w(!1);function f(){var U;g.value||(g.value=!0,!n.disabled&&((U=j(u))==null||U.focus({preventScroll:!0}),i.setSelectedIndex(m.value),Zn(()=>{g.value=!1})))}function C(U){U.preventDefault()}let I=Ze(q(()=>({as:n.as,type:$.type})),u);return()=>{var U,D;let b={selected:_.value,disabled:(U=n.disabled)!=null?U:!1},{...B}=n,z={ref:u,onKeydown:v,onMousedown:C,onClick:f,id:p,role:"tab",type:I.value,"aria-controls":(D=j(i.panels.value[m.value]))==null?void 0:D.id,"aria-selected":_.value,tabIndex:_.value?0:-1,disabled:n.disabled?!0:void 0};return be({ourProps:z,theirProps:B,slot:b,attrs:$,slots:c,name:"Tab"})}}}),ca=M({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(n,{slots:$,attrs:c}){let S=Ue("TabPanels");return()=>{let t={selectedIndex:S.selectedIndex.value};return be({theirProps:n,ourProps:{},slot:t,attrs:c,slots:$,name:"TabPanels"})}}}),pa=M({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(n,{attrs:$,slots:c,expose:S}){var t;let p=(t=n.id)!=null?t:`headlessui-tabs-panel-${Fe()}`,i=Ue("TabPanel"),u=w(null);S({el:u,$el:u}),ge(()=>i.registerPanel(u)),xe(()=>i.unregisterPanel(u));let y=Ie(je),r=q(()=>{if(y.value){let s=y.value.panels.indexOf(p);return s===-1?y.value.panels.push(p)-1:s}return-1}),m=q(()=>{let s=i.panels.value.indexOf(u);return s===-1?r.value:s}),_=q(()=>m.value===i.selectedIndex.value);return()=>{var s;let v={selected:_.value},{tabIndex:g,...f}=n,C={ref:u,id:p,role:"tabpanel","aria-labelledby":(s=j(i.tabs.value[m.value]))==null?void 0:s.id,tabIndex:_.value?g:-1};return!_.value&&n.unmount&&!n.static?Ee(et,{as:"span","aria-hidden":!0,...C}):be({ourProps:C,theirProps:f,slot:v,attrs:$,slots:c,features:Te.Static|Te.RenderStrategy,visible:_.value,name:"TabPanel"})}}});const Me=ze(_e.ui.strategy,_e.ui.accordion,Dt),ma=ze(_e.ui.strategy,_e.ui.button,dt),fa=M({components:{HDisclosure:na,HDisclosureButton:aa,HDisclosurePanel:oa,UIcon:$e,UButton:R},inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},defaultOpen:{type:Boolean,default:!1},openIcon:{type:String,default:()=>Me.default.openIcon},unmount:{type:Boolean,default:!1},closeIcon:{type:String,default:()=>Me.default.closeIcon},multiple:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["open"],setup(n,{emit:$}){const{ui:c,attrs:S}=Ae("accordion",Y(n,"ui"),Me,Y(n,"class")),t=q(()=>ma),p=w([]),i=q(()=>p.value.map(({open:s})=>s));Se(i,(s,v)=>{for(const g in s){const f=v[g],C=s[g];!f&&C&&$("open",g)}},{immediate:!0});function u(s,v){!n.items[s].closeOthers&&n.multiple||p.value.forEach(g=>{g.open&&g.close(v.target)})}function y(s,v){const g=s;g.style.height="0",g.offsetHeight,g.style.height=g.scrollHeight+"px",g.addEventListener("transitionend",v,{once:!0})}function r(s){const v=s;v.style.height=v.scrollHeight+"px",v.offsetHeight}function m(s){const v=s;v.style.height="auto"}function _(s,v){const g=s;g.style.height="0",g.addEventListener("transitionend",v,{once:!0})}return tt(()=>Qe()),{ui:c,uiButton:t,attrs:S,buttonRefs:p,closeOthers:u,omit:ct,onEnter:y,onBeforeLeave:r,onAfterEnter:m,onLeave:_}}}),va={key:1};function _a(n,$,c,S,t,p){const i=$e,u=R,y=ve("HDisclosureButton"),r=ve("HDisclosurePanel"),m=ve("HDisclosure");return o(),k("div",{class:N(n.ui.wrapper)},[(o(!0),k(L,null,G(n.items,(_,s)=>(o(),h(m,{key:s,as:"div",class:N(n.ui.container),"default-open":n.defaultOpen||_.defaultOpen},{default:l(({open:v,close:g})=>[a(y,{ref_for:!0,ref:()=>n.buttonRefs[s]={open:v,close:g},as:"template",disabled:_.disabled,onClick:f=>n.closeOthers(s,f),onKeydown:[Be(f=>n.closeOthers(s,f),["enter"]),Be(f=>n.closeOthers(s,f),["space"])]},{default:l(()=>[ce(n.$slots,"default",{item:_,index:s,open:v,close:g},()=>[a(u,ye({ref_for:!0},{...n.omit(n.ui.default,["openIcon","closeIcon"]),...n.attrs,...n.omit(_,["slot","disabled","content","defaultOpen"])}),{trailing:l(()=>[a(i,{name:v&&n.closeIcon?n.closeIcon:n.openIcon,class:N([v&&!n.closeIcon?"-rotate-180":"",n.uiButton.icon.size[_.size||n.uiButton.default.size],n.ui.item.icon])},null,8,["name","class"])]),_:2},1040)])]),_:2},1032,["disabled","onClick","onKeydown"]),a(Z,ye({ref_for:!0},n.ui.transition,{onEnter:n.onEnter,onAfterEnter:n.onAfterEnter,onBeforeLeave:n.onBeforeLeave,onLeave:n.onLeave}),{default:l(()=>[n.unmount?(o(),h(r,{key:0,class:N([n.ui.item.base,n.ui.item.size,n.ui.item.color,n.ui.item.padding]),unmount:""},{default:l(()=>[ce(n.$slots,_.slot||"item",{item:_,index:s,open:v,close:g},()=>[E(V(_.content),1)])]),_:2},1032,["class"])):pt((o(),k("div",va,[a(r,{class:N([n.ui.item.base,n.ui.item.size,n.ui.item.color,n.ui.item.padding]),static:""},{default:l(()=>[ce(n.$slots,_.slot||"item",{item:_,index:s,open:v,close:g},()=>[E(V(_.content),1)])]),_:2},1032,["class"])],512)),[[mt,v]])]),_:2},1040,["onEnter","onAfterEnter","onBeforeLeave","onLeave"])]),_:2},1032,["class","default-open"]))),128))],2)}const ba=Pe(fa,[["render",_a]]),ya=M({__name:"AnketaTab",props:{editable:{type:Boolean,default:!1},candId:{type:String,default:""},person:{type:Object,default:{}}},emits:["update","message"],setup(n,{emit:$}){const c=n,S=$,t=[{label:"Резюме",icon:"i-heroicons-user",defaultOpen:!0,slot:"resume"},{label:"Должности",icon:"i-heroicons-briefcase",slot:"staff"},{label:"Образование",icon:"i-heroicons-academic-cap",slot:"education"},{label:"Работа",icon:"i-heroicons-briefcase",slot:"work"},{label:"Документы",icon:"i-heroicons-document-text",slot:"document"},{label:"Адреса",icon:"i-heroicons-home-modern",slot:"address"},{label:"Контакты",icon:"i-heroicons-phone",slot:"contact"},{label:"Аффилированные",icon:"i-heroicons-user-group",slot:"affiliation"},{label:"Изменения имени",icon:"i-heroicons-archive-box-arrow-down",slot:"prev"},{label:"Связанные",icon:"i-heroicons-user-group",slot:"relate"}];function p(i){S("message",i)}return(i,u)=>{const y=qt,r=Kt,m=nn,_=dn,s=bn,v=Sn,g=Cn,f=Pn,C=Nn,I=Xn,U=ba;return o(),h(U,{items:t,size:"lg",multiple:""},{resume:l(()=>[a(y,{"cand-id":c.candId,editable:c.editable,person:c.person,onUpdate:u[0]||(u[0]=D=>S("update")),onMessage:p},null,8,["cand-id","editable","person"])]),staff:l(()=>[a(r,{"cand-id":c.candId,editable:c.editable,onMessage:p},null,8,["cand-id","editable"])]),education:l(()=>[a(m,{"cand-id":c.candId,editable:c.editable,onMessage:p},null,8,["cand-id","editable"])]),work:l(()=>[a(_,{"cand-id":c.candId,editable:c.editable,onMessage:p},null,8,["cand-id","editable"])]),document:l(()=>[a(s,{"cand-id":c.candId,editable:c.editable,onMessage:p},null,8,["cand-id","editable"])]),address:l(()=>[a(v,{"cand-id":c.candId,editable:c.editable,onMessage:p},null,8,["cand-id","editable"])]),contact:l(()=>[a(g,{"cand-id":c.candId,editable:c.editable,onMessage:p},null,8,["cand-id","editable"])]),affiliation:l(()=>[a(f,{"cand-id":c.candId,editable:c.editable,onMessage:p},null,8,["cand-id","editable"])]),prev:l(()=>[a(C,{"cand-id":c.candId,editable:c.editable,onMessage:p},null,8,["cand-id","editable"])]),relate:l(()=>[a(I,{"cand-id":c.candId,editable:c.editable,onMessage:p},null,8,["cand-id","editable"])]),_:1})}}}),ga=M({__name:"CheckForm",props:{check:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(n,{emit:$}){const c=$,t=Y(n.check),p=w(!1);function i(){c("update",t.value),y()}function u(){c("cancel"),y()}function y(){p.value=!1,Object.keys(t.value).forEach(r=>{t.value[r]=""})}return Se(p,()=>{p.value&&Object.assign(t.value,{workplace:"Негатив по местам работы не выявлен",document:"Среди недействительных документов не значится",inn:"ИНН соответствует",debt:"Задолженности не обнаружены",bankruptcy:"Решений о признании банкротом не имеется",bki:"Кредитная история положительная",courts:"Судебные дела не обнаружены",affilation:"Аффилированность не выявлена",terrorist:"В списке террористов не обнаружен",mvd:"В розыск не объявлен",internet:"В открытых источниках негатив не обнаружен",cronos:"В Кронос негатив не выявлен"})}),(r,m)=>{const _=It,s=re,v=Oe,g=fe,f=ie,C=ue;return o(),k(L,null,[a(s,{state:e(p),class:"mb-3",label:"Негатива нет"},{default:l(()=>[a(_,{modelValue:e(p),"onUpdate:modelValue":m[0]||(m[0]=I=>Ke(p)?p.value=I:null)},null,8,["modelValue"])]),_:1},8,["state"]),a(C,{state:e(t),onSubmit:le(i,["prevent"])},{default:l(()=>[a(s,{class:"mb-3",label:"Проверка по местам работы"},{default:l(()=>[a(v,{modelValue:e(t).workplace,"onUpdate:modelValue":m[1]||(m[1]=I=>e(t).workplace=I),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка по местам работы"},null,8,["modelValue"])]),_:1}),a(s,{class:"mb-3",label:"Проверка документов"},{default:l(()=>[a(v,{modelValue:e(t).document,"onUpdate:modelValue":m[2]||(m[2]=I=>e(t).document=I),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка документов"},null,8,["modelValue"])]),_:1}),a(s,{class:"mb-3",label:"Проверка ИНН"},{default:l(()=>[a(v,{modelValue:e(t).inn,"onUpdate:modelValue":m[3]||(m[3]=I=>e(t).inn=I),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка ИНН"},null,8,["modelValue"])]),_:1}),a(s,{class:"mb-3",label:"Проверка задолженностей"},{default:l(()=>[a(v,{modelValue:e(t).debt,"onUpdate:modelValue":m[4]||(m[4]=I=>e(t).debt=I),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка задолженностей"},null,8,["modelValue"])]),_:1}),a(s,{class:"mb-3",label:"Проверка банкротства"},{default:l(()=>[a(v,{modelValue:e(t).bankruptcy,"onUpdate:modelValue":m[5]||(m[5]=I=>e(t).bankruptcy=I),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка банкротства"},null,8,["modelValue"])]),_:1}),a(s,{class:"mb-3",label:"Проверка Кредитной истории"},{default:l(()=>[a(v,{modelValue:e(t).bki,"onUpdate:modelValue":m[6]||(m[6]=I=>e(t).bki=I),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка Кредитной истории"},null,8,["modelValue"])]),_:1}),a(s,{class:"mb-3",label:"Проверка судебных дел"},{default:l(()=>[a(v,{modelValue:e(t).courts,"onUpdate:modelValue":m[7]||(m[7]=I=>e(t).courts=I),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка судебных дел"},null,8,["modelValue"])]),_:1}),a(s,{class:"mb-3",label:"Проверка аффилированности"},{default:l(()=>[a(v,{modelValue:e(t).affilation,"onUpdate:modelValue":m[8]||(m[8]=I=>e(t).affilation=I),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка аффилированности"},null,8,["modelValue"])]),_:1}),a(s,{class:"mb-3",label:"Проверка в списке террористов"},{default:l(()=>[a(v,{modelValue:e(t).terrorist,"onUpdate:modelValue":m[9]||(m[9]=I=>e(t).terrorist=I),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка в списке террористов"},null,8,["modelValue"])]),_:1}),a(s,{class:"mb-3",label:"Проверка в розыск"},{default:l(()=>[a(v,{modelValue:e(t).mvd,"onUpdate:modelValue":m[10]||(m[10]=I=>e(t).mvd=I),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка в розыск"},null,8,["modelValue"])]),_:1}),a(s,{class:"mb-3",label:"Проверка в открытых источниках"},{default:l(()=>[a(v,{modelValue:e(t).internet,"onUpdate:modelValue":m[11]||(m[11]=I=>e(t).internet=I),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка в открытых источниках"},null,8,["modelValue"])]),_:1}),a(s,{class:"mb-3",label:"Проверка в Кронос"},{default:l(()=>[a(v,{modelValue:e(t).cronos,"onUpdate:modelValue":m[12]||(m[12]=I=>e(t).cronos=I),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка в Кронос/Крос"},null,8,["modelValue"])]),_:1}),a(s,{class:"mb-3",label:"Дополнительная информация"},{default:l(()=>[a(v,{modelValue:e(t).addition,"onUpdate:modelValue":m[13]||(m[13]=I=>e(t).addition=I),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Дополнительная информация"},null,8,["modelValue"])]),_:1}),a(s,{class:"mb-3",label:"Комментарии"},{default:l(()=>[a(v,{modelValue:e(t).comment,"onUpdate:modelValue":m[14]||(m[14]=I=>e(t).comment=I),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Комментарии"},null,8,["modelValue"])]),_:1}),a(s,{class:"mb-3",label:"Результат"},{default:l(()=>[a(g,{modelValue:e(t).conclusion,"onUpdate:modelValue":m[15]||(m[15]=I=>e(t).conclusion=I),modelModifiers:{trim:!0,lazy:!0},required:"",options:["СОГЛАСОВАНО","СОГЛАСОВАНО С КОММЕНТАРИЕМ","ОТКАЗАНО В СОГЛАСОВАНИИ"]},null,8,["modelValue"])]),_:1}),a(f,{onCancel:u})]),_:1},8,["state"])],64)}}}),ka={key:0,class:"py-3"},ha={key:1},$a={class:"tex-base text-red-800 dark:text-gray-400 font-medium"},wa={key:1},Sa={key:2,class:"p-3"},Ia={key:1,class:"text-red-800"},Ua=M({__name:"CheckTab",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["message"],async setup(n,{emit:$}){let c,S;Q(["FormsCheckForm","ElementsSkeletonDiv"]);const t=$,p=W(),i=n,u=w(!1),y=w(!1),r=w(!1),m=w(""),_=w({}),s=w([]),{refresh:v,status:g}=([c,S]=J(async()=>se("checks",async()=>{s.value=await p(`/api/items/checks/${i.candId}`)})),c=await c,S(),c);async function f(D){U(),y.value=!0;const{message:b}=await p(`/api/items/checks/${i.candId}`,{method:"POST",body:D});y.value=!1,await v(),t("message",b)}async function C(D){if(U(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:b}=await p(`/api/items/checks/${D}`,{method:"DELETE"});await v(),t("message",b)}function I(){U(),v()}function U(){u.value=!1,m.value="",r.value=!1}return(D,b)=>{const B=R,z=ga,x=te,O=ee,F=ne,H=ae;return o(),k(L,null,[i.editable?(o(),h(B,{key:0,class:"py-3",label:e(r)?"Скрыть форму":"Добавить запись",variant:"link",onClick:b[0]||(b[0]=d=>r.value=!e(r))},null,8,["label"])):T("",!0),a(Z,{name:"slide-fade"},{default:l(()=>[e(r)?(o(),k("div",ka,[a(x,null,{default:l(()=>[a(z,{"cand-id":i.candId,onUpdate:f,onCancel:I},null,8,["cand-id"])]),_:1})])):T("",!0)]),_:1}),e(s)&&e(s).length?(o(),k("div",ha,[(o(!0),k(L,null,G(e(s),(d,A)=>(o(),k("div",{key:A,class:"text-sm text-gray-500 dark:text-gray-400 py-1"},[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:18})):(o(),h(x,{key:1},X({header:l(()=>[oe("div",$a,V("Проверка кандидата ID #"+d.id),1)]),default:l(()=>[e(u)&&e(m)==d.id.toString()?(o(),h(z,{key:0,"cand-id":i.candId,check:d,onCancel:I,onUpdate:f},null,8,["cand-id","check"])):(o(),k("div",wa,[d.workplace?(o(),h(F,{key:0,label:"Проверка по местам работы"},{default:l(()=>[E(V(d.workplace),1)]),_:2},1024)):T("",!0),d.document?(o(),h(F,{key:1,label:"Проверка паспорта"},{default:l(()=>[E(V(d.document),1)]),_:2},1024)):T("",!0),d.inn?(o(),h(F,{key:2,label:"Проверка ИНН"},{default:l(()=>[E(V(d.inn),1)]),_:2},1024)):T("",!0),d.debt?(o(),h(F,{key:3,label:"Проверка ФССП"},{default:l(()=>[E(V(d.debt),1)]),_:2},1024)):T("",!0),d.bankruptcy?(o(),h(F,{key:4,label:"Проверка банкротства"},{default:l(()=>[E(V(d.bankruptcy),1)]),_:2},1024)):T("",!0),d.bki?(o(),h(F,{key:5,label:"Проверка БКИ"},{default:l(()=>[E(V(d.bki),1)]),_:2},1024)):T("",!0),d.courts?(o(),h(F,{key:6,label:"Проверка судебных решений"},{default:l(()=>[E(V(d.courts),1)]),_:2},1024)):T("",!0),d.affilation?(o(),h(F,{key:7,label:"Проверка аффилированности"},{default:l(()=>[E(V(d.affilation),1)]),_:2},1024)):T("",!0),d.terrorist?(o(),h(F,{key:8,label:"Проверка по списку террористов"},{default:l(()=>[E(V(d.terrorist),1)]),_:2},1024)):T("",!0),d.mvd?(o(),h(F,{key:9,label:"Проверка в розыск"},{default:l(()=>[E(V(d.mvd),1)]),_:2},1024)):T("",!0),d.internet?(o(),h(F,{key:10,label:"Проверка в открытых источниках"},{default:l(()=>[E(V(d.internet),1)]),_:2},1024)):T("",!0),d.cronos?(o(),h(F,{key:11,label:"Проверка в Кронос"},{default:l(()=>[E(V(d.cronos),1)]),_:2},1024)):T("",!0),d.addition?(o(),h(F,{key:12,label:"Дополнительная информация"},{default:l(()=>[E(V(d.addition),1)]),_:2},1024)):T("",!0),d.comment?(o(),h(F,{key:13,label:"Комментарии"},{default:l(()=>[E(V(d.comment),1)]),_:2},1024)):T("",!0),a(F,{label:"Результат"},{default:l(()=>[E(V(d.conclusion),1)]),_:2},1024),a(F,{label:"Сотрудник"},{default:l(()=>[E(V(d.username),1)]),_:2},1024),a(F,{label:"Дата записи"},{default:l(()=>[E(V(e(de)(d.created,"YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024)]))]),_:2},[i.editable&&(!e(u)||e(m)!=d.id.toString())?{name:"footer",fn:l(()=>[a(H,{"cand-id":i.candId,item:"checks",onUpdate:P=>{_.value=d,m.value=d.id.toString(),u.value=!0},onDelete:P=>C(d.id),onUpgrade:b[1]||(b[1]=P=>e(v)())},null,8,["cand-id","onUpdate","onDelete"])]),key:"0"}:void 0]),1024))]))),128))])):(o(),k("div",Sa,[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:18})):(o(),k("p",Ia,"Проверка кандидата отсутствует"))]))],64)}}}),Da=M({__name:"PoligrafForm",props:{poligraf:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(n,{emit:$}){const c=$,t=Y(n.poligraf);function p(){c("update",t.value),t.value.theme="",t.value.results=""}function i(){c("cancel"),t.value.theme="",t.value.results=""}return(u,y)=>{const r=fe,m=re,_=Oe,s=ie,v=ue;return o(),h(v,{state:e(t),onSubmit:le(p,["prevent"])},{default:l(()=>[a(m,{class:"mb-3",label:"Тема проверки"},{default:l(()=>[a(r,{modelValue:e(t).theme,"onUpdate:modelValue":y[0]||(y[0]=g=>e(t).theme=g),required:"",options:["Проверка кандидата","Служебная проверка","Служебное расследование","Плановое мероприятие"]},null,8,["modelValue"])]),_:1}),a(m,{class:"mb-3",label:"Результат"},{default:l(()=>[a(_,{modelValue:e(t).results,"onUpdate:modelValue":y[1]||(y[1]=g=>e(t).results=g),modelModifiers:{trim:!0,lazy:!0},required:"",autoresize:"",placeholder:"Результат"},null,8,["modelValue"])]),_:1}),a(s,{onCancel:i})]),_:1},8,["state"])}}}),Va={key:0,class:"py-3"},Ea={key:1},Fa={class:"tex-base text-red-800 font-medium"},Ca={key:1},Ta={key:2,class:"p-3"},za={key:1,class:"text-red-800"},xa=M({__name:"PoligrafTab",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["message"],async setup(n,{emit:$}){let c,S;Q(["FormsPoligrafForm","ElementsSkeletonDiv"]);const t=$,p=W(),i=n,u=w(!1),y=w(!1),r=w(!1),m=w(""),_=w({}),s=w([]),{refresh:v,status:g}=([c,S]=J(async()=>se("poligrafs",async()=>{s.value=await p("/api/items/poligrafs/"+i.candId)})),c=await c,S(),c);async function f(D){U(),y.value=!0;const{message:b}=await p(`/api/items/poligrafs/${i.candId}`,{method:"POST",body:D});y.value=!1,await v(),t("message",b)}async function C(D){if(U(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:b}=await p(`/api/items/poligrafs/${D}`,{method:"DELETE"});await v(),t("message",b)}function I(){U(),v()}function U(){r.value=!1,u.value=!1,m.value=""}return(D,b)=>{const B=R,z=Da,x=te,O=ee,F=ne,H=ae;return o(),k(L,null,[n.editable?(o(),h(B,{key:0,class:"py-3",label:e(r)?"Скрыть форму":"Добавить запись",variant:"link",onClick:b[0]||(b[0]=d=>r.value=!e(r))},null,8,["label"])):T("",!0),a(Z,{name:"slide-fade"},{default:l(()=>[e(r)?(o(),k("div",Va,[a(x,null,{default:l(()=>[a(z,{"cand-id":i.candId,onCancel:I,onUpdate:f},null,8,["cand-id"])]),_:1})])):T("",!0)]),_:1}),e(s)&&e(s).length?(o(),k("div",Ea,[(o(!0),k(L,null,G(e(s),(d,A)=>(o(),k("div",{key:A,class:"text-sm text-gray-500 dark:text-gray-400 py-1"},[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:4})):(o(),h(x,{key:1},X({header:l(()=>[oe("div",Fa,V("Обследование на полиграфе ID #"+d.id),1)]),default:l(()=>[e(u)&&e(m)==d.id.toString()?(o(),h(z,{key:0,"cand-id":i.candId,poligraf:d,onCancel:I,onUpdate:f},null,8,["cand-id","poligraf"])):(o(),k("div",Ca,[d.theme?(o(),h(F,{key:0,label:"Тема проверки"},{default:l(()=>[E(V(d.theme),1)]),_:2},1024)):T("",!0),d.results?(o(),h(F,{key:1,label:"Результат"},{default:l(()=>[E(V(d.results),1)]),_:2},1024)):T("",!0),a(F,{label:"Сотрудник"},{default:l(()=>[E(V(d.username),1)]),_:2},1024),a(F,{label:"Дата записи"},{default:l(()=>[E(V(e(de)(d.created,"YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024)]))]),_:2},[i.editable&&(!e(u)||e(m)!=d.id.toString())?{name:"footer",fn:l(()=>[a(H,{"cand-id":i.candId,item:"poligrafs",onUpdate:P=>{_.value=d,m.value=d.id.toString(),u.value=!0},onDelete:P=>C(d.id),onUpgrade:b[1]||(b[1]=P=>e(v)())},null,8,["cand-id","onUpdate","onDelete"])]),key:"0"}:void 0]),1024))]))),128))])):(o(),k("div",Ta,[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:4})):(o(),k("p",za,"Обследование на полиграфе не проводилось"))]))],64)}}}),Oa=M({__name:"InvestigationForm",props:{investigation:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(n,{emit:$}){const c=$,t=Y(n.investigation);function p(){c("update",t.value),u()}function i(){c("cancel"),u()}function u(){Object.assign(t.value,{theme:"",info:""})}return(y,r)=>{const m=pe,_=re,s=Oe,v=ie,g=ue;return o(),h(g,{state:e(t),onSubmit:le(p,["prevent"])},{default:l(()=>[a(_,{class:"mb-3",label:"Тема проверки"},{default:l(()=>[a(m,{modelValue:e(t).theme,"onUpdate:modelValue":r[0]||(r[0]=f=>e(t).theme=f),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Тема проверки"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Информация"},{default:l(()=>[a(s,{modelValue:e(t).info,"onUpdate:modelValue":r[1]||(r[1]=f=>e(t).info=f),modelModifiers:{trim:!0,lazy:!0},required:"",autoresize:"",placeholder:"Информация"},null,8,["modelValue"])]),_:1}),a(v,{onCancel:i})]),_:1},8,["state"])}}}),Ma={key:0,class:"py-3"},Ba={key:1},Pa={class:"tex-base text-red-800 font-medium"},Aa={key:1},La={key:2,class:"p-3"},Ha={key:1,class:"text-red-800"},qa=M({__name:"InvestigateTab",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["message"],async setup(n,{emit:$}){let c,S;Q(["FormsInvestigationForm","ElementsSkeletonDiv"]);const t=$,p=W(),i=n,u=w(!1),y=w(!1),r=w(!1),m=w(""),_=w({}),s=w([]),{refresh:v,status:g}=([c,S]=J(async()=>se("investigations",async()=>{s.value=await p("/api/items/investigations/"+i.candId)})),c=await c,S(),c);async function f(D){U(),y.value=!0;const{message:b}=await p(`/api/items/investigations/${i.candId}`,{method:"POST",body:D});y.value=!1,await v(),t("message",b)}async function C(D){if(U(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:b}=await p(`/api/items/investigations/${D}`,{method:"DELETE"});await v(),t("message",b)}function I(){U(),v()}function U(){r.value=!1,m.value="",u.value=!1}return(D,b)=>{const B=R,z=Oa,x=te,O=ee,F=ne,H=ae;return o(),k(L,null,[i.editable?(o(),h(B,{key:0,class:"py-3",label:e(u)?"Скрыть форму":"Добавить запись",variant:"link",onClick:b[0]||(b[0]=d=>u.value=!e(u))},null,8,["label"])):T("",!0),a(Z,{name:"slide-fade"},{default:l(()=>[e(u)?(o(),k("div",Ma,[a(x,null,{default:l(()=>[a(z,{"cand-id":i.candId,onCancel:I,onUpdate:f},null,8,["cand-id"])]),_:1})])):T("",!0)]),_:1}),e(s)&&e(s).length?(o(),k("div",Ba,[(o(!0),k(L,null,G(e(s),(d,A)=>(o(),k("div",{key:A,class:"text-sm text-gray-500 dark:text-gray-400 py-1"},[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:4})):(o(),h(x,{key:1},X({header:l(()=>[oe("div",Pa,V("Расследование/проверка ID #"+d.id),1)]),default:l(()=>[e(r)&&e(m)==d.id.toString()?(o(),h(z,{key:0,"cand-id":i.candId,investigation:d,onCancel:I,onUpdate:f},null,8,["cand-id","investigation"])):(o(),k("div",Aa,[d.theme?(o(),h(F,{key:0,label:"Тема проверки"},{default:l(()=>[E(V(d.theme),1)]),_:2},1024)):T("",!0),d.info?(o(),h(F,{key:1,label:"Информация"},{default:l(()=>[E(V(d.info),1)]),_:2},1024)):T("",!0),a(F,{label:"Сотрудник"},{default:l(()=>[E(V(d.username),1)]),_:2},1024),a(F,{label:"Дата записи"},{default:l(()=>[E(V(e(de)(d.created,"YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024)]))]),_:2},[i.editable&&(!e(r)||e(m)!=d.id.toString())?{name:"footer",fn:l(()=>[a(H,{"cand-id":i.candId,item:"investigations",onUpdate:P=>{_.value=d,m.value=d.id.toString(),r.value=!0},onDelete:P=>C(d.id),onUpgrade:b[1]||(b[1]=P=>e(v)())},null,8,["cand-id","onUpdate","onDelete"])]),key:"0"}:void 0]),1024))]))),128))])):(o(),k("div",La,[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:4})):(o(),k("p",Ha,"Расследования/Проверки не проводились"))]))],64)}}}),ja=M({__name:"InquiryForm",props:{inquiry:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(n,{emit:$}){const c=$,t=Y(n.inquiry);function p(){c("update",t.value),u()}function i(){c("cancel"),u()}function u(){Object.assign(t.value,{info:"",origins:"",initiator:""})}return(y,r)=>{const m=Oe,_=re,s=pe,v=ie,g=ue;return o(),h(g,{state:e(t),onSubmit:le(p,["prevent"])},{default:l(()=>[a(_,{class:"mb-3",label:"Информация*"},{default:l(()=>[a(m,{modelValue:e(t).info,"onUpdate:modelValue":r[0]||(r[0]=f=>e(t).info=f),modelModifiers:{trim:!0,lazy:!0},required:"",autoresize:"",placeholder:"Информация"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Инициатор*"},{default:l(()=>[a(s,{modelValue:e(t).initiator,"onUpdate:modelValue":r[1]||(r[1]=f=>e(t).initiator=f),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Инициатор"},null,8,["modelValue"])]),_:1}),a(_,{class:"mb-3",label:"Источники"},{default:l(()=>[a(s,{modelValue:e(t).origins,"onUpdate:modelValue":r[2]||(r[2]=f=>e(t).origins=f),modelModifiers:{trim:!0,lazy:!0},placeholder:"Источники"},null,8,["modelValue"])]),_:1}),a(v,{onCancel:i})]),_:1},8,["state"])}}}),Ya={key:0,class:"py-3"},Na={key:1},Ga={class:"tex-base text-red-800 font-medium"},Ra={key:1},Wa={key:2,class:"p-3"},Ka={key:1,class:"text-red-800"},Ja=M({__name:"InquiryTab",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["message"],async setup(n,{emit:$}){let c,S;Q(["FormsInquiryForm","ElementsSkeletonDiv"]);const t=$,p=W(),i=n,u=w(!1),y=w(!1),r=w(!1),m=w(""),_=w({}),s=w([]),{refresh:v,status:g}=([c,S]=J(async()=>se("inquiries",async()=>{s.value=await p(`/api/items/inquiries/${i.candId}`)})),c=await c,S(),c);async function f(D){I(),y.value=!0;const{message:b}=await p(`/api/items/inquiries/${i.candId}`,{method:"POST",body:D});y.value=!1,await v(),t("message",b)}async function C(D){if(I(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:b}=await p(`/api/items/inquiries/${D}`,{method:"DELETE"});await v(),t("message",b)}function I(){r.value=!1,m.value="",u.value=!1}function U(){I(),v()}return(D,b)=>{const B=R,z=ja,x=te,O=ee,F=ne,H=ae;return o(),k(L,null,[i.editable?(o(),h(B,{key:0,class:"py-3",label:e(u)?"Скрыть форму":"Добавить запись",variant:"link",onClick:b[0]||(b[0]=d=>u.value=!e(u))},null,8,["label"])):T("",!0),a(Z,{name:"slide-fade"},{default:l(()=>[e(u)?(o(),k("div",Ya,[a(x,null,{default:l(()=>[a(z,{"cand-id":i.candId,onCancel:U,onUpdate:f},null,8,["cand-id"])]),_:1})])):T("",!0)]),_:1}),e(s)&&e(s).length?(o(),k("div",Na,[(o(!0),k(L,null,G(e(s),(d,A)=>(o(),k("div",{key:A,class:"text-sm text-gray-500 dark:text-gray-400 py-1"},[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:6})):(o(),h(x,{key:1},X({header:l(()=>[oe("div",Ga,V("Запрос о сотруднике ID #"+d.id),1)]),default:l(()=>[e(r)&&e(m)==d.id.toString()?(o(),h(z,{key:0,"cand-id":i.candId,inquiry:d,onCancel:U,onUpdate:f},null,8,["cand-id","inquiry"])):(o(),k("div",Ra,[d.info?(o(),h(F,{key:0,label:"Информация"},{default:l(()=>[E(V(d.info),1)]),_:2},1024)):T("",!0),d.initiator?(o(),h(F,{key:1,label:"Иннициатор"},{default:l(()=>[E(V(d.initiator),1)]),_:2},1024)):T("",!0),d.origins?(o(),h(F,{key:2,label:"Источники"},{default:l(()=>[E(V(d.origins),1)]),_:2},1024)):T("",!0),a(F,{label:"Сотрудник"},{default:l(()=>[E(V(d.username),1)]),_:2},1024),a(F,{label:"Дата записи"},{default:l(()=>[E(V(e(de)(d.created,"YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024)]))]),_:2},[i.editable&&(!e(r)||e(m)!=d.id.toString())?{name:"footer",fn:l(()=>[a(H,{"cand-id":i.candId,item:"inquiries",onDelete:P=>C(d.id),onUpdate:P=>{_.value=d,m.value=d.id.toString(),r.value=!0},onUpgrade:b[1]||(b[1]=P=>e(v)())},null,8,["cand-id","onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(o(),k("div",Wa,[e(g)=="pending"||e(y)?(o(),h(O,{key:0,rows:6})):(o(),k("p",Ka,"Запросы о сотруднике не поступали"))]))],64)}}}),Qa=ze(_e.ui.strategy,_e.ui.tabs,Et),Xa=M({components:{UIcon:$e,HTabGroup:ra,HTabList:ua,HTab:da,HTabPanels:ca,HTabPanel:pa},inheritAttrs:!1,props:{modelValue:{type:Number,default:void 0},orientation:{type:String,default:"horizontal",validator:n=>["horizontal","vertical"].includes(n)},defaultIndex:{type:Number,default:0},items:{type:Array,default:()=>[]},unmount:{type:Boolean,default:!1},content:{type:Boolean,default:!0},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(n,{emit:$}){const{ui:c,attrs:S}=Ae("tabs",Y(n,"ui"),Qa,Y(n,"class")),t=w(),p=w([]),i=w(),u=w(n.modelValue||n.defaultIndex);function y(m){var s;const _=(s=p.value[m])==null?void 0:s.$el;_&&i.value&&(i.value.style.top=`${_.offsetTop}px`,i.value.style.left=`${_.offsetLeft}px`,i.value.style.width=`${_.offsetWidth}px`,i.value.style.height=`${_.offsetHeight}px`)}function r(m){u.value=m,$("change",m),n.modelValue!==void 0&&$("update:modelValue",u.value),y(u.value)}return ft(t,()=>{y(u.value)}),Se(()=>n.modelValue,m=>{u.value=m,y(u.value)}),Se(()=>n.items,async()=>{await Ne(),y(u.value)},{deep:!0}),ge(async()=>{await Ne(),y(u.value)}),tt(()=>Qe()),{ui:c,attrs:S,listRef:t,itemRefs:p,markerRef:i,selectedIndex:u,onChange:r}}}),Za={class:"truncate"};function eo(n,$,c,S,t,p){const i=$e,u=ve("HTab"),y=ve("HTabList"),r=ve("HTabPanel"),m=ve("HTabPanels"),_=ve("HTabGroup");return o(),h(_,ye({vertical:n.orientation==="vertical","selected-index":n.selectedIndex,as:"div",class:n.ui.wrapper},n.attrs,{onChange:n.onChange}),{default:l(()=>[a(y,{ref:"listRef",class:N([n.ui.list.base,n.ui.list.background,n.ui.list.rounded,n.ui.list.shadow,n.ui.list.padding,n.ui.list.width,n.orientation==="horizontal"&&n.ui.list.height,n.orientation==="horizontal"&&"inline-grid items-center"]),style:vt([n.orientation==="horizontal"&&`grid-template-columns: repeat(${n.items.length}, minmax(0, 1fr))`])},{default:l(()=>[oe("div",{ref:"markerRef",class:N(n.ui.list.marker.wrapper)},[oe("div",{class:N([n.ui.list.marker.base,n.ui.list.marker.background,n.ui.list.marker.rounded,n.ui.list.marker.shadow])},null,2)],2),(o(!0),k(L,null,G(n.items,(s,v)=>(o(),h(u,{key:v,ref_for:!0,ref:"itemRefs",disabled:s.disabled,as:"template"},{default:l(({selected:g,disabled:f})=>[oe("button",{class:N([n.ui.list.tab.base,n.ui.list.tab.background,n.ui.list.tab.height,n.ui.list.tab.padding,n.ui.list.tab.size,n.ui.list.tab.font,n.ui.list.tab.rounded,n.ui.list.tab.shadow,g?n.ui.list.tab.active:n.ui.list.tab.inactive])},[ce(n.$slots,"icon",{item:s,index:v,selected:g,disabled:f},()=>[s.icon?(o(),h(i,{key:0,name:s.icon,class:N(n.ui.list.tab.icon)},null,8,["name","class"])):T("",!0)]),ce(n.$slots,"default",{item:s,index:v,selected:g,disabled:f},()=>[oe("span",Za,V(s.label),1)])],2)]),_:2},1032,["disabled"]))),128))]),_:3},8,["class","style"]),n.content?(o(),h(m,{key:0,class:N(n.ui.container)},{default:l(()=>[(o(!0),k(L,null,G(n.items,(s,v)=>(o(),h(r,{key:v,class:N(n.ui.base),unmount:n.unmount},{default:l(({selected:g})=>[ce(n.$slots,s.slot||"item",{item:s,index:v,selected:g},()=>[E(V(s.content),1)])]),_:2},1032,["class","unmount"]))),128))]),_:3},8,["class"])):T("",!0)]),_:3},16,["vertical","selected-index","class","onChange"])}const to=Pe(Xa,[["render",eo]]),no={key:0,class:"relative"},ao={class:"absolute bottom-0 right-20"},oo={class:"animate-pulse",style:{width:"30px"}},ho=M({__name:"[id]",async setup(n){let $,c;const S=W(),t=Ut(),p=Le(),i=_t(),u=q(()=>i.params.id),y=w({}),{refresh:r}=([$,c]=J(async()=>Xe("anketa",async()=>{y.value=await S("/api/items/persons/"+u.value)})),$=await $,c(),$),m=[{slot:"anketaTab",label:"Анкета",icon:"i-heroicons-user"},{slot:"checkTab",label:"Проверки",icon:"i-heroicons-check-circle"},{slot:"poligrafTab",label:"Полиграф",icon:"i-heroicons-bolt"},{slot:"investigateTab",label:"Расследования",icon:"i-heroicons-briefcase"},{slot:"inquiryTab",label:"Запросы",icon:"i-heroicons-document-text"}],_={current:{label:"Анкета редактируется текущим пользователем",color:"green"},thirdparty:{label:"Анкета редактируется другим пользователем",color:"red"},others:{label:"Анкета не редактируется пользователями",color:"blue"}},s=q(()=>{if(y.value.editable){if(y.value.user_id==t.value.id)return _.current;if(y.value.user_id!=t.value.id)return _.thirdparty}return _.others}),v=q(()=>y.value.editable&&t.value.role=="user"&&t.value.id==y.value.user_id);async function g(){confirm("Вы действительно хотите включить/выключить режим правки")&&(await S("/api/self/"+u.value),await r())}function f(C){C=="success"?p.add({icon:"i-heroicons-information-circle",title:"Информация",description:"Информация обновлена",color:"primary"}):p.add({icon:"i-heroicons-exclamation-triangle",title:"Внимание",description:"Ошибка обновления информации",color:"red"})}return(C,I)=>{const U=Tt,D=He,b=R,B=bt,z=ya,x=Ua,O=xa,F=qa,H=Ja,d=to;return o(),k("div",null,[a(U,{"cand-id":e(u),editable:e(v),onMessage:f},null,8,["cand-id","editable"]),e(t).role=="user"?(o(),k("div",no,[oe("div",ao,[a(b,{variant:"link",size:"xl",onClick:g},{default:l(()=>[oe("div",oo,[a(D,{color:e(s).color,variant:"solid"},{default:l(()=>[E(V(e(s).label),1)]),_:1},8,["color"])])]),_:1})])])):T("",!0),a(B,{div:"py-3",header:`${e(y).surname} ${e(y).firstname} ${e(y).patronymic?e(y).patronymic:""}`},null,8,["header"]),a(d,{items:m},{anketaTab:l(()=>[a(z,{"cand-id":e(u),editable:e(v),person:e(y),onMessage:f,onUpdate:I[0]||(I[0]=A=>e(r)())},null,8,["cand-id","editable","person"])]),checkTab:l(()=>[a(x,{"cand-id":e(u),editable:e(v),onMessage:f},null,8,["cand-id","editable"])]),poligrafTab:l(()=>[a(O,{"cand-id":e(u),editable:e(v),onMessage:f},null,8,["cand-id","editable"])]),investigateTab:l(()=>[a(F,{"cand-id":e(u),editable:e(v),onMessage:f},null,8,["cand-id","editable"])]),inquiryTab:l(()=>[a(H,{"cand-id":e(u),editable:e(v),onMessage:f},null,8,["cand-id","editable"])]),_:1})])}}});export{ho as default};
