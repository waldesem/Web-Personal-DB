import{_ as fe,a as me,b as be,c as he,d as _e,e as ge,f as ye,g as ke,h as Te,i as Ie,j as xe,k as we,l as $e,m as Pe,n as Se,o as De}from"./Dnyd6BZO.js";import{_ as Ae}from"./8q6nTwcG.js";import{g as C,r as $,J as G,x as I,K as W,L,M as oe,N as Ce,F as K,O as re,P as Y,o as A,i as H,w as v,b,m as Oe,k as te,_ as Ee,l as Z,s as He,v as ae,Q as Re,R as Be,S as z,B as O,T as Fe,a as R,c as Q,E as ne,A as M,C as J,t as X,d as ie,D as ze,U as Ne,h as se,j as E,q as Le}from"./BrjdBAS6.js";import{u as Ue,_ as je}from"./BaLSyn9W.js";import{u as qe,f as ue,o as T,A as U,T as Ve,I as ce,s as Ge,N as le,a as V,b as S,l as Me}from"./CZSkOkuX.js";import{O as N,T as q,i as We,P as B,N as D}from"./DvxpG3w3.js";import{_ as Ke}from"./C65ECaZ4.js";import{d as Qe,a as Je,s as Xe,b as Ye,u as Ze}from"./CfpFGIXT.js";import"./DDvcajor.js";import"./CHkULda6.js";import"./CkmYUSuq.js";import"./CVAfITsI.js";import"./DjPh29BU.js";const et={wrapper:"relative space-y-2",container:"relative w-full",base:"focus:outline-none",list:{base:"relative",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-lg",shadow:"",padding:"p-1",height:"h-10",width:"w-full",marker:{wrapper:"absolute top-[4px] left-[4px] duration-200 ease-out focus:outline-none",base:"w-full h-full",background:"bg-white dark:bg-gray-900",rounded:"rounded-md",shadow:"shadow-sm"},tab:{base:"relative inline-flex items-center justify-center flex-shrink-0 w-full ui-focus-visible:outline-0 ui-focus-visible:ring-2 ui-focus-visible:ring-primary-500 dark:ui-focus-visible:ring-primary-400 ui-not-focus-visible:outline-none focus:outline-none disabled:cursor-not-allowed disabled:opacity-75 transition-colors duration-200 ease-out",background:"",active:"text-gray-900 dark:text-white",inactive:"text-gray-500 dark:text-gray-400",height:"h-8",padding:"px-3",size:"text-sm",font:"font-medium",rounded:"rounded-md",shadow:"",icon:"w-4 h-4 flex-shrink-0 mr-2"}}};function tt(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(i=>setTimeout(()=>{throw i}))}let at=C({props:{onFocus:{type:Function,required:!0}},setup(e){let i=$(!0);return()=>i.value?G(ue,{as:"button",type:"button",features:qe.Focusable,onFocus(d){d.preventDefault();let r,f=50;function l(){var t;if(f--<=0){r&&cancelAnimationFrame(r);return}if((t=e.onFocus)!=null&&t.call(e)){i.value=!1,cancelAnimationFrame(r);return}r=requestAnimationFrame(l)}r=requestAnimationFrame(l)}}):null}});var nt=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(nt||{}),st=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(st||{});let de=Symbol("TabsContext");function j(e){let i=Y(de,null);if(i===null){let d=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,j),d}return i}let ee=Symbol("TabsSSRContext"),lt=C({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:i,attrs:d,emit:r}){var f;let l=$((f=e.selectedIndex)!=null?f:e.defaultIndex),t=$([]),n=$([]),m=I(()=>e.selectedIndex!==null),y=I(()=>m.value?e.selectedIndex:l.value);function p(a){var c;let h=N(o.tabs.value,T),s=N(o.panels.value,T),_=h.filter(x=>{var w;return!((w=T(x))!=null&&w.hasAttribute("disabled"))});if(a<0||a>h.length-1){let x=V(l.value===null?0:Math.sign(a-l.value),{[-1]:()=>1,0:()=>V(Math.sign(a),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),w=V(x,{0:()=>h.indexOf(_[0]),1:()=>h.indexOf(_[_.length-1])});w!==-1&&(l.value=w),o.tabs.value=h,o.panels.value=s}else{let x=h.slice(0,a),w=[...h.slice(a),...x].find(F=>_.includes(F));if(!w)return;let P=(c=h.indexOf(w))!=null?c:o.selectedIndex.value;P===-1&&(P=o.selectedIndex.value),l.value=P,o.tabs.value=h,o.panels.value=s}}let o={selectedIndex:I(()=>{var a,c;return(c=(a=l.value)!=null?a:e.defaultIndex)!=null?c:null}),orientation:I(()=>e.vertical?"vertical":"horizontal"),activation:I(()=>e.manual?"manual":"auto"),tabs:t,panels:n,setSelectedIndex(a){y.value!==a&&r("change",a),m.value||p(a)},registerTab(a){var c;if(t.value.includes(a))return;let h=t.value[l.value];if(t.value.push(a),t.value=N(t.value,T),!m.value){let s=(c=t.value.indexOf(h))!=null?c:l.value;s!==-1&&(l.value=s)}},unregisterTab(a){let c=t.value.indexOf(a);c!==-1&&t.value.splice(c,1)},registerPanel(a){n.value.includes(a)||(n.value.push(a),n.value=N(n.value,T))},unregisterPanel(a){let c=n.value.indexOf(a);c!==-1&&n.value.splice(c,1)}};W(de,o);let u=$({tabs:[],panels:[]}),g=$(!1);L(()=>{g.value=!0}),W(ee,I(()=>g.value?null:u.value));let k=I(()=>e.selectedIndex);return L(()=>{oe([k],()=>{var a;return p((a=e.selectedIndex)!=null?a:e.defaultIndex)},{immediate:!0})}),Ce(()=>{if(!m.value||y.value==null||o.tabs.value.length<=0)return;let a=N(o.tabs.value,T);a.some((c,h)=>T(o.tabs.value[h])!==T(c))&&o.setSelectedIndex(a.findIndex(c=>T(c)===T(o.tabs.value[y.value])))}),()=>{let a={selectedIndex:l.value};return G(K,[t.value.length<=0&&G(at,{onFocus:()=>{for(let c of t.value){let h=T(c);if((h==null?void 0:h.tabIndex)===0)return h.focus(),!0}return!1}}),U({theirProps:{...d,...Ve(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:a,slots:i,attrs:d,name:"TabGroup"})])}}}),ot=C({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:i,slots:d}){let r=j("TabList");return()=>{let f={selectedIndex:r.selectedIndex.value},l={role:"tablist","aria-orientation":r.orientation.value};return U({ourProps:l,theirProps:e,slot:f,attrs:i,slots:d,name:"TabList"})}}}),rt=C({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:i,slots:d,expose:r}){var f;let l=(f=e.id)!=null?f:`headlessui-tabs-tab-${ce()}`,t=j("Tab"),n=$(null);r({el:n,$el:n}),L(()=>t.registerTab(n)),re(()=>t.unregisterTab(n));let m=Y(ee),y=I(()=>{if(m.value){let s=m.value.tabs.indexOf(l);return s===-1?m.value.tabs.push(l)-1:s}return-1}),p=I(()=>{let s=t.tabs.value.indexOf(n);return s===-1?y.value:s}),o=I(()=>p.value===t.selectedIndex.value);function u(s){var _;let x=s();if(x===q.Success&&t.activation.value==="auto"){let w=(_=We(n))==null?void 0:_.activeElement,P=t.tabs.value.findIndex(F=>T(F)===w);P!==-1&&t.setSelectedIndex(P)}return x}function g(s){let _=t.tabs.value.map(x=>T(x)).filter(Boolean);if(s.key===S.Space||s.key===S.Enter){s.preventDefault(),s.stopPropagation(),t.setSelectedIndex(p.value);return}switch(s.key){case S.Home:case S.PageUp:return s.preventDefault(),s.stopPropagation(),u(()=>B(_,D.First));case S.End:case S.PageDown:return s.preventDefault(),s.stopPropagation(),u(()=>B(_,D.Last))}if(u(()=>V(t.orientation.value,{vertical(){return s.key===S.ArrowUp?B(_,D.Previous|D.WrapAround):s.key===S.ArrowDown?B(_,D.Next|D.WrapAround):q.Error},horizontal(){return s.key===S.ArrowLeft?B(_,D.Previous|D.WrapAround):s.key===S.ArrowRight?B(_,D.Next|D.WrapAround):q.Error}}))===q.Success)return s.preventDefault()}let k=$(!1);function a(){var s;k.value||(k.value=!0,!e.disabled&&((s=T(n))==null||s.focus({preventScroll:!0}),t.setSelectedIndex(p.value),tt(()=>{k.value=!1})))}function c(s){s.preventDefault()}let h=Ge(I(()=>({as:e.as,type:i.type})),n);return()=>{var s,_;let x={selected:o.value,disabled:(s=e.disabled)!=null?s:!1},{...w}=e,P={ref:n,onKeydown:g,onMousedown:c,onClick:a,id:l,role:"tab",type:h.value,"aria-controls":(_=T(t.panels.value[p.value]))==null?void 0:_.id,"aria-selected":o.value,tabIndex:o.value?0:-1,disabled:e.disabled?!0:void 0};return U({ourProps:P,theirProps:w,slot:x,attrs:i,slots:d,name:"Tab"})}}}),it=C({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:i,attrs:d}){let r=j("TabPanels");return()=>{let f={selectedIndex:r.selectedIndex.value};return U({theirProps:e,ourProps:{},slot:f,attrs:d,slots:i,name:"TabPanels"})}}}),ut=C({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(e,{attrs:i,slots:d,expose:r}){var f;let l=(f=e.id)!=null?f:`headlessui-tabs-panel-${ce()}`,t=j("TabPanel"),n=$(null);r({el:n,$el:n}),L(()=>t.registerPanel(n)),re(()=>t.unregisterPanel(n));let m=Y(ee),y=I(()=>{if(m.value){let u=m.value.panels.indexOf(l);return u===-1?m.value.panels.push(l)-1:u}return-1}),p=I(()=>{let u=t.panels.value.indexOf(n);return u===-1?y.value:u}),o=I(()=>p.value===t.selectedIndex.value);return()=>{var u;let g={selected:o.value},{tabIndex:k,...a}=e,c={ref:n,id:l,role:"tabpanel","aria-labelledby":(u=T(t.tabs.value[p.value]))==null?void 0:u.id,tabIndex:o.value?k:-1};return!o.value&&e.unmount&&!e.static?G(ue,{as:"span","aria-hidden":!0,...c}):U({ourProps:c,theirProps:a,slot:g,attrs:i,slots:d,features:le.Static|le.RenderStrategy,visible:o.value,name:"TabPanel"})}}});const ct=C({__name:"AnketaTab",setup(e){const i=[{label:"Резюме",icon:"i-heroicons-user",defaultOpen:!0,slot:"resume"},{label:"Должности",icon:"i-heroicons-briefcase",slot:"staff"},{label:"Образование",icon:"i-heroicons-academic-cap",slot:"education"},{label:"Работа",icon:"i-heroicons-briefcase",slot:"work"},{label:"Документы",icon:"i-heroicons-document-text",slot:"document"},{label:"Адреса",icon:"i-heroicons-home-modern",slot:"address"},{label:"Контакты",icon:"i-heroicons-phone",slot:"contact"},{label:"Аффилированные",icon:"i-heroicons-user-group",slot:"affiliation"},{label:"Изменения имени",icon:"i-heroicons-archive-box-arrow-down",slot:"prev"},{label:"Связанные",icon:"i-heroicons-user-group",slot:"relate"}];return(d,r)=>{const f=fe,l=me,t=be,n=he,m=_e,y=ge,p=ye,o=ke,u=Te,g=Ie,k=xe;return A(),H(k,{items:i,size:"lg",multiple:""},{resume:v(()=>[b(f)]),staff:v(()=>[b(l)]),education:v(()=>[b(t)]),work:v(()=>[b(n)]),document:v(()=>[b(m)]),address:v(()=>[b(y)]),contact:v(()=>[b(p)]),affiliation:v(()=>[b(o)]),prev:v(()=>[b(u)]),relate:v(()=>[b(g)]),_:1})}}}),dt=Oe(te.ui.strategy,te.ui.tabs,et),pt=C({components:{UIcon:Z,HTabGroup:lt,HTabList:ot,HTab:rt,HTabPanels:it,HTabPanel:ut},inheritAttrs:!1,props:{modelValue:{type:Number,default:void 0},orientation:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},defaultIndex:{type:Number,default:0},items:{type:Array,default:()=>[]},unmount:{type:Boolean,default:!1},content:{type:Boolean,default:!0},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:i}){const{ui:d,attrs:r}=He("tabs",ae(e,"ui"),dt,ae(e,"class")),f=$(),l=$([]),t=$(),n=$(e.modelValue||e.defaultIndex);function m(p){var u;const o=(u=l.value[p])==null?void 0:u.$el;o&&t.value&&(t.value.style.top=`${o.offsetTop}px`,t.value.style.left=`${o.offsetLeft}px`,t.value.style.width=`${o.offsetWidth}px`,t.value.style.height=`${o.offsetHeight}px`)}function y(p){n.value=p,i("change",p),e.modelValue!==void 0&&i("update:modelValue",n.value),m(n.value)}return Re(f,()=>{m(n.value)}),oe(()=>e.modelValue,p=>{n.value=p,m(n.value)}),L(async()=>{await Be(),m(n.value)}),Me(()=>Ue("$39Q85lIXra")),{ui:d,attrs:r,listRef:f,itemRefs:l,markerRef:t,selectedIndex:n,onChange:y}}}),vt={class:"truncate"};function ft(e,i,d,r,f,l){const t=Z,n=z("HTab"),m=z("HTabList"),y=z("HTabPanel"),p=z("HTabPanels"),o=z("HTabGroup");return A(),H(o,ze({vertical:e.orientation==="vertical","selected-index":e.selectedIndex,as:"div",class:e.ui.wrapper},e.attrs,{onChange:e.onChange}),{default:v(()=>[b(m,{ref:"listRef",class:O([e.ui.list.base,e.ui.list.background,e.ui.list.rounded,e.ui.list.shadow,e.ui.list.padding,e.ui.list.width,e.orientation==="horizontal"&&e.ui.list.height,e.orientation==="horizontal"&&"inline-grid items-center"]),style:Fe([e.orientation==="horizontal"&&`grid-template-columns: repeat(${e.items.length}, minmax(0, 1fr))`])},{default:v(()=>[R("div",{ref:"markerRef",class:O(e.ui.list.marker.wrapper)},[R("div",{class:O([e.ui.list.marker.base,e.ui.list.marker.background,e.ui.list.marker.rounded,e.ui.list.marker.shadow])},null,2)],2),(A(!0),Q(K,null,ne(e.items,(u,g)=>(A(),H(n,{key:g,ref_for:!0,ref:"itemRefs",disabled:u.disabled,as:"template"},{default:v(({selected:k,disabled:a})=>[R("button",{class:O([e.ui.list.tab.base,e.ui.list.tab.background,e.ui.list.tab.height,e.ui.list.tab.padding,e.ui.list.tab.size,e.ui.list.tab.font,e.ui.list.tab.rounded,e.ui.list.tab.shadow,k?e.ui.list.tab.active:e.ui.list.tab.inactive])},[M(e.$slots,"icon",{item:u,index:g,selected:k,disabled:a},()=>[u.icon?(A(),H(t,{key:0,name:u.icon,class:O(e.ui.list.tab.icon)},null,8,["name","class"])):J("",!0)]),M(e.$slots,"default",{item:u,index:g,selected:k,disabled:a},()=>[R("span",vt,X(u.label),1)])],2)]),_:2},1032,["disabled"]))),128))]),_:3},8,["class","style"]),e.content?(A(),H(p,{key:0,class:O(e.ui.container)},{default:v(()=>[(A(!0),Q(K,null,ne(e.items,(u,g)=>(A(),H(y,{key:g,class:O(e.ui.base),unmount:e.unmount},{default:v(({selected:k})=>[M(e.$slots,u.slot||"item",{item:u,index:g,selected:k},()=>[ie(X(u.content),1)])]),_:2},1032,["class","unmount"]))),128))]),_:3},8,["class"])):J("",!0)]),_:3},16,["vertical","selected-index","class","onChange"])}const mt=Ee(pt,[["render",ft]]),bt={key:0,class:"relative"},ht={class:"absolute bottom-0 right-20"},_t={class:"animate-pulse",style:{width:"30px"}},gt={class:"absolute top-0 right-10"},Ht=C({__name:"[id]",async setup(e){let i,d;const r=Qe(),f=Je(),l=Xe(),t=Ne();r.share.value.candId=t.params.id;const n=Ze();r.anketa.value=([i,d]=se(()=>n(`${Ye}/profile/${r.share.value.candId}`)),i=await i,d(),i),[i,d]=se(()=>r.getImage()),await i,d();const m=[{slot:"anketaTab",label:"Анкета",icon:"i-heroicons-user"},{slot:"checkTab",label:"Проверки",icon:"i-heroicons-check-circle"},{slot:"poligrafTab",label:"Полиграф",icon:"i-heroicons-bolt"},{slot:"investigateTab",label:"Расследования",icon:"i-heroicons-briefcase"},{slot:"inquiryTab",label:"Запросы",icon:"i-heroicons-document-text"}],y={current:{label:"Анкета редактируется текущим пользователем",color:"green"},thirdparty:{label:"Анкета редактируется другим пользователем",color:"red"},others:{label:"Анкета не редактируется пользователями",color:"blue"}},p=I(()=>{if(r.anketa.value.persons.editable){if(r.anketa.value.persons.user_id==l.user.value.userId)return y.current;if(r.anketa.value.persons.user_id!=l.user.value.userId)return y.thirdparty}return y.others}),o=I(()=>r.anketa.value.persons.editable&&l.user.value.role==f.classes.value.roles.user&&l.user.value.userId==r.anketa.value.persons.user_id);return W("editState",o),(u,g)=>{const k=we,a=Ae,c=Le,h=Z,s=je,_=ct,x=$e,w=Pe,P=Se,F=De,pe=mt,ve=Ke;return A(),H(ve,null,{default:v(()=>[b(k),E(l).user.value.role==E(f).classes.value.roles.user?(A(),Q("div",bt,[R("div",ht,[b(c,{variant:"link",size:"xl",onClick:g[0]||(g[0]=yt=>E(r).getItem("persons","self"))},{default:v(()=>[R("div",_t,[b(a,{color:E(p).color,variant:"solid"},{default:v(()=>[ie(X(E(p).label),1)]),_:1},8,["color"])])]),_:1})]),R("div",gt,[b(c,{variant:"link",size:"xl",to:"/profile/print"},{default:v(()=>[b(h,{name:"i-heroicons-printer",class:"w-8 h-8"})]),_:1})])])):J("",!0),b(s,{div:"py-6",header:`${E(r).anketa.value.persons.surname} ${E(r).anketa.value.persons.firstname}`},null,8,["header"]),b(pe,{items:m,class:"w-full"},{anketaTab:v(()=>[b(_)]),checkTab:v(()=>[b(x)]),poligrafTab:v(()=>[b(w)]),investigateTab:v(()=>[b(P)]),inquiryTab:v(()=>[b(F)]),_:1})]),_:1})}}});export{Ht as default};
