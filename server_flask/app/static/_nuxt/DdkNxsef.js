import{_ as fe,a as me,b as be,c as he,d as _e,e as ge,f as ye,g as ke,h as Te,i as Ie,j as xe,k as we,l as $e,m as Pe,n as Se,o as De}from"./C9wWuFE4.js";import{_ as Ae}from"./B44f1S5t.js";import{g as O,r as $,J as G,x as I,K as W,L,M as oe,N as Ce,F as K,O as re,P as Y,o as C,i as H,w as v,b,m as Oe,k as te,_ as Ee,l as Z,s as He,v as ae,Q as Re,R as Be,S as z,B as E,T as Fe,a as R,c as Q,E as ne,A as M,C as J,t as X,d as ie,D as ze,U as Ne,h as se,j as S,q as Le}from"./-i46ahqV.js";import{u as Ue,_ as je}from"./CX3kPmFP.js";import{u as qe,f as ue,o as T,A as U,T as Ve,I as ce,s as Ge,N as le,a as V,b as D,l as Me}from"./BSOACscD.js";import{O as N,T as q,i as We,P as B,N as A}from"./yC3XuBp2.js";import{_ as Ke}from"./Ch2U0aYy.js";import{d as Qe,a as Je,s as Xe,b as Ye,u as Ze}from"./DwuX9ns-.js";import"./BOC5yqqm.js";import"./OoTJBAmz.js";import"./Dwy2aisJ.js";import"./BdOqOSkm.js";import"./DtOPAnGk.js";const et={wrapper:"relative space-y-2",container:"relative w-full",base:"focus:outline-none",list:{base:"relative",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-lg",shadow:"",padding:"p-1",height:"h-10",width:"w-full",marker:{wrapper:"absolute top-[4px] left-[4px] duration-200 ease-out focus:outline-none",base:"w-full h-full",background:"bg-white dark:bg-gray-900",rounded:"rounded-md",shadow:"shadow-sm"},tab:{base:"relative inline-flex items-center justify-center flex-shrink-0 w-full ui-focus-visible:outline-0 ui-focus-visible:ring-2 ui-focus-visible:ring-primary-500 dark:ui-focus-visible:ring-primary-400 ui-not-focus-visible:outline-none focus:outline-none disabled:cursor-not-allowed disabled:opacity-75 transition-colors duration-200 ease-out",background:"",active:"text-gray-900 dark:text-white",inactive:"text-gray-500 dark:text-gray-400",height:"h-8",padding:"px-3",size:"text-sm",font:"font-medium",rounded:"rounded-md",shadow:"",icon:"w-4 h-4 flex-shrink-0 mr-2"}}};function tt(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(i=>setTimeout(()=>{throw i}))}let at=O({props:{onFocus:{type:Function,required:!0}},setup(e){let i=$(!0);return()=>i.value?G(ue,{as:"button",type:"button",features:qe.Focusable,onFocus(d){d.preventDefault();let l,f=50;function o(){var t;if(f--<=0){l&&cancelAnimationFrame(l);return}if((t=e.onFocus)!=null&&t.call(e)){i.value=!1,cancelAnimationFrame(l);return}l=requestAnimationFrame(o)}l=requestAnimationFrame(o)}}):null}});var nt=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(nt||{}),st=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(st||{});let de=Symbol("TabsContext");function j(e){let i=Y(de,null);if(i===null){let d=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,j),d}return i}let ee=Symbol("TabsSSRContext"),lt=O({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:i,attrs:d,emit:l}){var f;let o=$((f=e.selectedIndex)!=null?f:e.defaultIndex),t=$([]),n=$([]),m=I(()=>e.selectedIndex!==null),y=I(()=>m.value?e.selectedIndex:o.value);function p(a){var c;let h=N(r.tabs.value,T),s=N(r.panels.value,T),_=h.filter(x=>{var w;return!((w=T(x))!=null&&w.hasAttribute("disabled"))});if(a<0||a>h.length-1){let x=V(o.value===null?0:Math.sign(a-o.value),{[-1]:()=>1,0:()=>V(Math.sign(a),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),w=V(x,{0:()=>h.indexOf(_[0]),1:()=>h.indexOf(_[_.length-1])});w!==-1&&(o.value=w),r.tabs.value=h,r.panels.value=s}else{let x=h.slice(0,a),w=[...h.slice(a),...x].find(F=>_.includes(F));if(!w)return;let P=(c=h.indexOf(w))!=null?c:r.selectedIndex.value;P===-1&&(P=r.selectedIndex.value),o.value=P,r.tabs.value=h,r.panels.value=s}}let r={selectedIndex:I(()=>{var a,c;return(c=(a=o.value)!=null?a:e.defaultIndex)!=null?c:null}),orientation:I(()=>e.vertical?"vertical":"horizontal"),activation:I(()=>e.manual?"manual":"auto"),tabs:t,panels:n,setSelectedIndex(a){y.value!==a&&l("change",a),m.value||p(a)},registerTab(a){var c;if(t.value.includes(a))return;let h=t.value[o.value];if(t.value.push(a),t.value=N(t.value,T),!m.value){let s=(c=t.value.indexOf(h))!=null?c:o.value;s!==-1&&(o.value=s)}},unregisterTab(a){let c=t.value.indexOf(a);c!==-1&&t.value.splice(c,1)},registerPanel(a){n.value.includes(a)||(n.value.push(a),n.value=N(n.value,T))},unregisterPanel(a){let c=n.value.indexOf(a);c!==-1&&n.value.splice(c,1)}};W(de,r);let u=$({tabs:[],panels:[]}),g=$(!1);L(()=>{g.value=!0}),W(ee,I(()=>g.value?null:u.value));let k=I(()=>e.selectedIndex);return L(()=>{oe([k],()=>{var a;return p((a=e.selectedIndex)!=null?a:e.defaultIndex)},{immediate:!0})}),Ce(()=>{if(!m.value||y.value==null||r.tabs.value.length<=0)return;let a=N(r.tabs.value,T);a.some((c,h)=>T(r.tabs.value[h])!==T(c))&&r.setSelectedIndex(a.findIndex(c=>T(c)===T(r.tabs.value[y.value])))}),()=>{let a={selectedIndex:o.value};return G(K,[t.value.length<=0&&G(at,{onFocus:()=>{for(let c of t.value){let h=T(c);if((h==null?void 0:h.tabIndex)===0)return h.focus(),!0}return!1}}),U({theirProps:{...d,...Ve(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:a,slots:i,attrs:d,name:"TabGroup"})])}}}),ot=O({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:i,slots:d}){let l=j("TabList");return()=>{let f={selectedIndex:l.selectedIndex.value},o={role:"tablist","aria-orientation":l.orientation.value};return U({ourProps:o,theirProps:e,slot:f,attrs:i,slots:d,name:"TabList"})}}}),rt=O({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:i,slots:d,expose:l}){var f;let o=(f=e.id)!=null?f:`headlessui-tabs-tab-${ce()}`,t=j("Tab"),n=$(null);l({el:n,$el:n}),L(()=>t.registerTab(n)),re(()=>t.unregisterTab(n));let m=Y(ee),y=I(()=>{if(m.value){let s=m.value.tabs.indexOf(o);return s===-1?m.value.tabs.push(o)-1:s}return-1}),p=I(()=>{let s=t.tabs.value.indexOf(n);return s===-1?y.value:s}),r=I(()=>p.value===t.selectedIndex.value);function u(s){var _;let x=s();if(x===q.Success&&t.activation.value==="auto"){let w=(_=We(n))==null?void 0:_.activeElement,P=t.tabs.value.findIndex(F=>T(F)===w);P!==-1&&t.setSelectedIndex(P)}return x}function g(s){let _=t.tabs.value.map(x=>T(x)).filter(Boolean);if(s.key===D.Space||s.key===D.Enter){s.preventDefault(),s.stopPropagation(),t.setSelectedIndex(p.value);return}switch(s.key){case D.Home:case D.PageUp:return s.preventDefault(),s.stopPropagation(),u(()=>B(_,A.First));case D.End:case D.PageDown:return s.preventDefault(),s.stopPropagation(),u(()=>B(_,A.Last))}if(u(()=>V(t.orientation.value,{vertical(){return s.key===D.ArrowUp?B(_,A.Previous|A.WrapAround):s.key===D.ArrowDown?B(_,A.Next|A.WrapAround):q.Error},horizontal(){return s.key===D.ArrowLeft?B(_,A.Previous|A.WrapAround):s.key===D.ArrowRight?B(_,A.Next|A.WrapAround):q.Error}}))===q.Success)return s.preventDefault()}let k=$(!1);function a(){var s;k.value||(k.value=!0,!e.disabled&&((s=T(n))==null||s.focus({preventScroll:!0}),t.setSelectedIndex(p.value),tt(()=>{k.value=!1})))}function c(s){s.preventDefault()}let h=Ge(I(()=>({as:e.as,type:i.type})),n);return()=>{var s,_;let x={selected:r.value,disabled:(s=e.disabled)!=null?s:!1},{...w}=e,P={ref:n,onKeydown:g,onMousedown:c,onClick:a,id:o,role:"tab",type:h.value,"aria-controls":(_=T(t.panels.value[p.value]))==null?void 0:_.id,"aria-selected":r.value,tabIndex:r.value?0:-1,disabled:e.disabled?!0:void 0};return U({ourProps:P,theirProps:w,slot:x,attrs:i,slots:d,name:"Tab"})}}}),it=O({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:i,attrs:d}){let l=j("TabPanels");return()=>{let f={selectedIndex:l.selectedIndex.value};return U({theirProps:e,ourProps:{},slot:f,attrs:d,slots:i,name:"TabPanels"})}}}),ut=O({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(e,{attrs:i,slots:d,expose:l}){var f;let o=(f=e.id)!=null?f:`headlessui-tabs-panel-${ce()}`,t=j("TabPanel"),n=$(null);l({el:n,$el:n}),L(()=>t.registerPanel(n)),re(()=>t.unregisterPanel(n));let m=Y(ee),y=I(()=>{if(m.value){let u=m.value.panels.indexOf(o);return u===-1?m.value.panels.push(o)-1:u}return-1}),p=I(()=>{let u=t.panels.value.indexOf(n);return u===-1?y.value:u}),r=I(()=>p.value===t.selectedIndex.value);return()=>{var u;let g={selected:r.value},{tabIndex:k,...a}=e,c={ref:n,id:o,role:"tabpanel","aria-labelledby":(u=T(t.tabs.value[p.value]))==null?void 0:u.id,tabIndex:r.value?k:-1};return!r.value&&e.unmount&&!e.static?G(ue,{as:"span","aria-hidden":!0,...c}):U({ourProps:c,theirProps:a,slot:g,attrs:i,slots:d,features:le.Static|le.RenderStrategy,visible:r.value,name:"TabPanel"})}}});const ct=O({__name:"AnketaTab",setup(e){const i=[{label:"Резюме",icon:"i-heroicons-user",defaultOpen:!0,slot:"resume"},{label:"Должности",icon:"i-heroicons-briefcase",slot:"staff"},{label:"Образование",icon:"i-heroicons-academic-cap",slot:"education"},{label:"Работа",icon:"i-heroicons-briefcase",slot:"work"},{label:"Документы",icon:"i-heroicons-document-text",slot:"document"},{label:"Адреса",icon:"i-heroicons-home-modern",slot:"address"},{label:"Контакты",icon:"i-heroicons-phone",slot:"contact"},{label:"Аффилированные",icon:"i-heroicons-user-group",slot:"affiliation"},{label:"Изменения имени",icon:"i-heroicons-archive-box-arrow-down",slot:"prev"},{label:"Связанные",icon:"i-heroicons-user-group",slot:"relate"}];return(d,l)=>{const f=fe,o=me,t=be,n=he,m=_e,y=ge,p=ye,r=ke,u=Te,g=Ie,k=xe;return C(),H(k,{items:i,size:"lg",multiple:""},{resume:v(()=>[b(f)]),staff:v(()=>[b(o)]),education:v(()=>[b(t)]),work:v(()=>[b(n)]),document:v(()=>[b(m)]),address:v(()=>[b(y)]),contact:v(()=>[b(p)]),affiliation:v(()=>[b(r)]),prev:v(()=>[b(u)]),relate:v(()=>[b(g)]),_:1})}}}),dt=Oe(te.ui.strategy,te.ui.tabs,et),pt=O({components:{UIcon:Z,HTabGroup:lt,HTabList:ot,HTab:rt,HTabPanels:it,HTabPanel:ut},inheritAttrs:!1,props:{modelValue:{type:Number,default:void 0},orientation:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},defaultIndex:{type:Number,default:0},items:{type:Array,default:()=>[]},unmount:{type:Boolean,default:!1},content:{type:Boolean,default:!0},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:i}){const{ui:d,attrs:l}=He("tabs",ae(e,"ui"),dt,ae(e,"class")),f=$(),o=$([]),t=$(),n=$(e.modelValue||e.defaultIndex);function m(p){var u;const r=(u=o.value[p])==null?void 0:u.$el;r&&t.value&&(t.value.style.top=`${r.offsetTop}px`,t.value.style.left=`${r.offsetLeft}px`,t.value.style.width=`${r.offsetWidth}px`,t.value.style.height=`${r.offsetHeight}px`)}function y(p){n.value=p,i("change",p),e.modelValue!==void 0&&i("update:modelValue",n.value),m(n.value)}return Re(f,()=>{m(n.value)}),oe(()=>e.modelValue,p=>{n.value=p,m(n.value)}),L(async()=>{await Be(),m(n.value)}),Me(()=>Ue("$39Q85lIXra")),{ui:d,attrs:l,listRef:f,itemRefs:o,markerRef:t,selectedIndex:n,onChange:y}}}),vt={class:"truncate"};function ft(e,i,d,l,f,o){const t=Z,n=z("HTab"),m=z("HTabList"),y=z("HTabPanel"),p=z("HTabPanels"),r=z("HTabGroup");return C(),H(r,ze({vertical:e.orientation==="vertical","selected-index":e.selectedIndex,as:"div",class:e.ui.wrapper},e.attrs,{onChange:e.onChange}),{default:v(()=>[b(m,{ref:"listRef",class:E([e.ui.list.base,e.ui.list.background,e.ui.list.rounded,e.ui.list.shadow,e.ui.list.padding,e.ui.list.width,e.orientation==="horizontal"&&e.ui.list.height,e.orientation==="horizontal"&&"inline-grid items-center"]),style:Fe([e.orientation==="horizontal"&&`grid-template-columns: repeat(${e.items.length}, minmax(0, 1fr))`])},{default:v(()=>[R("div",{ref:"markerRef",class:E(e.ui.list.marker.wrapper)},[R("div",{class:E([e.ui.list.marker.base,e.ui.list.marker.background,e.ui.list.marker.rounded,e.ui.list.marker.shadow])},null,2)],2),(C(!0),Q(K,null,ne(e.items,(u,g)=>(C(),H(n,{key:g,ref_for:!0,ref:"itemRefs",disabled:u.disabled,as:"template"},{default:v(({selected:k,disabled:a})=>[R("button",{class:E([e.ui.list.tab.base,e.ui.list.tab.background,e.ui.list.tab.height,e.ui.list.tab.padding,e.ui.list.tab.size,e.ui.list.tab.font,e.ui.list.tab.rounded,e.ui.list.tab.shadow,k?e.ui.list.tab.active:e.ui.list.tab.inactive])},[M(e.$slots,"icon",{item:u,index:g,selected:k,disabled:a},()=>[u.icon?(C(),H(t,{key:0,name:u.icon,class:E(e.ui.list.tab.icon)},null,8,["name","class"])):J("",!0)]),M(e.$slots,"default",{item:u,index:g,selected:k,disabled:a},()=>[R("span",vt,X(u.label),1)])],2)]),_:2},1032,["disabled"]))),128))]),_:3},8,["class","style"]),e.content?(C(),H(p,{key:0,class:E(e.ui.container)},{default:v(()=>[(C(!0),Q(K,null,ne(e.items,(u,g)=>(C(),H(y,{key:g,class:E(e.ui.base),unmount:e.unmount},{default:v(({selected:k})=>[M(e.$slots,u.slot||"item",{item:u,index:g,selected:k},()=>[ie(X(u.content),1)])]),_:2},1032,["class","unmount"]))),128))]),_:3},8,["class"])):J("",!0)]),_:3},16,["vertical","selected-index","class","onChange"])}const mt=Ee(pt,[["render",ft]]),bt={key:0,class:"relative"},ht={class:"absolute top-0 right-20"},_t={class:"animate-pulse",style:{width:"30px"}},gt={class:"absolute bottom-10 right-10"},Ht=O({__name:"[id]",async setup(e){let i,d;const l=Qe(),f=Je(),o=Xe(),t=Ne();l.share.value.candId=t.params.id;const n=Ze();l.anketa.value=([i,d]=se(()=>n(`${Ye}/profile/${l.share.value.candId}`)),i=await i,d(),i),[i,d]=se(()=>l.getImage()),await i,d();const m=[{slot:"anketaTab",label:"Анкета",icon:"i-heroicons-user"},{slot:"checkTab",label:"Проверки",icon:"i-heroicons-check-circle"},{slot:"poligrafTab",label:"Полиграф",icon:"i-heroicons-bolt"},{slot:"investigateTab",label:"Расследования",icon:"i-heroicons-briefcase"},{slot:"inquiryTab",label:"Запросы",icon:"i-heroicons-document-text"}],y={current:{label:"Анкета редактируется текущим пользователем",color:"green"},thirdparty:{label:"Анкета редактируется другим пользователем",color:"red"},others:{label:"Анкета не редактируется пользователями",color:"blue"}},p=I(()=>{if(l.anketa.value.persons.editable){if(l.anketa.value.persons.user_id==o.user.value.userId)return y.current;if(l.anketa.value.persons.user_id!=o.user.value.userId)return y.thirdparty}return y.others}),r=I(()=>l.anketa.value.persons.editable&&o.user.value.role==f.classes.value.roles.user&&o.user.value.userId==l.anketa.value.persons.user_id);return W("editState",r),(u,g)=>{const k=we,a=Ae,c=Le,h=Z,s=je,_=ct,x=$e,w=Pe,P=Se,F=De,pe=mt,ve=Ke;return C(),H(ve,null,{default:v(()=>[b(k),S(o).user.value.role==S(f).classes.value.roles.user?(C(),Q("div",bt,[R("div",ht,[b(c,{variant:"link",size:"xl",color:S(l).anketa.value.persons.editable?"red":"green",onClick:g[0]||(g[0]=yt=>S(l).getItem("persons","self"))},{default:v(()=>[R("div",_t,[b(a,{color:S(p).color,variant:"solid"},{default:v(()=>[ie(X(S(p).label),1)]),_:1},8,["color"])])]),_:1},8,["color"])]),R("div",gt,[b(c,{variant:"link",size:"xl",to:"/profile/print"},{default:v(()=>[b(h,{name:"i-heroicons-printer",class:"w-8 h-8"})]),_:1})])])):J("",!0),b(s,{header:S(l).anketa.value.persons.surname+" "+S(l).anketa.value.persons.firstname+" "+S(l).anketa.value.persons.patronymic?S(l).anketa.value.persons.patronymic:""},null,8,["header"]),b(pe,{items:m,class:"w-full"},{anketaTab:v(()=>[b(_)]),checkTab:v(()=>[b(x)]),poligrafTab:v(()=>[b(w)]),investigateTab:v(()=>[b(P)]),inquiryTab:v(()=>[b(F)]),_:1})]),_:1})}}});export{Ht as default};
