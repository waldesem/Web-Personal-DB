import{b as Te,_ as Ce,a as Pe}from"./B56mXhHt.js";import{_ as Ae}from"./BDDMBSA7.js";import{r as $,a6 as ye,d as U,k as C,a4 as Re,T as _e,a5 as Oe,af as H,a7 as Fe,m as re,f as B,_ as se,j as ue,t as q,l as ke,q as ie,o as w,c as P,s as Z,A as z,B as O,z as V,ao as Ne,g as we,h as Ie,N as Ue,a9 as pe,ab as Ee,ap as je,ad as G,v as j,e as y,a as _,x as R,b as D,ag as ze,V as Me,y as L,F as ae,C as ne,al as Be,a3 as Se,H as Ve,w as Le,u as h,D as me,i as He}from"./Do9hLr1B.js";import{_ as Ke}from"./DUV3ZEuP.js";import{g as qe,o as x,w as Ze,k as Je,t as We,a as Qe,b as X,A as Y,i as de,s as Ge,l as Xe,N as fe,c as S,v as Ye,h as ve,_ as xe,O as et,u as tt,j as at}from"./DGsFwNa9.js";import{w as nt}from"./CUOQ-jL4.js";import{_ as lt}from"./llIBVRuO.js";import{_ as ot}from"./BA5DwWSI.js";import{u as rt}from"./BAbbnpqZ.js";import{a as st}from"./U5XsKBNl.js";import{d as ut}from"./Bbw14XCe.js";import"./3140Yg6G.js";const it={wrapper:"relative inline-flex items-center justify-center flex-shrink-0",base:"absolute rounded-full ring-1 ring-white dark:ring-gray-900 flex items-center justify-center text-white dark:text-gray-900 font-medium whitespace-nowrap",background:"bg-{color}-500 dark:bg-{color}-400",position:{"top-right":"top-0 right-0","bottom-right":"bottom-0 right-0","top-left":"top-0 left-0","bottom-left":"bottom-0 left-0"},translate:{"top-right":"-translate-y-1/2 translate-x-1/2 transform","bottom-right":"translate-y-1/2 translate-x-1/2 transform","top-left":"-translate-y-1/2 -translate-x-1/2 transform","bottom-left":"translate-y-1/2 -translate-x-1/2 transform"},size:{"3xs":"h-[4px] min-w-[4px] text-[4px] p-px","2xs":"h-[5px] min-w-[5px] text-[5px] p-px",xs:"h-1.5 min-w-[0.375rem] text-[6px] p-px",sm:"h-2 min-w-[0.5rem] text-[7px] p-0.5",md:"h-2.5 min-w-[0.625rem] text-[8px] p-0.5",lg:"h-3 min-w-[0.75rem] text-[10px] p-0.5",xl:"h-3.5 min-w-[0.875rem] text-[11px] p-1","2xl":"h-4 min-w-[1rem] text-[12px] p-1","3xl":"h-5 min-w-[1.25rem] text-[14px] p-1"},default:{size:"sm",color:"primary",position:"top-right",inset:!1}},dt={base:"inline-flex items-center justify-center text-gray-900 dark:text-white",padding:"px-1",size:{xs:"h-4 min-w-[16px] text-[10px]",sm:"h-5 min-w-[20px] text-[11px]",md:"h-6 min-w-[24px] text-[12px]"},rounded:"rounded",font:"font-medium font-sans",background:"bg-gray-100 dark:bg-gray-800",ring:"ring-1 ring-gray-300 dark:ring-gray-700 ring-inset",default:{size:"sm"}};function ge(e){return[e.screenX,e.screenY]}function ct(){let e=$([-1,-1]);return{wasMoved(l){let o=ge(l);return e.value[0]===o[0]&&e.value[1]===o[1]?!1:(e.value=o,!0)},update(l){e.value=ge(l)}}}function pt({container:e,accept:l,walk:o,enabled:d}){ye(()=>{let c=e.value;if(!c||d!==void 0&&!d.value)return;let t=qe(e);if(!t)return;let a=Object.assign(f=>l(f),{acceptNode:l}),u=t.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,a,!1);for(;u.nextNode();)o(u.currentNode)})}function mt(e){throw new Error("Unexpected object: "+e)}var T=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(T||{});function ft(e,l){let o=l.resolveItems();if(o.length<=0)return null;let d=l.resolveActiveIndex(),c=d??-1;switch(e.focus){case 0:{for(let t=0;t<o.length;++t)if(!l.resolveDisabled(o[t],t,o))return t;return d}case 1:{c===-1&&(c=o.length);for(let t=c-1;t>=0;--t)if(!l.resolveDisabled(o[t],t,o))return t;return d}case 2:{for(let t=c+1;t<o.length;++t)if(!l.resolveDisabled(o[t],t,o))return t;return d}case 3:{for(let t=o.length-1;t>=0;--t)if(!l.resolveDisabled(o[t],t,o))return t;return d}case 4:{for(let t=0;t<o.length;++t)if(l.resolveId(o[t],t,o)===e.id)return t;return d}case 5:return null;default:mt(e)}}let be=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function he(e){var l,o;let d=(l=e.innerText)!=null?l:"",c=e.cloneNode(!0);if(!(c instanceof HTMLElement))return d;let t=!1;for(let u of c.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))u.remove(),t=!0;let a=t?(o=c.innerText)!=null?o:"":d;return be.test(a)&&(a=a.replace(be,"")),a}function vt(e){let l=e.getAttribute("aria-label");if(typeof l=="string")return l.trim();let o=e.getAttribute("aria-labelledby");if(o){let d=o.split(" ").map(c=>{let t=document.getElementById(c);if(t){let a=t.getAttribute("aria-label");return typeof a=="string"?a.trim():he(t).trim()}return null}).filter(Boolean);if(d.length>0)return d.join(", ")}return he(e).trim()}function gt(e){let l=$(""),o=$("");return()=>{let d=x(e);if(!d)return"";let c=d.innerText;if(l.value===c)return o.value;let t=vt(d).trim().toLowerCase();return l.value=c,o.value=t,t}}var bt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(bt||{}),ht=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ht||{});function yt(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let $e=Symbol("MenuContext");function ee(e){let l=Fe($e,null);if(l===null){let o=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,ee),o}return l}let _t=U({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:l,attrs:o}){let d=$(1),c=$(null),t=$(null),a=$([]),u=$(""),f=$(null),b=$(1);function M(n=v=>v){let v=f.value!==null?a.value[f.value]:null,i=et(n(a.value.slice()),p=>x(p.dataRef.domRef)),s=v?i.indexOf(v):null;return s===-1&&(s=null),{items:i,activeItemIndex:s}}let g={menuState:d,buttonRef:c,itemsRef:t,items:a,searchQuery:u,activeItemIndex:f,activationTrigger:b,closeMenu:()=>{d.value=1,f.value=null},openMenu:()=>d.value=0,goToItem(n,v,i){let s=M(),p=ft(n===T.Specific?{focus:T.Specific,id:v}:{focus:n},{resolveItems:()=>s.items,resolveActiveIndex:()=>s.activeItemIndex,resolveId:r=>r.id,resolveDisabled:r=>r.dataRef.disabled});u.value="",f.value=p,b.value=i??1,a.value=s.items},search(n){let v=u.value!==""?0:1;u.value+=n.toLowerCase();let i=(f.value!==null?a.value.slice(f.value+v).concat(a.value.slice(0,f.value+v)):a.value).find(p=>p.dataRef.textValue.startsWith(u.value)&&!p.dataRef.disabled),s=i?a.value.indexOf(i):-1;s===-1||s===f.value||(f.value=s,b.value=1)},clearSearch(){u.value=""},registerItem(n,v){let i=M(s=>[...s,{id:n,dataRef:v}]);a.value=i.items,f.value=i.activeItemIndex,b.value=1},unregisterItem(n){let v=M(i=>{let s=i.findIndex(p=>p.id===n);return s!==-1&&i.splice(s,1),i});a.value=v.items,f.value=v.activeItemIndex,b.value=1}};return nt([c,t],(n,v)=>{var i;g.closeMenu(),Ze(v,Je.Loose)||(n.preventDefault(),(i=x(c))==null||i.focus())},C(()=>d.value===0)),Re($e,g),We(C(()=>Qe(d.value,{0:X.Open,1:X.Closed}))),()=>{let n={open:d.value===0,close:g.closeMenu};return Y({ourProps:{},theirProps:e,slot:n,slots:l,attrs:o,name:"Menu"})}}}),kt=U({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:l,slots:o,expose:d}){var c;let t=(c=e.id)!=null?c:`headlessui-menu-button-${de()}`,a=ee("MenuButton");d({el:a.buttonRef,$el:a.buttonRef});function u(g){switch(g.key){case S.Space:case S.Enter:case S.ArrowDown:g.preventDefault(),g.stopPropagation(),a.openMenu(),H(()=>{var n;(n=x(a.itemsRef))==null||n.focus({preventScroll:!0}),a.goToItem(T.First)});break;case S.ArrowUp:g.preventDefault(),g.stopPropagation(),a.openMenu(),H(()=>{var n;(n=x(a.itemsRef))==null||n.focus({preventScroll:!0}),a.goToItem(T.Last)});break}}function f(g){switch(g.key){case S.Space:g.preventDefault();break}}function b(g){e.disabled||(a.menuState.value===0?(a.closeMenu(),H(()=>{var n;return(n=x(a.buttonRef))==null?void 0:n.focus({preventScroll:!0})})):(g.preventDefault(),a.openMenu(),yt(()=>{var n;return(n=x(a.itemsRef))==null?void 0:n.focus({preventScroll:!0})})))}let M=Ge(C(()=>({as:e.as,type:l.type})),a.buttonRef);return()=>{var g;let n={open:a.menuState.value===0},{...v}=e,i={ref:a.buttonRef,id:t,type:M.value,"aria-haspopup":"menu","aria-controls":(g=x(a.itemsRef))==null?void 0:g.id,"aria-expanded":a.menuState.value===0,onKeydown:u,onKeyup:f,onClick:b};return Y({ourProps:i,theirProps:v,slot:n,attrs:l,slots:o,name:"MenuButton"})}}}),wt=U({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:l,slots:o,expose:d}){var c;let t=(c=e.id)!=null?c:`headlessui-menu-items-${de()}`,a=ee("MenuItems"),u=$(null);d({el:a.itemsRef,$el:a.itemsRef}),pt({container:C(()=>x(a.itemsRef)),enabled:C(()=>a.menuState.value===0),accept(n){return n.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:n.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(n){n.setAttribute("role","none")}});function f(n){var v;switch(u.value&&clearTimeout(u.value),n.key){case S.Space:if(a.searchQuery.value!=="")return n.preventDefault(),n.stopPropagation(),a.search(n.key);case S.Enter:if(n.preventDefault(),n.stopPropagation(),a.activeItemIndex.value!==null){let i=a.items.value[a.activeItemIndex.value];(v=x(i.dataRef.domRef))==null||v.click()}a.closeMenu(),xe(x(a.buttonRef));break;case S.ArrowDown:return n.preventDefault(),n.stopPropagation(),a.goToItem(T.Next);case S.ArrowUp:return n.preventDefault(),n.stopPropagation(),a.goToItem(T.Previous);case S.Home:case S.PageUp:return n.preventDefault(),n.stopPropagation(),a.goToItem(T.First);case S.End:case S.PageDown:return n.preventDefault(),n.stopPropagation(),a.goToItem(T.Last);case S.Escape:n.preventDefault(),n.stopPropagation(),a.closeMenu(),H(()=>{var i;return(i=x(a.buttonRef))==null?void 0:i.focus({preventScroll:!0})});break;case S.Tab:n.preventDefault(),n.stopPropagation(),a.closeMenu(),H(()=>Ye(x(a.buttonRef),n.shiftKey?ve.Previous:ve.Next));break;default:n.key.length===1&&(a.search(n.key),u.value=setTimeout(()=>a.clearSearch(),350));break}}function b(n){switch(n.key){case S.Space:n.preventDefault();break}}let M=Xe(),g=C(()=>M!==null?(M.value&X.Open)===X.Open:a.menuState.value===0);return()=>{var n,v;let i={open:a.menuState.value===0},{...s}=e,p={"aria-activedescendant":a.activeItemIndex.value===null||(n=a.items.value[a.activeItemIndex.value])==null?void 0:n.id,"aria-labelledby":(v=x(a.buttonRef))==null?void 0:v.id,id:t,onKeydown:f,onKeyup:b,role:"menu",tabIndex:0,ref:a.itemsRef};return Y({ourProps:p,theirProps:s,slot:i,attrs:l,slots:o,features:fe.RenderStrategy|fe.Static,visible:g.value,name:"MenuItems"})}}}),It=U({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:l,attrs:o,expose:d}){var c;let t=(c=e.id)!=null?c:`headlessui-menu-item-${de()}`,a=ee("MenuItem"),u=$(null);d({el:u,$el:u});let f=C(()=>a.activeItemIndex.value!==null?a.items.value[a.activeItemIndex.value].id===t:!1),b=gt(u),M=C(()=>({disabled:e.disabled,get textValue(){return b()},domRef:u}));_e(()=>a.registerItem(t,M)),Oe(()=>a.unregisterItem(t)),ye(()=>{a.menuState.value===0&&f.value&&a.activationTrigger.value!==0&&H(()=>{var r,k;return(k=(r=x(u))==null?void 0:r.scrollIntoView)==null?void 0:k.call(r,{block:"nearest"})})});function g(r){if(e.disabled)return r.preventDefault();a.closeMenu(),xe(x(a.buttonRef))}function n(){if(e.disabled)return a.goToItem(T.Nothing);a.goToItem(T.Specific,t)}let v=ct();function i(r){v.update(r)}function s(r){v.wasMoved(r)&&(e.disabled||f.value||a.goToItem(T.Specific,t,0))}function p(r){v.wasMoved(r)&&(e.disabled||f.value&&a.goToItem(T.Nothing))}return()=>{let{disabled:r,...k}=e,I={active:f.value,disabled:r,close:a.closeMenu};return Y({ourProps:{id:t,ref:u,role:"menuitem",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,onClick:g,onFocus:n,onPointerenter:i,onMouseenter:i,onPointermove:s,onMousemove:s,onPointerleave:p,onMouseleave:p},theirProps:{...o,...k},slot:I,attrs:o,slots:l,name:"MenuItem"})}}});const le=re(B.ui.strategy,B.ui.kbd,dt),Mt=U({inheritAttrs:!1,props:{value:{type:String,default:null},size:{type:String,default:()=>le.default.size,validator(e){return Object.keys(le.size).includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:l,attrs:o}=ue("kbd",q(e,"ui"),le),d=C(()=>ke(ie(l.value.base,l.value.size[e.size],l.value.padding,l.value.rounded,l.value.font,l.value.background,l.value.ring),e.class));return{ui:l,attrs:o,kbdClass:d}}});function St(e,l,o,d,c,t){return w(),P("kbd",V({class:e.kbdClass},e.attrs),[Z(e.$slots,"default",{},()=>[z(O(e.value),1)])],16)}const De=se(Mt,[["render",St]]),oe=re(B.ui.strategy,B.ui.dropdown,Ne),xt=U({components:{HMenu:_t,HMenuButton:kt,HMenuItems:wt,HMenuItem:It,UIcon:we,UAvatar:Ie,UKbd:De},inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},open:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},popper:{type:Object,default:()=>({})},openDelay:{type:Number,default:()=>oe.default.openDelay},closeDelay:{type:Number,default:()=>oe.default.closeDelay},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:open"],setup(e,{emit:l}){const{ui:o,attrs:d}=ue("dropdown",q(e,"ui"),oe,q(e,"class")),c=C(()=>Ue(e.mode==="hover"?{offsetDistance:0}:{},e.popper,o.value.popper)),[t,a]=tt(c.value),u=$(null);let f=null,b=null;_e(()=>{var k,I;const p=(k=t.value)==null?void 0:k.$.provides;if(!p)return;const r=Object.getOwnPropertySymbols(p);u.value=r.length&&p[r[0]],e.open&&((I=u.value)==null||I.openMenu())});const M=C(()=>{var I,A,F;if(e.mode!=="hover")return{};const p=((I=e.popper)==null?void 0:I.offsetDistance)||((A=o.value.popper)==null?void 0:A.offsetDistance)||8,r=(F=c.value.placement)==null?void 0:F.split("-")[0],k=`${p}px`;return r==="top"||r==="bottom"?{paddingTop:k,paddingBottom:k}:r==="left"||r==="right"?{paddingLeft:k,paddingRight:k}:{paddingTop:k,paddingBottom:k,paddingLeft:k,paddingRight:k}});function g(p){!p.cancelable||!u.value||(u.value.menuState===0?u.value.closeMenu():u.value.openMenu())}function n(){e.mode!=="hover"||!u.value||(b&&(clearTimeout(b),b=null),u.value.menuState!==0&&(f=f||setTimeout(()=>{u.value.openMenu&&u.value.openMenu(),f=null},e.openDelay)))}function v(){e.mode!=="hover"||!u.value||(f&&(clearTimeout(f),f=null),u.value.menuState!==1&&(b=b||setTimeout(()=>{u.value.closeMenu&&u.value.closeMenu(),b=null},e.closeDelay)))}function i(p,r,{href:k,navigate:I,close:A,isExternal:F}){r.click&&r.click(p),k&&!F&&(I(p),A())}pe(()=>e.open,(p,r)=>{u.value&&(r===void 0||p===r||(p?u.value.openMenu():u.value.closeMenu()))}),pe(()=>{var p;return(p=u.value)==null?void 0:p.menuState},(p,r)=>{r===void 0||p===r||l("update:open",p===0)});const s=Se;return at(()=>Ee()),{ui:o,attrs:d,popper:c,trigger:t,container:a,containerStyle:M,onTouchStart:g,onMouseEnter:n,onMouseLeave:v,onClick:i,getNuxtLinkProps:je,twMerge:ke,twJoin:ie,NuxtLink:s}}}),$t=["disabled"];function Dt(e,l,o,d,c,t){const a=G("HMenuButton"),u=we,f=Ie,b=De,M=G("HMenuItem"),g=Se,n=G("HMenuItems"),v=G("HMenu");return w(),j(v,V({as:"div",class:e.ui.wrapper},e.attrs,{onMouseleave:e.onMouseLeave}),{default:y(({open:i})=>[_(a,{ref:"trigger",as:"div",disabled:e.disabled,class:R(e.ui.trigger),role:"button",onMouseenter:e.onMouseEnter,onTouchstartPassive:e.onTouchStart},{default:y(()=>[Z(e.$slots,"default",{open:i,disabled:e.disabled},()=>[D("button",{disabled:e.disabled}," Open ",8,$t)])]),_:2},1032,["disabled","class","onMouseenter","onTouchstartPassive"]),i&&e.items.length?(w(),P("div",{key:0,ref:"container",class:R([e.ui.container,e.ui.width]),style:ze(e.containerStyle),onMouseenter:l[0]||(l[0]=(...s)=>e.onMouseEnter&&e.onMouseEnter(...s))},[_(Me,V({appear:""},e.ui.transition),{default:y(()=>[D("div",null,[e.popper.arrow?(w(),P("div",{key:0,"data-popper-arrow":"",class:R(Object.values(e.ui.arrow))},null,2)):L("",!0),_(n,{class:R([e.ui.base,e.ui.divide,e.ui.ring,e.ui.rounded,e.ui.shadow,e.ui.background,e.ui.height]),static:""},{default:y(()=>[(w(!0),P(ae,null,ne(e.items,(s,p)=>(w(),P("div",{key:p,class:R(e.ui.padding)},[(w(!0),P(ae,null,ne(s,(r,k)=>(w(),j(g,V({key:k,ref_for:!0},e.getNuxtLinkProps(r),{custom:""}),{default:y(({href:I,target:A,rel:F,navigate:te,isExternal:J,isActive:K})=>[_(M,{disabled:r.disabled},{default:y(({active:W,disabled:m,close:N})=>[(w(),j(Be(I?"a":"button"),{href:m?void 0:I,rel:F,target:A,class:R(e.twMerge(e.twJoin(e.ui.item.base,e.ui.item.padding,e.ui.item.size,e.ui.item.rounded,W||K?e.ui.item.active:e.ui.item.inactive,m&&e.ui.item.disabled),r.class)),onClick:Q=>e.onClick(Q,r,{href:I,navigate:te,close:N,isExternal:J})},{default:y(()=>[Z(e.$slots,r.slot||"item",{item:r},()=>{var Q;return[r.icon?(w(),j(u,{key:0,name:r.icon,class:R(e.twMerge(e.twJoin(e.ui.item.icon.base,W||K?e.ui.item.icon.active:e.ui.item.icon.inactive),r.iconClass))},null,8,["name","class"])):r.avatar?(w(),j(f,V({key:1,ref_for:!0},{size:e.ui.item.avatar.size,...r.avatar},{class:e.ui.item.avatar.base}),null,16,["class"])):L("",!0),D("span",{class:R(e.twMerge(e.ui.item.label,r.labelClass))},O(r.label),3),(Q=r.shortcuts)!=null&&Q.length?(w(),P("span",{key:2,class:R(e.ui.item.shortcuts)},[(w(!0),P(ae,null,ne(r.shortcuts,ce=>(w(),j(b,{key:ce},{default:y(()=>[z(O(ce),1)]),_:2},1024))),128))],2)):L("",!0)]})]),_:2},1032,["href","rel","target","class","onClick"]))]),_:2},1032,["disabled"])]),_:2},1040))),128))],2))),128))]),_:3},8,["class"])])]),_:3},16)],38)):L("",!0)]),_:3},16,["class","onMouseleave"])}const Tt=se(xt,[["render",Dt]]),E=re(B.ui.strategy,B.ui.chip,it),Ct=U({inheritAttrs:!1,props:{size:{type:String,default:()=>E.default.size,validator(e){return Object.keys(E.size).includes(e)}},color:{type:String,default:()=>E.default.color,validator(e){return["gray",...B.ui.colors].includes(e)}},position:{type:String,default:()=>E.default.position,validator(e){return Object.keys(E.position).includes(e)}},text:{type:[String,Number],default:null},inset:{type:Boolean,default:()=>E.default.inset},show:{type:Boolean,default:!0},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:l,attrs:o}=ue("chip",q(e,"ui"),E,q(e,"class")),d=C(()=>ie(l.value.base,l.value.size[e.size],l.value.position[e.position],e.inset?null:l.value.translate[e.position],l.value.background.replaceAll("{color}",e.color)));return{ui:l,attrs:o,chipClass:d}}});function Pt(e,l,o,d,c,t){return w(),P("div",V({class:e.ui.wrapper},e.attrs),[Z(e.$slots,"default"),e.show?(w(),P("span",{key:0,class:R(e.chipClass)},[Z(e.$slots,"content",{},()=>[z(O(e.text),1)])],2)):L("",!0)],16)}const At=se(Ct,[["render",Pt]]),Rt={class:"my-6"},Ot={class:"flex items-center justify-between mb-4"},Ft={class:"flex grid grid-cols-7 gap-3 border rounded p-3"},Nt={class:"col-span-2"},Ut={class:"col-span-2"},Et={class:"col-span-2"},jt={class:"col-span-1"},zt={class:"text-center"},Bt={class:"text-center"},Vt={class:"text-center"},ta=U({__name:"users",async setup(e){let l,o;const d=Ve(),c=rt(),t=$({search:"",userId:"",region:"",role:"",users:[],form:{},collapsed:!1,viewDeleted:!1}),a=C(()=>t.value.users.filter(i=>i.deleted==t.value.viewDeleted)),{refresh:u,status:f}=([l,o]=Le(async()=>st("users",async()=>{t.value.users=await c("/api/users",{params:{search:t.value.search}})})),l=await l,o(),l);async function b(i,s=t.value.userId){confirm("Подтвердите действие!")&&(await c("/api/users/"+s,{params:{item:i}}),Object.assign(t.value,{userId:"",region:"",role:""}),await u(),d.add({icon:"i-heroicons-check-circle",title:"Информация",description:"Действие успешно выполнено",color:"green"}))}async function M(){await c("/api/users",{method:"POST",body:t.value.form}),t.value.collapsed=!1,Object.assign(t.value.form,{fullname:"",username:""}),await u(),d.add({icon:"i-heroicons-check-circle",title:"Информация",description:"Пользователь успешно добавлен",color:"green"})}const g=i=>{const s=[];return i.fullname&&!i.fullname.match(/^[а-яёЁА-Я-\s]+$/)&&s.push({path:"fullname",message:"Поле должно содержать только русские буквы"}),i.username&&!i.username.match(/^[a-zA-Z_\s]+$/)&&s.push({path:"username",message:"Поле должно содержать только латинские буквы и знаки подчеркивания"}),i.email&&!i.email.match(/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/)&&s.push({path:"email",message:"Поле должно содержать корректную почту"}),s},n=ut(async()=>{await u()},500),v=[[{label:"Сбросить пароль",click:()=>b("drop")}],[{label:"Заблокировать/разблокировать",click:()=>b("block")}],[{label:"Удалить/восстановить",click:()=>b("delete")}]];return(i,s)=>{const p=Ce,r=Te,k=Ae,I=He,A=Pe,F=Ke,te=Tt,J=lt,K=At,W=ot;return w(),P("div",null,[_(p,{div:"py-1",cls:"text-2xl text-gray-500",header:"ПОЛЬЗОВАТЕЛИ"}),D("div",Rt,[_(r,{modelValue:h(t).search,"onUpdate:modelValue":s[0]||(s[0]=m=>h(t).search=m),size:"lg",placeholder:"Поиск по имени пользователя",onInput:me(h(n),["prevent"])},null,8,["modelValue","onInput"])]),D("div",Ot,[_(k,{modelValue:h(t).viewDeleted,"onUpdate:modelValue":s[1]||(s[1]=m=>h(t).viewDeleted=m),label:"Показать удаленные"},null,8,["modelValue"]),_(I,{variant:"link",label:"Добавить пользователя",onClick:s[2]||(s[2]=m=>h(t).collapsed=!h(t).collapsed)})]),_(Me,{name:"slide-fade"},{default:y(()=>[h(t).collapsed?(w(),j(F,{key:0,state:h(t).form,validate:g,onSubmit:me(M,["prevent"])},{default:y(()=>[D("div",Ft,[D("div",Nt,[_(A,{required:"",class:"mb-3",name:"fullname"},{default:y(()=>[_(r,{modelValue:h(t).form.fullname,"onUpdate:modelValue":s[3]||(s[3]=m=>h(t).form.fullname=m),placeholder:"Имя пользователя"},null,8,["modelValue"])]),_:1})]),D("div",Ut,[_(A,{required:"",class:"mb-3",name:"username"},{default:y(()=>[_(r,{modelValue:h(t).form.username,"onUpdate:modelValue":s[4]||(s[4]=m=>h(t).form.username=m),placeholder:"Логин"},null,8,["modelValue"])]),_:1})]),D("div",Et,[_(A,{required:"",class:"mb-3",name:"email"},{default:y(()=>[_(r,{modelValue:h(t).form.email,"onUpdate:modelValue":s[5]||(s[5]=m=>h(t).form.email=m),placeholder:"Email"},null,8,["modelValue"])]),_:1})]),D("div",jt,[_(I,{block:"",variant:"outline",color:"gray",label:"Создать",type:"submit"})])])]),_:1},8,["state"])):L("",!0)]),_:1}),_(W,{loading:h(f)==="pending",progress:{color:"red",animation:"swing"},"empty-state":{icon:"i-heroicons-circle-stack-20-solid",label:"Пользователи не найдены."},columns:[{key:"id",label:"#"},{key:"fullname",label:"Пользователь"},{key:"username",label:"Логин"},{key:"email",label:"Email"},{key:"region",label:"Регион"},{key:"role",label:"Роль"},{key:"created",label:"Создан"},{key:"attempt",label:"Попытка"},{key:"blocked",label:"Блок"},{key:"pswd_create",label:"Обновлен"},{key:"change_pswd",label:"Изм.пароля"}],rows:h(a)},{"id-data":y(({row:m})=>[z(O(m.id),1)]),"fullname-data":y(({row:m})=>[z(O(m.fullname),1)]),"username-data":y(({row:m})=>[_(te,{items:v},{default:y(()=>[_(I,{variant:"link",label:m.username,onClick:N=>h(t).userId=m.id},null,8,["label","onClick"])]),_:2},1024)]),"region-data":y(({row:m})=>[_(J,{modelValue:h(t).region,"onUpdate:modelValue":s[6]||(s[6]=N=>h(t).region=N),placeholder:m.region,options:["Главный офис","РЦ Юг","РЦ Запад","РЦ Урал","РЦ Восток"],onChange:N=>b(h(t).region,m.id)},null,8,["modelValue","placeholder","onChange"])]),"role-data":y(({row:m})=>[_(J,{modelValue:h(t).role,"onUpdate:modelValue":s[7]||(s[7]=N=>h(t).role=N),placeholder:m.role,options:["admin","user","guest"],onChange:N=>b(h(t).role,m.id)},null,8,["modelValue","placeholder","onChange"])]),"created-data":y(({row:m})=>[z(O(new Date(m.created).toLocaleDateString()),1)]),"attempt-data":y(({row:m})=>[D("div",zt,O(m.attempt),1)]),"blocked-data":y(({row:m})=>[D("div",Bt,[_(K,{size:"2xl",color:m.blocked?"red":"green"},null,8,["color"])])]),"pswd_create-data":y(({row:m})=>[z(O(new Date(m.pswd_create).toLocaleDateString()),1)]),"change_pswd-data":y(({row:m})=>[D("div",Vt,[_(K,{size:"2xl",color:m.change_pswd?"red":"green"},null,8,["color"])])]),_:1},8,["loading","rows"])])}}});export{ta as default};
