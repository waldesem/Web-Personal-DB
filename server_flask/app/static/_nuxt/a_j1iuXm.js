import{_ as D,b as V,a as B}from"./CX3kPmFP.js";import{g as N,h as z,i as I,w as a,o as c,b as o,j as t,c as m,a as p,H as L,C as b,d as l,t as r,l as j,e as A,q as E,I as F}from"./-i46ahqV.js";import{_ as G}from"./Y0SGDarw.js";import{_ as H}from"./Ci3NLuw9.js";import{_ as P}from"./OoTJBAmz.js";import{_ as T}from"./Ch2U0aYy.js";import{d as q,a as M,e as J,s as K}from"./DwuX9ns-.js";import"./DtOPAnGk.js";import"./DX8-RwSb.js";import"./B44f1S5t.js";const O={key:0,class:"relative"},Q={class:"absolute inset-y-0 right-0",title:"Загрузить json"},R={class:"my-6"},W={class:"caption-bottom text-left"},X={key:1,class:"grid place-items-center py-8"},pe=N({__name:"persons",async setup(Y){let _,d;const v=q(),y=M(),n=J(),f=K();function h(){}return[_,d]=z(()=>n.getCandidates()),await _,d(),(Z,s)=>{const k=D,g=j,u=V,x=B,C=A,$=G,i=E,S=H,U=P,w=T;return c(),I(w,null,{default:a(()=>[o(k,{div:"py-1",header:"КАНДИДАТЫ"}),t(f).user.value.role==t(y).classes.value.roles.user?(c(),m("div",O,[p("div",Q,[o(x,{class:"mb-3",size:"md"},{label:a(()=>[o(g,{name:"i-heroicons-cloud-arrow-up",class:"w-8 h-8",style:{cursor:"pointer"}})]),default:a(()=>[L(o(u,{type:"file",accept:".json",multiple:"",onChange:s[0]||(s[0]=e=>t(v).submitFile(e,"persons","0"))},null,512),[[F,!1]])]),_:1})])])):b("",!0),p("div",R,[o(u,{modelValue:t(n).persons.value.search,"onUpdate:modelValue":s[1]||(s[1]=e=>t(n).persons.value.search=e),placeholder:"поиск по фамилии, имени, отчеству, дате рождения, инн",size:"lg",onInput:h},null,8,["modelValue"])]),o(S,{"empty-state":{label:"Ничего не найдено."},columns:[{key:"id",label:"#"},{key:"region",label:"Регион"},{key:"surname",label:"Фамилия Имя Отчество"},{key:"birthday",label:"Дата рождения"},{key:"birthplace",label:"Место рождения"},{key:"inn",label:"ИНН"},{key:"created",label:"Обновлено"},{key:"username",label:"Сотрудник"},{key:"editable",label:"Статус"}],rows:t(n).persons.value.candidates},{"id-data":a(({row:e})=>[l(r(e.id),1)]),"region-data":a(({row:e})=>[l(r(e.region),1)]),"surname-data":a(({row:e})=>[o(C,{to:`/profile/${e.id}`},{default:a(()=>[l(r(`${e.surname} ${e.firstname} ${e.patronymic?e.patronymic:""}`),1)]),_:2},1032,["to"])]),"birthday-data":a(({row:e})=>[l(r(new Date(e.birthday).toLocaleDateString()),1)]),"birthplace-data":a(({row:e})=>[l(r(e.birthplace?e.birthplace:""),1)]),"inn-data":a(({row:e})=>[l(r(e.inn),1)]),"created-data":a(({row:e})=>[l(r(new Date(e.created).toLocaleDateString()),1)]),"username-data":a(({row:e})=>[l(r(e.username?e.username.toString().split(" ")[0]:""),1)]),"editable-data":a(({row:e})=>[o($,{size:"2xl",color:e.editable?"red":"green"},null,8,["color"])]),caption:a(()=>[p("caption",W,[o(i,{variant:"link",icon:"i-heroicons-arrow-path",label:`Обновлено: ${t(n).persons.value.updated}`,onClick:s[2]||(s[2]=e=>t(n).getCandidates())},null,8,["label"])])]),_:1},8,["rows"]),t(n).persons.value.prev||t(n).persons.value.next?(c(),m("div",X,[o(U,{orientation:"horizontal"},{default:a(()=>[o(i,{disabled:!t(n).persons.value.prev,variant:"link",icon:"i-heroicons-chevron-double-left",onClick:s[3]||(s[3]=e=>t(n).getCandidates(t(n).persons.value.page-1))},null,8,["disabled"]),o(i,{disabled:!t(n).persons.value.next,variant:"link",icon:"i-heroicons-chevron-double-right",onClick:s[4]||(s[4]=e=>t(n).getCandidates(t(n).persons.value.page+1))},null,8,["disabled"])]),_:1})])):b("",!0)]),_:1})}}});export{pe as default};
