import{_ as pe,a as ve,b as fe,c as me,d as be,e as he,f as _e,g as ge,h as ye,i as ke,j as Te,k as xe,l as Ie,m as $e,n as we,o as Pe}from"./CPl50CM5.js";import{_ as Se}from"./C85h92ts.js";import{g as O,r as w,J as G,x,K,L,M as le,N as De,F as Q,O as oe,P as Y,o as C,i as E,w as m,b as h,_ as Ae,m as Ce,k as ee,l as re,s as Oe,v as te,Q as Re,R as Be,S as z,B,T as Ee,a as R,c as J,E as ae,A as W,C as X,t as M,d as ie,D as Fe,U as He,h as ne,j as S,q as ze}from"./BPBLQG6i.js";import{u as Ne}from"./B7F370T9.js";import{u as Le,f as ue,o as T,A as U,T as Ue,I as ce,s as je,N as se,a as V,b as D,l as qe}from"./DCGz0Xwh.js";import{O as N,T as q,i as Ve,P as F,N as A}from"./DVGXNjOH.js";import{_ as Ge}from"./jOVDlQnc.js";import{d as Me,a as We,s as Ke,b as Qe,u as Je}from"./C7PE2IGf.js";import"./BlM-hdGs.js";import"./Bf0WHWn1.js";import"./DvBXWnc_.js";import"./BqwW0LnQ.js";import"./DgIFj23g.js";const Xe={wrapper:"relative space-y-2",container:"relative w-full",base:"focus:outline-none",list:{base:"relative",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-lg",shadow:"",padding:"p-1",height:"h-10",width:"w-full",marker:{wrapper:"absolute top-[4px] left-[4px] duration-200 ease-out focus:outline-none",base:"w-full h-full",background:"bg-white dark:bg-gray-900",rounded:"rounded-md",shadow:"shadow-sm"},tab:{base:"relative inline-flex items-center justify-center flex-shrink-0 w-full ui-focus-visible:outline-0 ui-focus-visible:ring-2 ui-focus-visible:ring-primary-500 dark:ui-focus-visible:ring-primary-400 ui-not-focus-visible:outline-none focus:outline-none disabled:cursor-not-allowed disabled:opacity-75 transition-colors duration-200 ease-out",background:"",active:"text-gray-900 dark:text-white",inactive:"text-gray-500 dark:text-gray-400",height:"h-8",padding:"px-3",size:"text-sm",font:"font-medium",rounded:"rounded-md",shadow:"",icon:"w-4 h-4 flex-shrink-0 mr-2"}}};function Ye(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(i=>setTimeout(()=>{throw i}))}let Ze=O({props:{onFocus:{type:Function,required:!0}},setup(e){let i=w(!0);return()=>i.value?G(ue,{as:"button",type:"button",features:Le.Focusable,onFocus(d){d.preventDefault();let l,v=50;function o(){var t;if(v--<=0){l&&cancelAnimationFrame(l);return}if((t=e.onFocus)!=null&&t.call(e)){i.value=!1,cancelAnimationFrame(l);return}l=requestAnimationFrame(o)}l=requestAnimationFrame(o)}}):null}});var et=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(et||{}),tt=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(tt||{});let de=Symbol("TabsContext");function j(e){let i=Y(de,null);if(i===null){let d=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,j),d}return i}let Z=Symbol("TabsSSRContext"),at=O({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:i,attrs:d,emit:l}){var v;let o=w((v=e.selectedIndex)!=null?v:e.defaultIndex),t=w([]),n=w([]),f=x(()=>e.selectedIndex!==null),y=x(()=>f.value?e.selectedIndex:o.value);function p(a){var c;let b=N(r.tabs.value,T),s=N(r.panels.value,T),_=b.filter(I=>{var $;return!(($=T(I))!=null&&$.hasAttribute("disabled"))});if(a<0||a>b.length-1){let I=V(o.value===null?0:Math.sign(a-o.value),{[-1]:()=>1,0:()=>V(Math.sign(a),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),$=V(I,{0:()=>b.indexOf(_[0]),1:()=>b.indexOf(_[_.length-1])});$!==-1&&(o.value=$),r.tabs.value=b,r.panels.value=s}else{let I=b.slice(0,a),$=[...b.slice(a),...I].find(H=>_.includes(H));if(!$)return;let P=(c=b.indexOf($))!=null?c:r.selectedIndex.value;P===-1&&(P=r.selectedIndex.value),o.value=P,r.tabs.value=b,r.panels.value=s}}let r={selectedIndex:x(()=>{var a,c;return(c=(a=o.value)!=null?a:e.defaultIndex)!=null?c:null}),orientation:x(()=>e.vertical?"vertical":"horizontal"),activation:x(()=>e.manual?"manual":"auto"),tabs:t,panels:n,setSelectedIndex(a){y.value!==a&&l("change",a),f.value||p(a)},registerTab(a){var c;if(t.value.includes(a))return;let b=t.value[o.value];if(t.value.push(a),t.value=N(t.value,T),!f.value){let s=(c=t.value.indexOf(b))!=null?c:o.value;s!==-1&&(o.value=s)}},unregisterTab(a){let c=t.value.indexOf(a);c!==-1&&t.value.splice(c,1)},registerPanel(a){n.value.includes(a)||(n.value.push(a),n.value=N(n.value,T))},unregisterPanel(a){let c=n.value.indexOf(a);c!==-1&&n.value.splice(c,1)}};K(de,r);let u=w({tabs:[],panels:[]}),g=w(!1);L(()=>{g.value=!0}),K(Z,x(()=>g.value?null:u.value));let k=x(()=>e.selectedIndex);return L(()=>{le([k],()=>{var a;return p((a=e.selectedIndex)!=null?a:e.defaultIndex)},{immediate:!0})}),De(()=>{if(!f.value||y.value==null||r.tabs.value.length<=0)return;let a=N(r.tabs.value,T);a.some((c,b)=>T(r.tabs.value[b])!==T(c))&&r.setSelectedIndex(a.findIndex(c=>T(c)===T(r.tabs.value[y.value])))}),()=>{let a={selectedIndex:o.value};return G(Q,[t.value.length<=0&&G(Ze,{onFocus:()=>{for(let c of t.value){let b=T(c);if((b==null?void 0:b.tabIndex)===0)return b.focus(),!0}return!1}}),U({theirProps:{...d,...Ue(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:a,slots:i,attrs:d,name:"TabGroup"})])}}}),nt=O({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:i,slots:d}){let l=j("TabList");return()=>{let v={selectedIndex:l.selectedIndex.value},o={role:"tablist","aria-orientation":l.orientation.value};return U({ourProps:o,theirProps:e,slot:v,attrs:i,slots:d,name:"TabList"})}}}),st=O({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:i,slots:d,expose:l}){var v;let o=(v=e.id)!=null?v:`headlessui-tabs-tab-${ce()}`,t=j("Tab"),n=w(null);l({el:n,$el:n}),L(()=>t.registerTab(n)),oe(()=>t.unregisterTab(n));let f=Y(Z),y=x(()=>{if(f.value){let s=f.value.tabs.indexOf(o);return s===-1?f.value.tabs.push(o)-1:s}return-1}),p=x(()=>{let s=t.tabs.value.indexOf(n);return s===-1?y.value:s}),r=x(()=>p.value===t.selectedIndex.value);function u(s){var _;let I=s();if(I===q.Success&&t.activation.value==="auto"){let $=(_=Ve(n))==null?void 0:_.activeElement,P=t.tabs.value.findIndex(H=>T(H)===$);P!==-1&&t.setSelectedIndex(P)}return I}function g(s){let _=t.tabs.value.map(I=>T(I)).filter(Boolean);if(s.key===D.Space||s.key===D.Enter){s.preventDefault(),s.stopPropagation(),t.setSelectedIndex(p.value);return}switch(s.key){case D.Home:case D.PageUp:return s.preventDefault(),s.stopPropagation(),u(()=>F(_,A.First));case D.End:case D.PageDown:return s.preventDefault(),s.stopPropagation(),u(()=>F(_,A.Last))}if(u(()=>V(t.orientation.value,{vertical(){return s.key===D.ArrowUp?F(_,A.Previous|A.WrapAround):s.key===D.ArrowDown?F(_,A.Next|A.WrapAround):q.Error},horizontal(){return s.key===D.ArrowLeft?F(_,A.Previous|A.WrapAround):s.key===D.ArrowRight?F(_,A.Next|A.WrapAround):q.Error}}))===q.Success)return s.preventDefault()}let k=w(!1);function a(){var s;k.value||(k.value=!0,!e.disabled&&((s=T(n))==null||s.focus({preventScroll:!0}),t.setSelectedIndex(p.value),Ye(()=>{k.value=!1})))}function c(s){s.preventDefault()}let b=je(x(()=>({as:e.as,type:i.type})),n);return()=>{var s,_;let I={selected:r.value,disabled:(s=e.disabled)!=null?s:!1},{...$}=e,P={ref:n,onKeydown:g,onMousedown:c,onClick:a,id:o,role:"tab",type:b.value,"aria-controls":(_=T(t.panels.value[p.value]))==null?void 0:_.id,"aria-selected":r.value,tabIndex:r.value?0:-1,disabled:e.disabled?!0:void 0};return U({ourProps:P,theirProps:$,slot:I,attrs:i,slots:d,name:"Tab"})}}}),lt=O({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:i,attrs:d}){let l=j("TabPanels");return()=>{let v={selectedIndex:l.selectedIndex.value};return U({theirProps:e,ourProps:{},slot:v,attrs:d,slots:i,name:"TabPanels"})}}}),ot=O({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(e,{attrs:i,slots:d,expose:l}){var v;let o=(v=e.id)!=null?v:`headlessui-tabs-panel-${ce()}`,t=j("TabPanel"),n=w(null);l({el:n,$el:n}),L(()=>t.registerPanel(n)),oe(()=>t.unregisterPanel(n));let f=Y(Z),y=x(()=>{if(f.value){let u=f.value.panels.indexOf(o);return u===-1?f.value.panels.push(o)-1:u}return-1}),p=x(()=>{let u=t.panels.value.indexOf(n);return u===-1?y.value:u}),r=x(()=>p.value===t.selectedIndex.value);return()=>{var u;let g={selected:r.value},{tabIndex:k,...a}=e,c={ref:n,id:o,role:"tabpanel","aria-labelledby":(u=T(t.tabs.value[p.value]))==null?void 0:u.id,tabIndex:r.value?k:-1};return!r.value&&e.unmount&&!e.static?G(ue,{as:"span","aria-hidden":!0,...c}):U({ourProps:c,theirProps:a,slot:g,attrs:i,slots:d,features:se.Static|se.RenderStrategy,visible:r.value,name:"TabPanel"})}}});const rt=O({__name:"AnketaTab",setup(e){const i=[{label:"Резюме",icon:"i-heroicons-user",defaultOpen:!0,slot:"resume"},{label:"Должности",icon:"i-heroicons-briefcase",slot:"staff"},{label:"Образование",icon:"i-heroicons-academic-cap",slot:"education"},{label:"Работа",icon:"i-heroicons-briefcase",slot:"work"},{label:"Документы",icon:"i-heroicons-document-text",slot:"document"},{label:"Адреса",icon:"i-heroicons-home-modern",slot:"address"},{label:"Контакты",icon:"i-heroicons-phone",slot:"contact"},{label:"Аффилированные",icon:"i-heroicons-user-group",slot:"affiliation"},{label:"Изменения имени",icon:"i-heroicons-archive-box-arrow-down",slot:"prev"},{label:"Связанные",icon:"i-heroicons-user-group",slot:"relate"}];return(d,l)=>{const v=pe,o=ve,t=fe,n=me,f=be,y=he,p=_e,r=ge,u=ye,g=ke,k=Te;return C(),E(k,{items:i,size:"lg",multiple:""},{resume:m(()=>[h(v)]),staff:m(()=>[h(o)]),education:m(()=>[h(t)]),work:m(()=>[h(n)]),document:m(()=>[h(f)]),address:m(()=>[h(y)]),contact:m(()=>[h(p)]),affiliation:m(()=>[h(r)]),prev:m(()=>[h(u)]),relate:m(()=>[h(g)]),_:1})}}}),it=Ce(ee.ui.strategy,ee.ui.tabs,Xe),ut=O({components:{UIcon:re,HTabGroup:at,HTabList:nt,HTab:st,HTabPanels:lt,HTabPanel:ot},inheritAttrs:!1,props:{modelValue:{type:Number,default:void 0},orientation:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},defaultIndex:{type:Number,default:0},items:{type:Array,default:()=>[]},unmount:{type:Boolean,default:!1},content:{type:Boolean,default:!0},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:i}){const{ui:d,attrs:l}=Oe("tabs",te(e,"ui"),it,te(e,"class")),v=w(),o=w([]),t=w(),n=w(e.modelValue||e.defaultIndex);function f(p){var u;const r=(u=o.value[p])==null?void 0:u.$el;r&&t.value&&(t.value.style.top=`${r.offsetTop}px`,t.value.style.left=`${r.offsetLeft}px`,t.value.style.width=`${r.offsetWidth}px`,t.value.style.height=`${r.offsetHeight}px`)}function y(p){n.value=p,i("change",p),e.modelValue!==void 0&&i("update:modelValue",n.value),f(n.value)}return Re(v,()=>{f(n.value)}),le(()=>e.modelValue,p=>{n.value=p,f(n.value)}),L(async()=>{await Be(),f(n.value)}),qe(()=>Ne("$39Q85lIXra")),{ui:d,attrs:l,listRef:v,itemRefs:o,markerRef:t,selectedIndex:n,onChange:y}}}),ct={class:"truncate"};function dt(e,i,d,l,v,o){const t=re,n=z("HTab"),f=z("HTabList"),y=z("HTabPanel"),p=z("HTabPanels"),r=z("HTabGroup");return C(),E(r,Fe({vertical:e.orientation==="vertical","selected-index":e.selectedIndex,as:"div",class:e.ui.wrapper},e.attrs,{onChange:e.onChange}),{default:m(()=>[h(f,{ref:"listRef",class:B([e.ui.list.base,e.ui.list.background,e.ui.list.rounded,e.ui.list.shadow,e.ui.list.padding,e.ui.list.width,e.orientation==="horizontal"&&e.ui.list.height,e.orientation==="horizontal"&&"inline-grid items-center"]),style:Ee([e.orientation==="horizontal"&&`grid-template-columns: repeat(${e.items.length}, minmax(0, 1fr))`])},{default:m(()=>[R("div",{ref:"markerRef",class:B(e.ui.list.marker.wrapper)},[R("div",{class:B([e.ui.list.marker.base,e.ui.list.marker.background,e.ui.list.marker.rounded,e.ui.list.marker.shadow])},null,2)],2),(C(!0),J(Q,null,ae(e.items,(u,g)=>(C(),E(n,{key:g,ref_for:!0,ref:"itemRefs",disabled:u.disabled,as:"template"},{default:m(({selected:k,disabled:a})=>[R("button",{class:B([e.ui.list.tab.base,e.ui.list.tab.background,e.ui.list.tab.height,e.ui.list.tab.padding,e.ui.list.tab.size,e.ui.list.tab.font,e.ui.list.tab.rounded,e.ui.list.tab.shadow,k?e.ui.list.tab.active:e.ui.list.tab.inactive])},[W(e.$slots,"icon",{item:u,index:g,selected:k,disabled:a},()=>[u.icon?(C(),E(t,{key:0,name:u.icon,class:B(e.ui.list.tab.icon)},null,8,["name","class"])):X("",!0)]),W(e.$slots,"default",{item:u,index:g,selected:k,disabled:a},()=>[R("span",ct,M(u.label),1)])],2)]),_:2},1032,["disabled"]))),128))]),_:3},8,["class","style"]),e.content?(C(),E(p,{key:0,class:B(e.ui.container)},{default:m(()=>[(C(!0),J(Q,null,ae(e.items,(u,g)=>(C(),E(y,{key:g,class:B(e.ui.base),unmount:e.unmount},{default:m(({selected:k})=>[W(e.$slots,u.slot||"item",{item:u,index:g,selected:k},()=>[ie(M(u.content),1)])]),_:2},1032,["class","unmount"]))),128))]),_:3},8,["class"])):X("",!0)]),_:3},16,["vertical","selected-index","class","onChange"])}const pt=Ae(ut,[["render",dt]]),vt={key:0,class:"relative"},ft={class:"absolute top-0 right-20"},mt={class:"animate-pulse",style:{width:"30px"}},bt={class:"py-8"},ht={class:"text-2xl text-red-800 font-bold"},Ot=O({__name:"[id]",async setup(e){let i,d;const l=Me(),v=We(),o=Ke(),t=He();l.share.value.candId=t.params.id;const n=Je();l.anketa.value=([i,d]=ne(()=>n(`${Qe}/profile/${l.share.value.candId}`)),i=await i,d(),i),[i,d]=ne(()=>l.getImage()),await i,d();const f=[{slot:"anketaTab",label:"Анкета",icon:"i-heroicons-user"},{slot:"checkTab",label:"Проверки",icon:"i-heroicons-check-circle"},{slot:"poligrafTab",label:"Полиграф",icon:"i-heroicons-bolt"},{slot:"investigateTab",label:"Расследования",icon:"i-heroicons-briefcase"},{slot:"inquiryTab",label:"Запросы",icon:"i-heroicons-document-text"}],y={current:{label:"Анкета редактируется текущим пользователем",color:"green"},thirdparty:{label:"Анкета редактируется другим пользователем",color:"red"},others:{label:"Анкета не редактируется пользователями",color:"blue"}},p=x(()=>{if(l.anketa.value.persons.editable){if(l.anketa.value.persons.user_id==o.user.value.userId)return y.current;if(l.anketa.value.persons.user_id!=o.user.value.userId)return y.thirdparty}return y.others}),r=x(()=>l.anketa.value.persons.editable&&o.user.value.role==v.classes.value.roles.user&&o.user.value.userId==l.anketa.value.persons.user_id);return K("editState",r),(u,g)=>{const k=xe,a=Se,c=ze,b=rt,s=Ie,_=$e,I=we,$=Pe,P=pt,H=Ge;return C(),E(H,null,{default:m(()=>[h(k),S(o).user.value.role==S(v).classes.value.roles.user?(C(),J("div",vt,[R("div",ft,[h(c,{variant:"link",size:"xl",color:S(l).anketa.value.persons.editable?"red":"green",onClick:g[0]||(g[0]=_t=>S(l).getItem("persons","self"))},{default:m(()=>[R("div",mt,[h(a,{color:S(p).color,variant:"solid"},{default:m(()=>[ie(M(S(p).label),1)]),_:1},8,["color"])])]),_:1},8,["color"])])])):X("",!0),R("div",bt,[R("h3",ht,M(`${S(l).anketa.value.persons.surname} ${S(l).anketa.value.persons.firstname} ${S(l).anketa.value.persons.patronymic?" "+S(l).anketa.value.persons.patronymic:""}`),1)]),h(P,{items:f,class:"w-full"},{anketaTab:m(()=>[h(b)]),checkTab:m(()=>[h(s)]),poligrafTab:m(()=>[h(_)]),investigateTab:m(()=>[h(I)]),inquiryTab:m(()=>[h($)]),_:1})]),_:1})}}});export{Ot as default};
