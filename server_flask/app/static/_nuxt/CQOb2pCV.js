import{I as yt,J as Ke,K as gt,L as qe,M as ht,N as Le,O as kt,P as Je,Q as et,R as wt,k as B,d as A,S as $t,r as U,T as ye,o as i,c as $,z as me,u as t,m as Ie,f as _e,_ as Te,j as ze,t as H,l as tt,q as nt,U as St,a as o,e as s,b as J,x as R,y as z,s as ce,V as Q,w as X,W as It,X as Ut,E as je,v as I,Y as He,D as ee,i as G,G as Re,B as V,g as we,h as ot,Z as at,$ as Dt,F as P,C as N,A as E,a0 as Me,H as Y,a1 as te,a2 as ne,n as Vt,a3 as Et,a4 as Ee,a5 as Ae,a6 as lt,a7 as Ue,a8 as Fe,a9 as Se,aa as Ft,ab as st,ac as Ct,ad as be,ae as xt,af as Qe,ag as Ot,ah as Tt,ai as zt}from"./Do9hLr1B.js";import{b as se,a as ie,_ as At}from"./B56mXhHt.js";import{u as Bt,i as Ce,a as ke,o as j,t as Pt,b as xe,A as ge,s as it,l as qt,N as Oe,c as K,d as Mt,f as rt,O as $e,T as Lt,e as Ve,g as jt,P as he,h as pe,j as dt}from"./DGsFwNa9.js";import{_ as Z}from"./B1nJZRoS.js";import{u as W}from"./BAbbnpqZ.js";import{u as ut,a as re,c as Ht}from"./U5XsKBNl.js";import{_ as Ne}from"./BgO3tiTZ.js";import{_ as Rt,a as oe,b as de,c as Be}from"./BKBUzCgC.js";import{_ as ve}from"./llIBVRuO.js";import{_ as ue}from"./DUV3ZEuP.js";import{_ as Nt}from"./3140Yg6G.js";import{_ as Gt}from"./BDDMBSA7.js";import{s as Wt}from"./C30nuJvn.js";import"./Bbw14XCe.js";import"./DvzU_D0u.js";const Kt={wrapper:"w-full flex flex-col",container:"w-full flex flex-col",item:{base:"",size:"text-sm",color:"text-gray-500 dark:text-gray-400",padding:"pt-1.5 pb-3",icon:"ms-auto transform transition-transform duration-200 flex-shrink-0"},transition:{enterActiveClass:"overflow-hidden transition-[height] duration-200 ease-out",leaveActiveClass:"overflow-hidden transition-[height] duration-200 ease-out"},default:{openIcon:"i-heroicons-chevron-down-20-solid",closeIcon:"",class:"mb-1.5 w-full",variant:"soft",truncate:!0}},Jt={wrapper:"relative w-full flex items-center justify-between",container:"flex items-center min-w-0",inner:"min-w-0",base:"group relative w-full flex items-center gap-1.5 px-2.5 py-3.5 rounded-md font-medium text-sm focus:outline-none focus-visible:outline-none dark:focus-visible:outline-none focus-visible:ring-inset focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400 disabled:cursor-not-allowed disabled:opacity-75",before:"before:absolute before:inset-x-0 before:inset-y-2 before:inset-px before:rounded-md hover:before:bg-gray-50 dark:hover:before:bg-gray-800/50",after:"after:absolute after:bottom-0 after:inset-x-2.5 after:block after:h-[2px] after:mt-2",active:"text-gray-900 dark:text-white after:bg-primary-500 dark:after:bg-primary-400 after:rounded-full",inactive:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",label:"truncate relative",icon:{base:"flex-shrink-0 w-5 h-5 relative",active:"text-gray-700 dark:text-gray-200",inactive:"text-gray-400 dark:text-gray-500 group-hover:text-gray-700 dark:group-hover:text-gray-200"},avatar:{base:"flex-shrink-0",size:"2xs"},badge:{base:"flex-shrink-0 ml-auto relative rounded",color:"gray",variant:"solid",size:"xs"}},Qt={wrapper:"relative space-y-2",container:"relative w-full",base:"focus:outline-none",list:{base:"relative",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-lg",shadow:"",padding:"p-1",height:"h-10",width:"w-full",marker:{wrapper:"absolute top-[4px] left-[4px] duration-200 ease-out focus:outline-none",base:"w-full h-full",background:"bg-white dark:bg-gray-900",rounded:"rounded-md",shadow:"shadow-sm"},tab:{base:"relative inline-flex items-center justify-center flex-shrink-0 w-full ui-focus-visible:outline-0 ui-focus-visible:ring-2 ui-focus-visible:ring-primary-500 dark:ui-focus-visible:ring-primary-400 ui-not-focus-visible:outline-none focus:outline-none disabled:cursor-not-allowed disabled:opacity-75 transition-colors duration-200 ease-out",background:"",active:"text-gray-900 dark:text-white",inactive:"text-gray-500 dark:text-gray-400",height:"h-8",padding:"px-3",size:"text-sm",font:"font-medium",rounded:"rounded-md",shadow:"",icon:"w-4 h-4 flex-shrink-0 mr-2"}}},Xt={wrapper:"relative",container:"z-20 group",width:"",background:"bg-white dark:bg-gray-900",shadow:"shadow-lg",rounded:"rounded-md",ring:"ring-1 ring-gray-200 dark:ring-gray-800",base:"overflow-hidden focus:outline-none relative",transition:{enterActiveClass:"transition ease-out duration-200",enterFromClass:"opacity-0 translate-y-1",enterToClass:"opacity-100 translate-y-0",leaveActiveClass:"transition ease-in duration-150",leaveFromClass:"opacity-100 translate-y-0",leaveToClass:"opacity-0 translate-y-1"},popper:{placement:"bottom-start",scroll:!1},arrow:yt};async function Yt(e,a){return await Zt(a).catch(m=>(console.error("Failed to get image meta for "+a,m+""),{width:0,height:0,ratio:0}))}async function Zt(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((a,u)=>{const m=new Image;m.onload=()=>{const n={width:m.width,height:m.height,ratio:m.width/m.height};a(n)},m.onerror=n=>u(n),m.src=e})}function Xe(e){return a=>a?e[a]||a:e.missingValue}function en({formatter:e,keyMap:a,joinWith:u="/",valueMap:m}={}){e||(e=(l,d)=>`${l}=${d}`),a&&typeof a!="function"&&(a=Xe(a));const n=m||{};return Object.keys(n).forEach(l=>{typeof n[l]!="function"&&(n[l]=Xe(n[l]))}),(l={})=>Object.entries(l).filter(([p,_])=>typeof _<"u").map(([p,_])=>{const c=n[p];return typeof c=="function"&&(_=c(l[p])),p=typeof a=="function"?a(p):p,e(p,_)}).join(u)}function fe(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return Number.parseInt(e,10)}function tn(e=""){if(e===void 0||!e.length)return[];const a=new Set;for(const u of e.split(" ")){const m=Number.parseInt(u.replace("x",""));m&&a.add(m)}return Array.from(a)}function nn(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function on(e){const a={};if(typeof e=="string")for(const u of e.split(/[\s,]+/).filter(m=>m)){const m=u.split(":");m.length!==2?a["1px"]=m[0].trim():a[m[0].trim()]=m[1].trim()}else Object.assign(a,e);return a}function an(e){const a={options:e},u=(n,l={})=>ct(a,n,l),m=(n,l={},d={})=>u(n,{...d,modifiers:Le(l,d.modifiers||{})}).url;for(const n in e.presets)m[n]=(l,d,p)=>m(l,d,{...e.presets[n],...p});return m.options=e,m.getImage=u,m.getMeta=(n,l)=>ln(a,n,l),m.getSizes=(n,l)=>dn(a,n,l),a.$img=m,m}async function ln(e,a,u){const m=ct(e,a,{...u});return typeof m.getMeta=="function"?await m.getMeta():await Yt(e,m.url)}function ct(e,a,u){var c,y;if(a&&typeof a!="string")throw new TypeError(`input must be a string (received ${typeof a}: ${JSON.stringify(a)})`);if(!a||a.startsWith("data:"))return{url:a};const{provider:m,defaults:n}=sn(e,u.provider||e.options.provider),l=rn(e,u.preset);if(a=Ke(a)?a:gt(a),!m.supportsAlias){for(const f in e.options.alias)if(a.startsWith(f)){const r=e.options.alias[f];r&&(a=qe(r,a.slice(f.length)))}}if(m.validateDomains&&Ke(a)){const f=ht(a).host;if(!e.options.domains.find(r=>r===f))return{url:a}}const d=Le(u,l,n);d.modifiers={...d.modifiers};const p=d.modifiers.format;(c=d.modifiers)!=null&&c.width&&(d.modifiers.width=fe(d.modifiers.width)),(y=d.modifiers)!=null&&y.height&&(d.modifiers.height=fe(d.modifiers.height));const _=m.getImage(a,d,e);return _.format=_.format||p||"",_}function sn(e,a){const u=e.options.providers[a];if(!u)throw new Error("Unknown provider: "+a);return u}function rn(e,a){if(!a)return{};if(!e.options.presets[a])throw new Error("Unknown preset: "+a);return e.options.presets[a]}function dn(e,a,u){var k,b,S,h,g;const m=fe((k=u.modifiers)==null?void 0:k.width),n=fe((b=u.modifiers)==null?void 0:b.height),l=on(u.sizes),d=(S=u.densities)!=null&&S.trim()?tn(u.densities.trim()):e.options.densities;nn(d);const p=m&&n?n/m:0,_=[],c=[];if(Object.keys(l).length>=1){for(const D in l){const O=Ye(D,String(l[D]),n,p,e);if(O!==void 0){_.push({size:O.size,screenMaxWidth:O.screenMaxWidth,media:`(max-width: ${O.screenMaxWidth}px)`});for(const C of d)c.push({width:O._cWidth*C,src:Ze(e,a,u,O,C)})}}un(_)}else for(const D of d){const O=Object.keys(l)[0];let C=O?Ye(O,String(l[O]),n,p,e):void 0;C===void 0&&(C={size:"",screenMaxWidth:0,_cWidth:(h=u.modifiers)==null?void 0:h.width,_cHeight:(g=u.modifiers)==null?void 0:g.height}),c.push({width:D,src:Ze(e,a,u,C,D)})}cn(c);const y=c[c.length-1],f=_.length?_.map(D=>`${D.media?D.media+" ":""}${D.size}`).join(", "):void 0,r=f?"w":"x",w=c.map(D=>`${D.src} ${D.width}${r}`).join(", ");return{sizes:f,srcset:w,src:y==null?void 0:y.src}}function Ye(e,a,u,m,n){const l=n.options.screens&&n.options.screens[e]||Number.parseInt(e),d=a.endsWith("vw");if(!d&&/^\d+$/.test(a)&&(a=a+"px"),!d&&!a.endsWith("px"))return;let p=Number.parseInt(a);if(!l||!p)return;d&&(p=Math.round(p/100*l));const _=m?Math.round(p*m):u;return{size:a,screenMaxWidth:l,_cWidth:p,_cHeight:_}}function Ze(e,a,u,m,n){return e.$img(a,{...u.modifiers,width:m._cWidth?m._cWidth*n:void 0,height:m._cHeight?m._cHeight*n:void 0},u)}function un(e){var u;e.sort((m,n)=>m.screenMaxWidth-n.screenMaxWidth);let a=null;for(let m=e.length-1;m>=0;m--){const n=e[m];n.media===a&&e.splice(m,1),a=n.media}for(let m=0;m<e.length;m++)e[m].media=((u=e[m+1])==null?void 0:u.media)||""}function cn(e){e.sort((u,m)=>u.width-m.width);let a=null;for(let u=e.length-1;u>=0;u--){const m=e[u];m.width===a&&e.splice(u,1),a=m.width}}const pn=en({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,a)=>Je(e)+"_"+Je(a)}),mn=(e,{modifiers:a={},baseURL:u}={},m)=>{a.width&&a.height&&(a.resize=`${a.width}x${a.height}`,delete a.width,delete a.height);const n=pn(a)||"_";return u||(u=qe(m.options.nuxt.baseURL,"/_ipx")),{url:qe(u,n,kt(e))}},fn=!0,_n=!0,vn=Object.freeze(Object.defineProperty({__proto__:null,getImage:mn,supportsAlias:_n,validateDomains:fn},Symbol.toStringTag,{value:"Module"})),pt={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipxStatic",domains:[],alias:{},densities:[1,2],format:["webp"]};pt.providers={ipxStatic:{provider:vn,defaults:{}}};const mt=()=>{const e=wt(),a=et();return a.$img||a._img||(a._img=an({...pt,nuxt:{baseURL:e.app.baseURL},runtimeConfig:e}))};function bn(e){var a;(a=performance==null?void 0:performance.mark)==null||a.call(performance,"mark_feature_usage",{detail:{feature:e}})}const yn={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],required:!1,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,required:!1,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],required:!1}},gn=e=>{const a=B(()=>({provider:e.provider,preset:e.preset})),u=B(()=>({width:fe(e.width),height:fe(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce})),m=mt(),n=B(()=>({...e.modifiers,width:fe(e.width),height:fe(e.height),format:e.format,quality:e.quality||m.options.quality,background:e.background,fit:e.fit}));return{options:a,attrs:u,modifiers:n}},hn={...yn,placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1}},kn=["src"],wn=A({__name:"NuxtImg",props:hn,emits:["load","error"],setup(e,{emit:a}){const u=e,m=$t(),n=a,l=!1,d=mt(),p=gn(u),_=U(!1),c=U(),y=B(()=>d.getSizes(u.src,{...p.options.value,sizes:u.sizes,densities:u.densities,modifiers:{...p.modifiers.value,width:fe(u.width),height:fe(u.height)}})),f=B(()=>{const h={...p.attrs.value,"data-nuxt-img":""};return(!u.placeholder||_.value)&&(h.sizes=y.value.sizes,h.srcset=y.value.srcset),h}),r=B(()=>{let h=u.placeholder;if(h===""&&(h=!0),!h||_.value)return!1;if(typeof h=="string")return h;const g=Array.isArray(h)?h:typeof h=="number"?[h,h]:[10,10];return d(u.src,{...p.modifiers.value,width:g[0],height:g[1],quality:g[2]||50,blur:g[3]||3},p.options.value)}),w=B(()=>u.sizes?y.value.src:d(u.src,p.modifiers.value,p.options.value)),k=B(()=>r.value?r.value:w.value),S=et().isHydrating;return ye(()=>{if(r.value){const h=new Image;w.value&&(h.src=w.value),u.sizes&&(h.sizes=y.value.sizes||"",h.srcset=y.value.srcset),h.onload=g=>{_.value=!0,n("load",g)},bn("nuxt-image");return}c.value&&(c.value.complete&&S&&(c.value.getAttribute("data-error")?n("error",new Event("error")):n("load",new Event("load"))),c.value.onload=h=>{n("load",h)},c.value.onerror=h=>{n("error",h)})}),(h,g)=>(i(),$("img",me({ref_key:"imgEl",ref:c,class:u.placeholder&&!_.value?u.placeholderClass:void 0},{...t(l)?{onerror:"this.setAttribute('data-error', 1)"}:{},...f.value,...t(m)},{src:k.value}),null,16,kn))}}),$n=Ie(_e.ui.strategy,_e.ui.contextMenu,Xt),Sn=A({inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},virtualElement:{type:Object,required:!0},popper:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close"],setup(e,{emit:a}){const{ui:u,attrs:m}=ze("contextMenu",H(e,"ui"),$n),n=B(()=>Le({},e.popper,u.value.popper)),l=B({get(){return e.modelValue},set(c){a("update:modelValue",c)}}),d=H(e,"virtualElement"),[,p]=Bt(n.value,d),_=B(()=>tt(nt(u.value.container,u.value.width),e.class));return St(p,()=>{l.value=!1}),{ui:u,attrs:m,isOpen:l,wrapperClass:_,popper:n,container:p}}});function In(e,a,u,m,n,l){return e.isOpen?(i(),$("div",me({key:0,ref:"container",class:e.wrapperClass},e.attrs),[o(Q,me({appear:""},e.ui.transition),{default:s(()=>[J("div",null,[e.popper.arrow?(i(),$("div",{key:0,"data-popper-arrow":"",class:R(Object.values(e.ui.arrow))},null,2)):z("",!0),J("div",{class:R([e.ui.base,e.ui.ring,e.ui.rounded,e.ui.shadow,e.ui.background])},[ce(e.$slots,"default")],2)])]),_:3},16)],16)):z("",!0)}const Un=Te(Sn,[["render",In]]),Dn={class:"flex justify-left"},Vn={class:"p-4"},En=A({__name:"PhotoCard",props:{candId:{type:String,default:""},destination:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,u;const m=W(),n=e,l=U(""),{refresh:d}=([a,u]=X(async()=>ut("image",async()=>{const b=await $fetch("/api/image",{params:{image:n.destination},responseType:"blob"});l.value=window.URL.createObjectURL(new Blob([b]))})),a=await a,u(),a);async function p(b){if(!b)return;const S=new FormData,h=b[0];S.append("file",h),await m("/api/file/image/"+n.candId,{method:"POST",body:S}),await d()}function _(b){var S;(S=document.getElementById(b))==null||S.click()}const{x:c,y}=It(),{y:f}=Ut(),r=U(!1),w=U({getBoundingClientRect:()=>({})});function k(){const b=t(y)-t(f),S=t(c);w.value.getBoundingClientRect=()=>({width:0,height:0,top:b,left:S}),r.value=!0}return(b,S)=>{const h=wn,g=se,D=G,O=Un,C=Z;return i(),$("div",Dn,[o(C,{ui:{body:{padding:"p-1 sm:p-1"}},onContextmenu:ee(k,["prevent"])},{default:s(()=>[o(h,{src:t(l),width:"180",height:"180"},null,8,["src"]),je(o(g,{id:"image-file",type:"file",accept:"image/*",multiple:"",onChange:S[0]||(S[0]=x=>p(x))},null,512),[[Re,!1]]),n.editable?(i(),I(O,{key:0,modelValue:t(r),"onUpdate:modelValue":S[2]||(S[2]=x=>He(r)?r.value=x:null),"virtual-element":t(w)},{default:s(()=>[J("div",Vn,[o(D,{label:"Загрузить",variant:"link",onClick:S[1]||(S[1]=x=>_("image-file"))})])]),_:1},8,["modelValue","virtual-element"])):z("",!0)]),_:1})])}}}),Fn={class:"flex grid grid-cols-6 gap-3 mb-3"},ae=A({__name:"LabelSlot",props:{label:{type:String,default:""},labelClass:{type:String,default:"col-span-1"},inputClass:{type:String,default:"col-span-5 break-words"}},setup(e){const a=e;return(u,m)=>(i(),$("div",Fn,[J("div",{class:R(a.labelClass)},V(a.label),3),J("div",{class:R(a.inputClass)},[ce(u.$slots,"default")],2)]))}}),Cn=Ie(_e.ui.strategy,_e.ui.horizontalNavigation,Jt),xn=A({components:{UIcon:we,UAvatar:ot,UBadge:Ne,ULink:at},inheritAttrs:!1,props:{links:{type:Array,default:()=>[]},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:a,attrs:u}=ze("horizontalNavigation",H(e,"ui"),Cn,H(e,"class")),m=B(()=>Array.isArray(e.links[0])?e.links:[e.links]);return{ui:a,attrs:u,sections:m,getULinkProps:Dt,twMerge:tt,twJoin:nt}}}),On={key:0,class:"sr-only"};function Tn(e,a,u,m,n,l){const d=ot,p=we,_=Ne,c=at;return i(),$("nav",me({class:e.ui.wrapper},e.attrs),[(i(!0),$(P,null,N(e.sections,(y,f)=>(i(),$("ul",{key:`section${f}`,class:R(e.ui.container)},[(i(!0),$(P,null,N(y,(r,w)=>(i(),$("li",{key:`section${f}-${w}`,class:R(e.ui.inner)},[o(c,me({ref_for:!0},e.getULinkProps(r),{class:[e.ui.base,e.ui.before,e.ui.after],"active-class":e.ui.active,"inactive-class":e.ui.inactive,onClick:r.click,onKeyup:a[0]||(a[0]=Me(k=>k.target.blur(),["enter"]))}),{default:s(({isActive:k})=>[ce(e.$slots,"avatar",{link:r,isActive:k},()=>[r.avatar?(i(),I(d,me({key:0,ref_for:!0},{size:e.ui.avatar.size,...r.avatar},{class:[e.ui.avatar.base]}),null,16,["class"])):z("",!0)]),ce(e.$slots,"icon",{link:r,isActive:k},()=>[r.icon?(i(),I(p,{key:0,name:r.icon,class:R(e.twMerge(e.twJoin(e.ui.icon.base,k?e.ui.icon.active:e.ui.icon.inactive),r.iconClass))},null,8,["name","class"])):z("",!0)]),ce(e.$slots,"default",{link:r,isActive:k},()=>[r.label?(i(),$("span",{key:0,class:R(e.twMerge(e.ui.label,r.labelClass))},[k?(i(),$("span",On," Current page: ")):z("",!0),E(" "+V(r.label),1)],2)):z("",!0)]),ce(e.$slots,"badge",{link:r,isActive:k},()=>[r.badge?(i(),I(_,me({key:0,ref_for:!0},{size:e.ui.badge.size,color:e.ui.badge.color,variant:e.ui.badge.variant,...typeof r.badge=="string"||typeof r.badge=="number"?{label:r.badge}:r.badge},{class:e.ui.badge.base}),null,16,["class"])):z("",!0)])]),_:2},1040,["class","active-class","inactive-class","onClick"])],2))),128))],2))),128))],16)}const zn=Te(xn,[["render",Tn]]),An={key:0},le=A({__name:"NaviHorizont",props:{navlen:{type:Number,default:3},candId:{type:String,default:""},inputId:{type:String,default:""},item:{type:String,default:""}},emits:["delete","update","upload"],setup(e,{emit:a}){const u=Y(),m=W(),n=a,l=e,d=[{label:"Изменить",icon:"i-heroicons-pencil-square",click:()=>n("update")},{label:"Удалить",icon:"i-heroicons-trash",click:()=>n("delete")},{label:"Загрузить",icon:"i-heroicons-cloud-arrow-up",slot:"upload",click:()=>{var _;return(_=document.getElementById(l.inputId))==null?void 0:_.click()}}];async function p(_){const c=new FormData;if(_){for(const y of _)c.append("file",y);await m(`/api/file/${l.item}/${l.candId}`,{method:"POST",body:c}),u.add({icon:"i-heroicons-check-circle",title:"Информация",description:"Файлы успешно загружены",color:"green"})}c.delete("file")}return(_,c)=>{const y=zn,f=se;return i(),$(P,null,[o(y,{links:d.slice(0,l.navlen)},null,8,["links"]),e.navlen==3?(i(),$("div",An,[je(o(f,{id:l.inputId,type:"file",accept:"*",multiple:"",onChange:c[0]||(c[0]=r=>p(r))},null,8,["id"]),[[Re,!1]])])):z("",!0)],64)}}}),Bn={key:0},Pn={key:1},qn={key:1},Mn=A({__name:"ResumeDiv",props:{editable:{type:Boolean,default:!1},candId:{type:String,default:""},person:{type:Object,default:{}}},emits:["update"],setup(e,{emit:a}){te(["FormsResumeForm","ElementsSkeletonDiv"]);const u=a,m=Y(),n=W(),l=e,d=U(!1),p=U(""),_=U(!1);async function c(){confirm("Вы действительно хотите изменить регион?")&&(await n(`/api/region/${l.candId}`,{params:{region:p.value}}),u("update"),m.add({icon:"i-heroicons-check-circle",title:"Информация",description:"Изменение региона успешно",color:"green"}))}async function y(){await n("/api/folder/"+l.candId)}async function f(k){_.value=!0,d.value=!1,await n("/api/persons/"+l.candId,{method:"POST",body:k}),m.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),_.value=!1,u("update")}async function r(){confirm("Вы действительно хотите удалить запись?")&&(await n(`/api/persons/${l.candId}`,{method:"DELETE"}),m.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${l.candId} удалена`,color:"primary"}),Vt("/persons"))}function w(){d.value=!1,u("update")}return(k,b)=>{const S=Rt,h=oe,g=ve,D=ae,O=G,C=le,x=Z;return i(),I(x,null,ne({default:s(()=>[t(d)?(i(),$("div",Bn,[o(S,{resume:l.person,onCancel:w,onUpdate:f},null,8,["resume"])])):(i(),$("div",Pn,[t(_)?(i(),I(h,{key:0,rows:14})):(i(),$("div",qn,[o(D,{label:"Регион"},{default:s(()=>[o(g,{modelValue:t(p),"onUpdate:modelValue":b[0]||(b[0]=T=>He(p)?p.value=T:null),style:{width:"20%"},options:["Главный офис","РЦ Юг","РЦ Запад","РЦ Урал","РЦ Восток"],disabled:!l.editable,placeholder:l.person.region,onChange:c},null,8,["modelValue","disabled","placeholder"])]),_:1}),o(D,{label:"Фамилия"},{default:s(()=>[E(V(l.person.surname),1)]),_:1}),o(D,{label:"Имя"},{default:s(()=>[E(V(l.person.firstname),1)]),_:1}),o(D,{label:"Отчество"},{default:s(()=>[E(V(l.person.patronymic),1)]),_:1}),o(D,{label:"Дата рождения"},{default:s(()=>[E(V(new Date(String(l.person.birthday)).toLocaleDateString("ru-RU")),1)]),_:1}),o(D,{label:"Место рождения"},{default:s(()=>[E(V(l.person.birthplace),1)]),_:1}),o(D,{label:"Гражданство"},{default:s(()=>[E(V(l.person.citizenship),1)]),_:1}),l.person.dual?(i(),I(D,{key:0,label:"Двойное гражданство"},{default:s(()=>[E(V(l.person.dual),1)]),_:1})):z("",!0),o(D,{label:"СНИЛС"},{default:s(()=>[E(V(l.person.snils),1)]),_:1}),o(D,{label:"ИНН"},{default:s(()=>[E(V(l.person.inn),1)]),_:1}),o(D,{label:"Семейное положение"},{default:s(()=>[E(V(l.person.marital),1)]),_:1}),o(D,{label:"Дата записи"},{default:s(()=>[E(V(l.person.created?new Date(l.person.created+" UTC").toLocaleString("ru-RU"):""),1)]),_:1}),o(D,{label:"Пользователь"},{default:s(()=>[E(V(l.person.username?l.person.username:""),1)]),_:1}),l.person.addition?(i(),I(D,{key:1,label:"Дополнительная информация"},{default:s(()=>[E(V(l.person.addition),1)]),_:1})):z("",!0),o(D,{label:"Материалы"},{default:s(()=>[o(O,{label:l.person.destination,variant:"link",onClick:y},null,8,["label"])]),_:1})]))]))]),_:2},[l.editable&&!t(d)?{name:"footer",fn:s(()=>[o(C,{"cand-id":l.candId,"input-id":"resume-file",item:"persons",onDelete:r,onUpdate:b[1]||(b[1]=T=>d.value=!0)},null,8,["cand-id"])]),key:"0"}:void 0]),1024)}}}),Ln=A({__name:"StaffForm",props:{staff:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const u=a,n=H(e.staff);function l(){u("update",n.value),p()}function d(){u("cancel"),p()}function p(){Object.assign(n.value,{position:"",department:""})}return(_,c)=>{const y=se,f=ie,r=de,w=ue;return i(),I(w,{state:t(n),onSubmit:ee(l,["prevent"])},{default:s(()=>[o(f,{class:"mb-3",label:"Должность"},{default:s(()=>[o(y,{modelValue:t(n).position,"onUpdate:modelValue":c[0]||(c[0]=k=>t(n).position=k),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Должность"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Подразделение"},{default:s(()=>[o(y,{modelValue:t(n).department,"onUpdate:modelValue":c[1]||(c[1]=k=>t(n).department=k),modelModifiers:{trim:!0,lazy:!0},placeholder:"Подразделение"},null,8,["modelValue"])]),_:1}),o(r,{onCancel:d})]),_:1},8,["state"])}}}),jn={key:0,class:"py-3"},Hn={key:1},Rn={key:1},Nn={key:2,class:"p-3"},Gn={key:1,class:"text-primary"},Wn=A({__name:"StaffDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,u;te(["FormsStaffForm","ElementsSkeletonDiv"]);const m=W(),n=Y(),l=e,d=U(!1),p=U(!1),_=U(!1),c=U(""),y=U({}),{data:f,refresh:r,status:w}=([a,u]=X(async()=>re("staffs",async()=>await m("/api/staffs/"+l.candId))),a=await a,u(),a);async function k(g){p.value=!0,h(),await m("/api/staffs/"+l.candId,{method:"POST",body:g}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),p.value=!1,r()}async function b(g){h(),confirm("Вы действительно хотите удалить запись?")&&(await m("/api/staffs/"+g,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${g} удалена`,color:"primary"}),r())}function S(){h(),r()}function h(){_.value=!1,c.value="",d.value=!1}return(g,D)=>{const O=G,C=Ln,x=Z,T=oe,F=ae,M=le;return i(),$(P,null,[l.editable?(i(),I(O,{key:0,label:t(d)?"Скрыть форму":"Добавить запись",variant:"link",onClick:D[0]||(D[0]=v=>d.value=!t(d))},null,8,["label"])):z("",!0),o(Q,{name:"slide-fade"},{default:s(()=>[t(d)?(i(),$("div",jn,[o(x,null,{default:s(()=>[o(C,{"cand-id":l.candId,onCancel:S,onUpdate:k},null,8,["cand-id"])]),_:1})])):z("",!0)]),_:1}),t(f)&&t(f).length?(i(),$("div",Hn,[(i(!0),$(P,null,N(t(f),(v,q)=>(i(),$("div",{key:q,class:"p-1"},[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:2})):(i(),I(x,{key:1},ne({default:s(()=>[t(_)&&t(c)==v.id.toString()?(i(),I(C,{key:0,"cand-id":l.candId,staff:t(y),onCancel:S,onUpdate:k},null,8,["cand-id","staff"])):(i(),$("div",Rn,[o(F,{label:"Должность"},{default:s(()=>[E(V(v.position),1)]),_:2},1024),o(F,{label:"Департамент"},{default:s(()=>[E(V(v.department),1)]),_:2},1024)]))]),_:2},[l.editable&&(!t(_)||t(c)!=v.id.toString())?{name:"footer",fn:s(()=>[o(M,{navlen:2,onDelete:L=>b(v.id),onUpdate:L=>{y.value=v,c.value=v.id.toString(),_.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(i(),$("div",Nn,[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:2})):(i(),$("p",Gn,"Данные о должностях отсутствуют"))]))],64)}}}),Kn=A({__name:"EducationForm",props:{education:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const u=a,n=H(e.education);function l(){u("update",n.value),p()}function d(){u("cancel"),p()}function p(){Object.assign(n.value,{view:"",institution:"",finished:"",specialty:""})}return(_,c)=>{const y=ve,f=ie,r=se,w=de,k=ue;return i(),I(k,{state:t(n),onSubmit:ee(l,["prevent"])},{default:s(()=>[o(f,{class:"mb-3",label:"Вид образования"},{default:s(()=>[o(y,{modelValue:t(n).view,"onUpdate:modelValue":c[0]||(c[0]=b=>t(n).view=b),required:"",options:["Основное общее","Среднее общее","Среднее профессиональное","Высшее","Неоконченное высшее образование","Другое образование"]},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Название учебного заведения"},{default:s(()=>[o(r,{modelValue:t(n).institution,"onUpdate:modelValue":c[1]||(c[1]=b=>t(n).institution=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Название учебного заведения"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Год окончания"},{default:s(()=>[o(r,{modelValue:t(n).finished,"onUpdate:modelValue":c[2]||(c[2]=b=>t(n).finished=b),modelModifiers:{trim:!0,lazy:!0},placeholder:"Год окончания"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Специальность"},{default:s(()=>[o(r,{modelValue:t(n).specialty,"onUpdate:modelValue":c[3]||(c[3]=b=>t(n).specialty=b),modelModifiers:{trim:!0,lazy:!0},placeholder:"Специальность"},null,8,["modelValue"])]),_:1}),o(w,{onCancel:d})]),_:1},8,["state"])}}}),Jn={key:0,class:"py-3"},Qn={key:1},Xn={key:1},Yn={key:2,class:"p-3"},Zn={key:1,class:"text-primary"},eo=A({__name:"EducateDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,u;te(["FormsEducationForm","ElementsSkeletonDiv"]);const m=W(),n=Y(),l=e,d=U(!1),p=U(!1),_=U(""),c=U(!1),y=U({}),{data:f,refresh:r,status:w}=([a,u]=X(async()=>re("educations",async()=>await m("/api/educations/"+l.candId))),a=await a,u(),a);async function k(g){p.value=!0,h(),await m("/api/educations/"+l.candId,{method:"POST",body:g}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),p.value=!1,r()}async function b(g){h(),confirm("Вы действительно хотите удалить запись?")&&(await m("/api/educations/"+g,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${g} удалена`,color:"primary"}),r())}async function S(){h(),r()}function h(){c.value=!1,_.value="",d.value=!1}return(g,D)=>{const O=G,C=Kn,x=Z,T=oe,F=ae,M=le;return i(),$(P,null,[l.editable?(i(),I(O,{key:0,label:t(d)?"Скрыть форму":"Добавить запись",variant:"link",onClick:D[0]||(D[0]=v=>d.value=!t(d))},null,8,["label"])):z("",!0),o(Q,{name:"slide-fade"},{default:s(()=>[t(d)?(i(),$("div",Jn,[o(x,null,{default:s(()=>[o(C,{"cand-id":l.candId,onCancel:S,onUpdate:k},null,8,["cand-id"])]),_:1})])):z("",!0)]),_:1}),t(f)&&t(f).length?(i(),$("div",Qn,[(i(!0),$(P,null,N(t(f),(v,q)=>(i(),$("div",{key:q,class:"p-1"},[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:8})):(i(),I(x,{key:1},ne({default:s(()=>[t(c)&&t(_)==v.id.toString()?(i(),I(C,{key:0,"cand-id":l.candId,education:t(y),onCancel:S,onUpdate:k},null,8,["cand-id","education"])):(i(),$("div",Xn,[o(F,{label:"Уровень образования"},{default:s(()=>[E(V(v.view),1)]),_:2},1024),o(F,{label:"Название учебного заведения"},{default:s(()=>[E(V(v.institution),1)]),_:2},1024),o(F,{label:"Год окончания"},{default:s(()=>[E(V(v.finished),1)]),_:2},1024),o(F,{label:"Специальность"},{default:s(()=>[E(V(v.specialty),1)]),_:2},1024)]))]),_:2},[l.editable&&(!t(c)||t(_)!=v.id.toString())?{name:"footer",fn:s(()=>[o(M,{navlen:2,onDelete:L=>b(v.id),onUpdate:L=>{y.value=v,_.value=v.id.toString(),c.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(i(),$("div",Yn,[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:8})):(i(),$("p",Zn,"Данные отсутствуют"))]))],64)}}}),to=A({__name:"WorkplaceForm",props:{work:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const u=a,n=H(e.work);n.value.starts=n.value.starts?new Date(n.value.starts).toISOString().slice(0,10):"",n.value.finished=n.value.finished?new Date(n.value.finished).toISOString().slice(0,10):"";function l(){u("update",n.value),p()}function d(){u("cancel"),p()}function p(){Object.assign(n.value,{now_work:!1,starts:"",finished:"",workplace:"",position:"",addresses:"",reason:""})}return(_,c)=>{const y=Nt,f=ie,r=se,w=de,k=ue;return i(),I(k,{state:t(n),onSubmit:ee(l,["prevent"])},{default:s(()=>[o(f,{class:"mb-3",label:"Текущая работа"},{default:s(()=>[o(y,{modelValue:t(n).now_work,"onUpdate:modelValue":c[0]||(c[0]=b=>t(n).now_work=b)},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Начало работы"},{default:s(()=>[o(r,{modelValue:t(n).starts,"onUpdate:modelValue":c[1]||(c[1]=b=>t(n).starts=b),required:"",placeholder:"Начало работы",type:"date"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Окончание работы"},{default:s(()=>[o(r,{modelValue:t(n).finished,"onUpdate:modelValue":c[2]||(c[2]=b=>t(n).finished=b),required:"",placeholder:"Окончание работы",type:"date"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Место работы"},{default:s(()=>[o(r,{modelValue:t(n).workplace,"onUpdate:modelValue":c[3]||(c[3]=b=>t(n).workplace=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Место работы"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Должность"},{default:s(()=>[o(r,{modelValue:t(n).position,"onUpdate:modelValue":c[4]||(c[4]=b=>t(n).position=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Должность"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Адрес организации"},{default:s(()=>[o(r,{modelValue:t(n).addresses,"onUpdate:modelValue":c[5]||(c[5]=b=>t(n).addresses=b),modelModifiers:{trim:!0,lazy:!0},placeholder:"Адрес организации"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Причина увольнения"},{default:s(()=>[o(r,{modelValue:t(n).reason,"onUpdate:modelValue":c[6]||(c[6]=b=>t(n).reason=b),modelModifiers:{trim:!0,lazy:!0},placeholder:"Причина увольнения"},null,8,["modelValue"])]),_:1}),o(w,{onCancel:d})]),_:1},8,["state"])}}}),no={key:0,class:"py-3"},oo={key:1},ao={key:1},lo={key:2,class:"p-3"},so={key:1,class:"text-primary"},io=A({__name:"WorkDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,u;te(["FormsWorkForm","ElementsSkeletonDiv"]);const m=W(),n=Y(),l=e,d=U(!1),p=U(!1),_=U(!1),c=U(""),y=U({}),{data:f,refresh:r,status:w}=([a,u]=X(async()=>re("workplaces",async()=>await m("/api/workplaces/"+l.candId))),a=await a,u(),a);async function k(g){p.value=!1,h(),await m("/api/workplaces/"+l.candId,{method:"POST",body:g}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),p.value=!1,r()}async function b(g){h(),confirm("Вы действительно хотите удалить запись?")&&(await m("/api/workplaces/"+g,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${g} удалена`,color:"primary"}),r())}async function S(){h(),r()}function h(){_.value=!1,c.value="",d.value=!1}return(g,D)=>{const O=G,C=to,x=Z,T=oe,F=ae,M=le;return i(),$(P,null,[l.editable?(i(),I(O,{key:0,label:t(d)?"Скрыть форму":"Добавить запись",variant:"link",onClick:D[0]||(D[0]=v=>d.value=!t(d))},null,8,["label"])):z("",!0),o(Q,{name:"slide-fade"},{default:s(()=>[t(d)?(i(),$("div",no,[o(x,null,{default:s(()=>[o(C,{"cand-id":l.candId,onCancel:S,onUpdate:k},null,8,["cand-id"])]),_:1})])):z("",!0)]),_:1}),t(f)&&t(f).length?(i(),$("div",oo,[(i(!0),$(P,null,N(t(f),(v,q)=>(i(),$("div",{key:q,class:"p-1"},[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:8})):(i(),I(x,{key:1},ne({default:s(()=>[t(_)&&t(c)==v.id.toString()?(i(),I(C,{key:0,"cand-id":l.candId,work:t(y),onCancel:S,onUpdate:k},null,8,["cand-id","work"])):(i(),$("div",ao,[v.now_work?(i(),I(F,{key:0,label:"Текущая работа"},{default:s(()=>[E(V(v.now_work?"Да":"Нет"),1)]),_:2},1024)):z("",!0),o(F,{label:"Начало работы"},{default:s(()=>[E(V(new Date(v.starts).toLocaleDateString("ru-RU")),1)]),_:2},1024),v.now_work?z("",!0):(i(),I(F,{key:1,label:"Окончание работы"},{default:s(()=>[E(V(new Date(v.finished).toLocaleDateString("ru-RU")),1)]),_:2},1024)),o(F,{label:"Место работы"},{default:s(()=>[E(V(v.workplace),1)]),_:2},1024),o(F,{label:"Адрес"},{default:s(()=>[E(V(v.addresses),1)]),_:2},1024),o(F,{label:"Должность"},{default:s(()=>[E(V(v.position),1)]),_:2},1024),v.reason?(i(),I(F,{key:2,label:"Причина увольнения"},{default:s(()=>[E(V(v.reason),1)]),_:2},1024)):z("",!0)]))]),_:2},[l.editable&&(!t(_)||t(c)!=v.id.toString())?{name:"footer",fn:s(()=>[o(M,{navlen:2,onDelete:L=>b(v.id),onUpdate:L=>{y.value=v,c.value=v.id.toString(),_.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(i(),$("div",lo,[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:8})):(i(),$("p",so,"Данные о работе отсутствуют"))]))],64)}}}),ro=A({__name:"DocumentForm",props:{docs:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const u=a,n=H(e.docs);n.value.issue=n.value.issue?new Date(n.value.issue).toISOString().slice(0,10):"";function l(){u("update",n.value),p()}function d(){u("cancel"),p()}function p(){Object.assign(n.value,{view:"",series:"",digits:"",agency:"",issue:""})}return(_,c)=>{const y=ve,f=ie,r=se,w=de,k=ue;return i(),I(k,{state:t(n),onSubmit:ee(l,["prevent"])},{default:s(()=>[o(f,{class:"mb-3",label:"Вид документа"},{default:s(()=>[o(y,{modelValue:t(n).view,"onUpdate:modelValue":c[0]||(c[0]=b=>t(n).view=b),required:"",options:["Паспорт","Иностарнный паспорт","Другое"]},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Серия документа"},{default:s(()=>[o(r,{modelValue:t(n).series,"onUpdate:modelValue":c[1]||(c[1]=b=>t(n).series=b),modelModifiers:{trim:!0,lazy:!0},placeholder:"Серия документа"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Номер документа"},{default:s(()=>[o(r,{modelValue:t(n).digits,"onUpdate:modelValue":c[2]||(c[2]=b=>t(n).digits=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Номер документа"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Кем выдан"},{default:s(()=>[o(r,{modelValue:t(n).agency,"onUpdate:modelValue":c[3]||(c[3]=b=>t(n).agency=b),modelModifiers:{trim:!0},placeholder:"Кем выдан"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Дата выдачи"},{default:s(()=>[o(r,{modelValue:t(n).issue,"onUpdate:modelValue":c[4]||(c[4]=b=>t(n).issue=b),modelModifiers:{trim:!0,lazy:!0},required:"",type:"date"},null,8,["modelValue"])]),_:1}),o(w,{onCancel:d})]),_:1},8,["state"])}}}),uo={key:0,class:"py-3"},co={key:1},po={key:1},mo={key:2,class:"p-3"},fo={key:1,class:"text-primary"},_o=A({__name:"DocumDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,u;te(["FormsDocumentForm","ElementsSkeletonDiv"]);const m=W(),n=Y(),l=e,d=U(!1),p=U(!1),_=U(""),c=U(!1),y=U({}),{data:f,refresh:r,status:w}=([a,u]=X(async()=>re("documents",async()=>await m("/api/documents/"+l.candId))),a=await a,u(),a);async function k(g){p.value=!0,h(),await m("/api/documents/"+l.candId,{method:"POST",body:g}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),p.value=!1,r()}async function b(g){h(),confirm("Вы действительно хотите удалить запись?")&&(await m("/api/documents/"+g,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${g} удалена`,color:"primary"}),r())}async function S(){h(),r()}function h(){c.value=!1,_.value="",d.value=!1}return(g,D)=>{const O=G,C=ro,x=Z,T=oe,F=ae,M=le;return i(),$(P,null,[l.editable?(i(),I(O,{key:0,label:t(d)?"Скрыть форму":"Добавить запись",variant:"link",onClick:D[0]||(D[0]=v=>d.value=!t(d))},null,8,["label"])):z("",!0),o(Q,{name:"slide-fade"},{default:s(()=>[t(d)?(i(),$("div",uo,[o(x,null,{default:s(()=>[o(C,{"cand-id":l.candId,onCancel:S,onUpdate:k},null,8,["cand-id"])]),_:1})])):z("",!0)]),_:1}),t(f)&&t(f).length?(i(),$("div",co,[(i(!0),$(P,null,N(t(f),(v,q)=>(i(),$("div",{key:q,class:"p-1"},[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:8})):(i(),I(x,{key:1},ne({default:s(()=>[t(c)&&t(_)==v.id.toString()?(i(),I(C,{key:0,"cand-id":l.candId,docs:t(y),onCancel:S,onUpdate:k},null,8,["cand-id","docs"])):(i(),$("div",po,[o(F,{label:"Вид документа"},{default:s(()=>[E(V(v.view),1)]),_:2},1024),o(F,{label:"Номер документа"},{default:s(()=>[E(V(v.digits),1)]),_:2},1024),o(F,{label:"Серия документа"},{default:s(()=>[E(V(v.series),1)]),_:2},1024),o(F,{label:"Дата выдачи"},{default:s(()=>[E(V(v.issue?new Date(String(v.issue)).toLocaleDateString("ru-RU"):""),1)]),_:2},1024),o(F,{label:"Кем выдан"},{default:s(()=>[E(V(v.agency),1)]),_:2},1024)]))]),_:2},[l.editable&&(!t(c)||t(_)!=v.id.toString())?{name:"footer",fn:s(()=>[o(M,{navlen:2,onDelete:L=>b(v.id),onUpdate:L=>{y.value=v,_.value=v.id.toString(),c.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(i(),$("div",mo,[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:8})):(i(),$("p",fo,"Данные отсутствуют"))]))],64)}}}),vo=A({__name:"AddressForm",props:{addrs:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const u=a,n=H(e.addrs);function l(){u("update",n.value),p()}function d(){u("cancel"),p()}function p(){Object.assign(n.value,{view:"",addresses:""})}return(_,c)=>{const y=ve,f=ie,r=se,w=de,k=ue;return i(),I(k,{state:t(n),onSubmit:ee(l,["prevent"])},{default:s(()=>[o(f,{class:"mb-3",label:"Вид адреса"},{default:s(()=>[o(y,{modelValue:t(n).view,"onUpdate:modelValue":c[0]||(c[0]=b=>t(n).view=b),modelModifiers:{trim:!0,lazy:!0},required:"",options:["Адрес регистрации","Адрес проживания","Другое"]},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Адрес"},{default:s(()=>[o(r,{modelValue:t(n).addresses,"onUpdate:modelValue":c[1]||(c[1]=b=>t(n).addresses=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Адрес"},null,8,["modelValue"])]),_:1}),o(w,{onCancel:d})]),_:1},8,["state"])}}}),bo={key:0,class:"p-1"},yo={key:1},go={key:1},ho={key:2,class:"p-3"},ko={key:1,class:"text-primary"},wo=A({__name:"AddressDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,u;te(["FormsAddressForm","ElementsSkeletonDiv"]);const m=W(),n=Y(),l=e,d=U(!1),p=U(!1),_=U(!1),c=U(""),y=U({}),{data:f,refresh:r,status:w}=([a,u]=X(async()=>re("addresses",async()=>await m("/api/addresses/"+l.candId))),a=await a,u(),a);async function k(g){p.value=!0,h(),await m("/api/addresses/"+l.candId,{method:"POST",body:g}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),p.value=!1,r()}async function b(g){h(),confirm("Вы действительно хотите удалить запись?")&&(await m("/api/addresses/"+g,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${g} удалена`,color:"primary"}),r())}async function S(){h(),r()}function h(){_.value=!1,d.value=!1,c.value=""}return(g,D)=>{const O=G,C=vo,x=Z,T=oe,F=ae,M=le;return i(),$(P,null,[l.editable?(i(),I(O,{key:0,label:t(d)?"Скрыть форму":"Добавить запись",variant:"link",onClick:D[0]||(D[0]=v=>d.value=!t(d))},null,8,["label"])):z("",!0),o(Q,{name:"slide-fade"},{default:s(()=>[t(d)?(i(),$("div",bo,[o(x,null,{default:s(()=>[o(C,{"cand-id":l.candId,onCancel:S,onUpdate:k},null,8,["cand-id"])]),_:1})])):z("",!0)]),_:1}),t(f)&&t(f).length?(i(),$("div",yo,[(i(!0),$(P,null,N(t(f),(v,q)=>(i(),$("div",{key:q,class:"py-3"},[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:8})):(i(),I(x,{key:1},ne({default:s(()=>[t(_)&&t(c)==v.id.toString()?(i(),I(C,{key:0,"cand-id":l.candId,addrs:t(y),onCancel:S,onUpdate:k},null,8,["cand-id","addrs"])):(i(),$("div",go,[o(F,{label:"Тип"},{default:s(()=>[E(V(v.view),1)]),_:2},1024),o(F,{label:"Адрес"},{default:s(()=>[E(V(v.addresses),1)]),_:2},1024)]))]),_:2},[l.editable&&(!t(_)||t(c)!=v.id.toString())?{name:"footer",fn:s(()=>[o(M,{navlen:2,onDelete:L=>b(v.id),onUpdate:L=>{y.value=v,c.value=v.id.toString(),_.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(i(),$("div",ho,[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:8})):(i(),$("p",ko,"Адреса отсутствуют"))]))],64)}}}),$o=A({__name:"ContactForm",props:{contact:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const u=a,n=H(e.contact);function l(){u("update",n.value),p()}function d(){u("cancel"),p()}function p(){Object.assign(n.value,{view:"",contact:""})}return(_,c)=>{const y=ve,f=ie,r=se,w=de,k=ue;return i(),I(k,{state:t(n),onSubmit:ee(l,["prevent"])},{default:s(()=>[o(f,{class:"mb-3",label:"Вид контакта"},{default:s(()=>[o(y,{modelValue:t(n).view,"onUpdate:modelValue":c[0]||(c[0]=b=>t(n).view=b),modelModifiers:{trim:!0,lazy:!0},required:"",options:["Телефон","Электронная почта","Другое"]},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Контакт"},{default:s(()=>[o(r,{modelValue:t(n).contact,"onUpdate:modelValue":c[1]||(c[1]=b=>t(n).contact=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Контакт"},null,8,["modelValue"])]),_:1}),o(w,{onCancel:d})]),_:1},8,["state"])}}}),So={key:0,class:"py-3"},Io={key:1},Uo={key:1},Do={key:2,class:"p-3"},Vo={key:1,class:"text-primary"},Eo=A({__name:"ContactDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,u;te(["FormsContactForm","ElementsSkeletonDiv"]);const m=W(),n=Y(),l=e,d=U(!1),p=U(!1),_=U(""),c=U(!1),y=U({}),{data:f,refresh:r,status:w}=([a,u]=X(async()=>re("contacts",async()=>await m("/api/contacts/"+l.candId))),a=await a,u(),a);async function k(g){p.value=!0,h(),await m("/api/contacts/"+l.candId,{method:"POST",body:g}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),p.value=!1,r()}async function b(g){h(),confirm("Вы действительно хотите удалить запись?")&&(await m("/api/contacts/"+g,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${g} удалена`,color:"primary"}),r())}async function S(){h(),r()}function h(){c.value=!1,_.value="",d.value=!1}return(g,D)=>{const O=G,C=$o,x=Z,T=oe,F=ae,M=le;return i(),$(P,null,[l.editable?(i(),I(O,{key:0,label:t(d)?"Скрыть форму":"Добавить запись",variant:"link",onClick:D[0]||(D[0]=v=>d.value=!t(d))},null,8,["label"])):z("",!0),o(Q,{name:"slide-fade"},{default:s(()=>[t(d)?(i(),$("div",So,[o(x,null,{default:s(()=>[o(C,{"cand-id":l.candId,onCancel:S,onUpdate:k},null,8,["cand-id"])]),_:1})])):z("",!0)]),_:1}),t(f)&&t(f).length?(i(),$("div",Io,[(i(!0),$(P,null,N(t(f),(v,q)=>(i(),$("div",{key:q,class:"p-1"},[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:8})):(i(),I(x,{key:1},ne({default:s(()=>[t(c)&&t(_)==v.id.toString()?(i(),I(C,{key:0,"cand-id":l.candId,contact:t(y),onCancel:S,onUpdate:k},null,8,["cand-id","contact"])):(i(),$("div",Uo,[o(F,{label:"Вид"},{default:s(()=>[E(V(v.view),1)]),_:2},1024),o(F,{label:"Контакт"},{default:s(()=>[E(V(v.contact),1)]),_:2},1024)]))]),_:2},[l.editable&&(!t(c)||t(_)!=v.id.toString())?{name:"footer",fn:s(()=>[o(M,{navlen:2,onDelete:L=>b(v.id),onUpdate:L=>{y.value=v,_.value=v.id.toString(),c.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(i(),$("div",Do,[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:2})):(i(),$("p",Vo,"Данные отсутствуют"))]))],64)}}}),Fo=A({__name:"AffilationForm",props:{affils:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const u=a,n=H(e.affils);function l(){u("update",n.value),p()}function d(){u("cancel"),p()}function p(){Object.assign(n.value,{view:"",organization:"",inn:""})}return(_,c)=>{const y=ve,f=ie,r=se,w=de,k=ue;return i(),I(k,{state:t(n),onSubmit:ee(l,["prevent"])},{default:s(()=>[o(f,{class:"mb-3",label:"Тип участия"},{default:s(()=>[o(y,{modelValue:t(n).view,"onUpdate:modelValue":c[0]||(c[0]=b=>t(n).view=b),modelModifiers:{trim:!0,lazy:!0},required:"",options:["Являлся государственным/муниципальным служащим","Являлся государственным должностным лицом","Связанные лица работают в государственных организациях","Участвует в деятельности коммерческих организаций"]},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Организация"},{default:s(()=>[o(r,{modelValue:t(n).organization,"onUpdate:modelValue":c[1]||(c[1]=b=>t(n).organization=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Организация"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"ИНН"},{default:s(()=>[o(r,{modelValue:t(n).inn,"onUpdate:modelValue":c[2]||(c[2]=b=>t(n).inn=b),modelModifiers:{trim:!0,lazy:!0},placeholder:"ИНН"},null,8,["modelValue"])]),_:1}),o(w,{onCancel:d})]),_:1},8,["state"])}}}),Co={key:0,class:"py-3"},xo={key:1},Oo={key:1},To={key:2,class:"p-3"},zo={key:1,class:"text-primary"},Ao=A({__name:"AffilDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,u;te(["FormsAffilationForm","ElementsSkeletonDiv"]);const m=W(),n=Y(),l=e,d=U(!1),p=U(!1),_=U(!1),c=U(""),y=U({}),{data:f,refresh:r,status:w}=([a,u]=X(async()=>re("affilations",async()=>await m("/api/affilations/"+l.candId))),a=await a,u(),a);async function k(g){p.value=!0,h(),await m("/api/affilations/"+l.candId,{method:"POST",body:g}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),p.value=!1,r()}async function b(g){h(),confirm("Вы действительно хотите удалить запись?")&&(await m("/api/affilations/"+g,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${g} удалена`,color:"primary"}),r())}async function S(){h(),r()}function h(){_.value=!1,c.value="",d.value=!1}return(g,D)=>{const O=G,C=Fo,x=Z,T=oe,F=ae,M=le;return i(),$(P,null,[l.editable?(i(),I(O,{key:0,label:t(d)?"Скрыть форму":"Добавить запись",variant:"link",onClick:D[0]||(D[0]=v=>d.value=!t(d))},null,8,["label"])):z("",!0),o(Q,{name:"slide-fade"},{default:s(()=>[t(d)?(i(),$("div",Co,[o(x,null,{default:s(()=>[o(C,{"cand-id":l.candId,onCancel:S,onUpdate:k},null,8,["cand-id"])]),_:1})])):z("",!0)]),_:1}),t(f)&&t(f).length?(i(),$("div",xo,[(i(!0),$(P,null,N(t(f),(v,q)=>(i(),$("div",{key:q,class:"p-1"},[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:8})):(i(),I(x,{key:1},ne({default:s(()=>[t(_)&&t(c)==v.id.toString()?(i(),I(C,{key:0,"cand-id":l.candId,affils:t(y),onCancel:S,onUpdate:k},null,8,["cand-id","affils"])):(i(),$("div",Oo,[o(F,{label:"Тип участия"},{default:s(()=>[E(V(v.view),1)]),_:2},1024),o(F,{label:"Организация"},{default:s(()=>[E(V(v.organization),1)]),_:2},1024),o(F,{label:"ИНН"},{default:s(()=>[E(V(v.inn),1)]),_:2},1024)]))]),_:2},[l.editable&&(!t(_)||t(c)!=v.id.toString())?{name:"footer",fn:s(()=>[o(M,{navlen:2,onDelete:L=>b(v.id),onUpdate:L=>{y.value=v,c.value=v.id.toString(),_.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(i(),$("div",To,[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:8})):(i(),$("p",zo,"Данные отсутствуют"))]))],64)}}}),Bo=A({__name:"PreviousForm",props:{previous:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const u=a,n=H(e.previous);function l(){u("update",n.value),p()}function d(){u("cancel"),p()}function p(){Object.assign(n.value,{surname:"",firstname:"",patronymic:"",changed:"",reason:""})}return(_,c)=>{const y=se,f=ie,r=de,w=ue;return i(),I(w,{state:t(n),onSubmit:ee(l,["prevent"])},{default:s(()=>[o(f,{class:"mb-3",label:"Фамилия"},{default:s(()=>[o(y,{modelValue:t(n).surname,"onUpdate:modelValue":c[0]||(c[0]=k=>t(n).surname=k),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Фамилия"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Имя"},{default:s(()=>[o(y,{modelValue:t(n).firstname,"onUpdate:modelValue":c[1]||(c[1]=k=>t(n).firstname=k),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Имя"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Отчество"},{default:s(()=>[o(y,{modelValue:t(n).patronymic,"onUpdate:modelValue":c[2]||(c[2]=k=>t(n).patronymic=k),modelModifiers:{trim:!0,lazy:!0},placeholder:"Отчество"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Год изменения"},{default:s(()=>[o(y,{modelValue:t(n).changed,"onUpdate:modelValue":c[3]||(c[3]=k=>t(n).changed=k),modelModifiers:{trim:!0,lazy:!0},placeholder:"Год изменения"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Причина изменения"},{default:s(()=>[o(y,{modelValue:t(n).reason,"onUpdate:modelValue":c[4]||(c[4]=k=>t(n).reason=k),modelModifiers:{trim:!0,lazy:!0},placeholder:"Причина изменения"},null,8,["modelValue"])]),_:1}),o(r,{onCancel:d})]),_:1},8,["state"])}}}),Po={key:0,class:"py-3"},qo={key:1},Mo={key:1},Lo={key:2,class:"p-3"},jo={key:1,class:"text-primary"},Ho=A({__name:"PrevDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,u;te(["FormsPreviousForm","ElementsSkeletonDiv"]);const m=W(),n=Y(),l=e,d=U(!1),p=U(!1),_=U(!1),c=U(""),y=U({}),{data:f,refresh:r,status:w}=([a,u]=X(async()=>re("previous",async()=>await m("/api/previous/"+l.candId))),a=await a,u(),a);async function k(g){p.value=!0,h(),await m("/api/previous/"+l.candId,{method:"POST",body:g}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),p.value=!1,r()}async function b(g){h(),confirm("Вы действительно хотите удалить запись?")&&(await m("/api/previous/"+g,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${g} удалена`,color:"primary"}),r())}async function S(){h(),r()}function h(){_.value=!1,c.value="",d.value=!1}return(g,D)=>{const O=G,C=Bo,x=Z,T=oe,F=ae,M=le;return i(),$(P,null,[l.editable?(i(),I(O,{key:0,label:t(d)?"Скрыть форму":"Добавить запись",variant:"link",onClick:D[0]||(D[0]=v=>d.value=!t(d))},null,8,["label"])):z("",!0),o(Q,{name:"slide-fade"},{default:s(()=>[t(d)?(i(),$("div",Po,[o(x,null,{default:s(()=>[o(C,{"cand-id":l.candId,onCancel:S,onUpdate:k},null,8,["cand-id"])]),_:1})])):z("",!0)]),_:1}),t(f)&&t(f).length?(i(),$("div",qo,[(i(!0),$(P,null,N(t(f),(v,q)=>(i(),$("div",{key:q,class:"p-1"},[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:4})):(i(),I(x,{key:1},ne({default:s(()=>[t(_)&&t(c)==v.id.toString()?(i(),I(C,{key:0,"cand-id":l.candId,previous:t(y),onCancel:S,onUpdate:k},null,8,["cand-id","previous"])):(i(),$("div",Mo,[o(F,{label:"Фамилия"},{default:s(()=>[E(V(v.surname),1)]),_:2},1024),o(F,{label:"Имя"},{default:s(()=>[E(V(v.firstname),1)]),_:2},1024),v.patronymic?(i(),I(F,{key:0,label:"Отчество"},{default:s(()=>[E(V(v.patronymic),1)]),_:2},1024)):z("",!0),v.changed?(i(),I(F,{key:1,label:"Год изменения"},{default:s(()=>[E(V(v.changed),1)]),_:2},1024)):z("",!0),v.reason?(i(),I(F,{key:2,label:"Причина"},{default:s(()=>[E(V(v.reason),1)]),_:2},1024)):z("",!0)]))]),_:2},[l.editable&&(!t(_)||t(c)!=v.id.toString())?{name:"footer",fn:s(()=>[o(M,{navlen:2,onDelete:L=>b(v.id.toString()),onUpdate:L=>{y.value=v,c.value=v.id.toString(),_.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(i(),$("div",Lo,[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:4})):(i(),$("p",jo,"Данные отсутствуют"))]))],64)}}}),Ro=A({__name:"RelationForm",props:{relation:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const u=a,n=H(e.relation);async function l(){u("update",n.value),p()}function d(){u("cancel"),p()}function p(){Object.assign(n.value,{relation:"",relation_id:""})}return(_,c)=>{const y=ve,f=ie,r=se,w=de,k=ue;return i(),I(k,{state:t(n),onSubmit:ee(l,["prevent"])},{default:s(()=>[o(f,{class:"mb-3",label:"Тип связи"},{default:s(()=>[o(y,{modelValue:t(n).relation,"onUpdate:modelValue":c[0]||(c[0]=b=>t(n).relation=b),modelModifiers:{trim:!0,lazy:!0},required:"",options:["Одно лицо","Родители-Дети","Братья-Сестры","Супруг-Супруга","Родственники","Близкая связь"]},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"ID связи"},{default:s(()=>[o(r,{modelValue:t(n).relation_id,"onUpdate:modelValue":c[1]||(c[1]=b=>t(n).relation_id=b),modelModifiers:{trim:!0,lazy:!0},required:"",type:"number"},null,8,["modelValue"])]),_:1}),o(w,{onCancel:d})]),_:1},8,["state"])}}}),No={key:0,class:"py-3"},Go={key:1},Wo={key:1},Ko={key:2,class:"p-3"},Jo={key:1,class:"text-primary"},Qo=A({__name:"RelateDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,u;te(["FormsRelationForm","ElementsSkeletonDiv"]);const m=W(),n=Y(),l=e,d=U(!1),p=U(!1),_=U(!1),c=U(""),y=U({}),{data:f,refresh:r,status:w}=([a,u]=X(async()=>re("relations",async()=>await m("/api/relations/"+l.candId))),a=await a,u(),a);async function k(g){p.value=!0,h(),await m("/api/relations/"+l.candId,{method:"POST",body:g}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),p.value=!1,r()}async function b(g){h(),confirm("Вы действительно хотите удалить запись?")&&(await m("/api/relations/"+g,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${g} удалена`,color:"primary"}),r())}async function S(){h(),r()}function h(){_.value=!1,c.value="",d.value=!1}return(g,D)=>{const O=G,C=Ro,x=Z,T=oe,F=ae,M=Et,v=le;return i(),$(P,null,[l.editable?(i(),I(O,{key:0,label:t(d)?"Скрыть форму":"Добавить запись",variant:"link",onClick:D[0]||(D[0]=q=>d.value=!t(d))},null,8,["label"])):z("",!0),o(Q,{name:"slide-fade"},{default:s(()=>[t(d)?(i(),$("div",No,[o(x,null,{default:s(()=>[o(C,{"cand-id":l.candId,onCancel:S,onUpdate:k},null,8,["cand-id"])]),_:1})])):z("",!0)]),_:1}),t(f)&&t(f).length?(i(),$("div",Go,[(i(!0),$(P,null,N(t(f),(q,L)=>(i(),$("div",{key:L,class:"p-1"},[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:2})):(i(),I(x,{key:1},ne({default:s(()=>[t(_)&&t(c)==q.id.toString()?(i(),I(C,{key:0,"cand-id":l.candId,relation:t(y),onCancel:S,onUpdate:k},null,8,["cand-id","relation"])):(i(),$("div",Wo,[o(F,{label:"Тип"},{default:s(()=>[E(V(q.relation),1)]),_:2},1024),o(F,{label:"Связь"},{default:s(()=>[o(M,{to:`/profile/${q.relation_id}`},{default:s(()=>[E(" ID #"+V(q.relation_id),1)]),_:2},1032,["to"])]),_:2},1024)]))]),_:2},[l.editable&&(!t(_)||t(c)!=q.id.toString())?{name:"footer",fn:s(()=>[o(v,{navlen:2,onDelete:bt=>b(q.id.toString()),onUpdate:bt=>{y.value=q,c.value=q.id.toString(),_.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(i(),$("div",Ko,[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:2})):(i(),$("p",Jo,"Данные отсутствуют"))]))],64)}}});function Xo(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(a=>setTimeout(()=>{throw a}))}var Yo=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Yo||{});let ft=Symbol("DisclosureContext");function Ge(e){let a=Ue(ft,null);if(a===null){let u=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,Ge),u}return a}let _t=Symbol("DisclosurePanelContext");function Zo(){return Ue(_t,null)}let ea=A({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(e,{slots:a,attrs:u}){let m=U(e.defaultOpen?0:1),n=U(null),l=U(null),d={buttonId:U(`headlessui-disclosure-button-${Ce()}`),panelId:U(`headlessui-disclosure-panel-${Ce()}`),disclosureState:m,panel:n,button:l,toggleDisclosure(){m.value=ke(m.value,{0:1,1:0})},closeDisclosure(){m.value!==1&&(m.value=1)},close(p){d.closeDisclosure();let _=p?p instanceof HTMLElement?p:p.value instanceof HTMLElement?j(p):j(d.button):j(d.button);_==null||_.focus()}};return Ee(ft,d),Pt(B(()=>ke(m.value,{0:xe.Open,1:xe.Closed}))),()=>{let{defaultOpen:p,..._}=e,c={open:m.value===0,close:d.close};return ge({theirProps:_,ourProps:{},slot:c,slots:a,attrs:u,name:"Disclosure"})}}}),ta=A({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:a,slots:u,expose:m}){let n=Ge("DisclosureButton"),l=Zo(),d=B(()=>l===null?!1:l.value===n.panelId.value);ye(()=>{d.value||e.id!==null&&(n.buttonId.value=e.id)}),Ae(()=>{d.value||(n.buttonId.value=null)});let p=U(null);m({el:p,$el:p}),d.value||lt(()=>{n.button.value=p.value});let _=it(B(()=>({as:e.as,type:a.type})),p);function c(){var r;e.disabled||(d.value?(n.toggleDisclosure(),(r=j(n.button))==null||r.focus()):n.toggleDisclosure())}function y(r){var w;if(!e.disabled)if(d.value)switch(r.key){case K.Space:case K.Enter:r.preventDefault(),r.stopPropagation(),n.toggleDisclosure(),(w=j(n.button))==null||w.focus();break}else switch(r.key){case K.Space:case K.Enter:r.preventDefault(),r.stopPropagation(),n.toggleDisclosure();break}}function f(r){switch(r.key){case K.Space:r.preventDefault();break}}return()=>{var r;let w={open:n.disclosureState.value===0},{id:k,...b}=e,S=d.value?{ref:p,type:_.value,onClick:c,onKeydown:y}:{id:(r=n.buttonId.value)!=null?r:k,ref:p,type:_.value,"aria-expanded":n.disclosureState.value===0,"aria-controls":n.disclosureState.value===0||j(n.panel)?n.panelId.value:void 0,disabled:e.disabled?!0:void 0,onClick:c,onKeydown:y,onKeyup:f};return ge({ourProps:S,theirProps:b,slot:w,attrs:a,slots:u,name:"DisclosureButton"})}}}),na=A({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:a,slots:u,expose:m}){let n=Ge("DisclosurePanel");ye(()=>{e.id!==null&&(n.panelId.value=e.id)}),Ae(()=>{n.panelId.value=null}),m({el:n.panel,$el:n.panel}),Ee(_t,n.panelId);let l=qt(),d=B(()=>l!==null?(l.value&xe.Open)===xe.Open:n.disclosureState.value===0);return()=>{var p;let _={open:n.disclosureState.value===0,close:n.close},{id:c,...y}=e,f={id:(p=n.panelId.value)!=null?p:c,ref:n.panel};return ge({ourProps:f,theirProps:y,slot:_,attrs:a,slots:u,features:Oe.RenderStrategy|Oe.Static,visible:d.value,name:"DisclosurePanel"})}}}),oa=A({props:{onFocus:{type:Function,required:!0}},setup(e){let a=U(!0);return()=>a.value?Fe(rt,{as:"button",type:"button",features:Mt.Focusable,onFocus(u){u.preventDefault();let m,n=50;function l(){var d;if(n--<=0){m&&cancelAnimationFrame(m);return}if((d=e.onFocus)!=null&&d.call(e)){a.value=!1,cancelAnimationFrame(m);return}m=requestAnimationFrame(l)}m=requestAnimationFrame(l)}}):null}});var aa=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(aa||{}),la=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(la||{});let vt=Symbol("TabsContext");function De(e){let a=Ue(vt,null);if(a===null){let u=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,De),u}return a}let We=Symbol("TabsSSRContext"),sa=A({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:a,attrs:u,emit:m}){var n;let l=U((n=e.selectedIndex)!=null?n:e.defaultIndex),d=U([]),p=U([]),_=B(()=>e.selectedIndex!==null),c=B(()=>_.value?e.selectedIndex:l.value);function y(b){var S;let h=$e(f.tabs.value,j),g=$e(f.panels.value,j),D=h.filter(O=>{var C;return!((C=j(O))!=null&&C.hasAttribute("disabled"))});if(b<0||b>h.length-1){let O=ke(l.value===null?0:Math.sign(b-l.value),{[-1]:()=>1,0:()=>ke(Math.sign(b),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),C=ke(O,{0:()=>h.indexOf(D[0]),1:()=>h.indexOf(D[D.length-1])});C!==-1&&(l.value=C),f.tabs.value=h,f.panels.value=g}else{let O=h.slice(0,b),C=[...h.slice(b),...O].find(T=>D.includes(T));if(!C)return;let x=(S=h.indexOf(C))!=null?S:f.selectedIndex.value;x===-1&&(x=f.selectedIndex.value),l.value=x,f.tabs.value=h,f.panels.value=g}}let f={selectedIndex:B(()=>{var b,S;return(S=(b=l.value)!=null?b:e.defaultIndex)!=null?S:null}),orientation:B(()=>e.vertical?"vertical":"horizontal"),activation:B(()=>e.manual?"manual":"auto"),tabs:d,panels:p,setSelectedIndex(b){c.value!==b&&m("change",b),_.value||y(b)},registerTab(b){var S;if(d.value.includes(b))return;let h=d.value[l.value];if(d.value.push(b),d.value=$e(d.value,j),!_.value){let g=(S=d.value.indexOf(h))!=null?S:l.value;g!==-1&&(l.value=g)}},unregisterTab(b){let S=d.value.indexOf(b);S!==-1&&d.value.splice(S,1)},registerPanel(b){p.value.includes(b)||(p.value.push(b),p.value=$e(p.value,j))},unregisterPanel(b){let S=p.value.indexOf(b);S!==-1&&p.value.splice(S,1)}};Ee(vt,f);let r=U({tabs:[],panels:[]}),w=U(!1);ye(()=>{w.value=!0}),Ee(We,B(()=>w.value?null:r.value));let k=B(()=>e.selectedIndex);return ye(()=>{Se([k],()=>{var b;return y((b=e.selectedIndex)!=null?b:e.defaultIndex)},{immediate:!0})}),lt(()=>{if(!_.value||c.value==null||f.tabs.value.length<=0)return;let b=$e(f.tabs.value,j);b.some((S,h)=>j(f.tabs.value[h])!==j(S))&&f.setSelectedIndex(b.findIndex(S=>j(S)===j(f.tabs.value[c.value])))}),()=>{let b={selectedIndex:l.value};return Fe(P,[d.value.length<=0&&Fe(oa,{onFocus:()=>{for(let S of d.value){let h=j(S);if((h==null?void 0:h.tabIndex)===0)return h.focus(),!0}return!1}}),ge({theirProps:{...u,...Lt(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:b,slots:a,attrs:u,name:"TabGroup"})])}}}),ia=A({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:a,slots:u}){let m=De("TabList");return()=>{let n={selectedIndex:m.selectedIndex.value},l={role:"tablist","aria-orientation":m.orientation.value};return ge({ourProps:l,theirProps:e,slot:n,attrs:a,slots:u,name:"TabList"})}}}),ra=A({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:a,slots:u,expose:m}){var n;let l=(n=e.id)!=null?n:`headlessui-tabs-tab-${Ce()}`,d=De("Tab"),p=U(null);m({el:p,$el:p}),ye(()=>d.registerTab(p)),Ae(()=>d.unregisterTab(p));let _=Ue(We),c=B(()=>{if(_.value){let g=_.value.tabs.indexOf(l);return g===-1?_.value.tabs.push(l)-1:g}return-1}),y=B(()=>{let g=d.tabs.value.indexOf(p);return g===-1?c.value:g}),f=B(()=>y.value===d.selectedIndex.value);function r(g){var D;let O=g();if(O===Ve.Success&&d.activation.value==="auto"){let C=(D=jt(p))==null?void 0:D.activeElement,x=d.tabs.value.findIndex(T=>j(T)===C);x!==-1&&d.setSelectedIndex(x)}return O}function w(g){let D=d.tabs.value.map(O=>j(O)).filter(Boolean);if(g.key===K.Space||g.key===K.Enter){g.preventDefault(),g.stopPropagation(),d.setSelectedIndex(y.value);return}switch(g.key){case K.Home:case K.PageUp:return g.preventDefault(),g.stopPropagation(),r(()=>he(D,pe.First));case K.End:case K.PageDown:return g.preventDefault(),g.stopPropagation(),r(()=>he(D,pe.Last))}if(r(()=>ke(d.orientation.value,{vertical(){return g.key===K.ArrowUp?he(D,pe.Previous|pe.WrapAround):g.key===K.ArrowDown?he(D,pe.Next|pe.WrapAround):Ve.Error},horizontal(){return g.key===K.ArrowLeft?he(D,pe.Previous|pe.WrapAround):g.key===K.ArrowRight?he(D,pe.Next|pe.WrapAround):Ve.Error}}))===Ve.Success)return g.preventDefault()}let k=U(!1);function b(){var g;k.value||(k.value=!0,!e.disabled&&((g=j(p))==null||g.focus({preventScroll:!0}),d.setSelectedIndex(y.value),Xo(()=>{k.value=!1})))}function S(g){g.preventDefault()}let h=it(B(()=>({as:e.as,type:a.type})),p);return()=>{var g,D;let O={selected:f.value,disabled:(g=e.disabled)!=null?g:!1},{...C}=e,x={ref:p,onKeydown:w,onMousedown:S,onClick:b,id:l,role:"tab",type:h.value,"aria-controls":(D=j(d.panels.value[y.value]))==null?void 0:D.id,"aria-selected":f.value,tabIndex:f.value?0:-1,disabled:e.disabled?!0:void 0};return ge({ourProps:x,theirProps:C,slot:O,attrs:a,slots:u,name:"Tab"})}}}),da=A({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:a,attrs:u}){let m=De("TabPanels");return()=>{let n={selectedIndex:m.selectedIndex.value};return ge({theirProps:e,ourProps:{},slot:n,attrs:u,slots:a,name:"TabPanels"})}}}),ua=A({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(e,{attrs:a,slots:u,expose:m}){var n;let l=(n=e.id)!=null?n:`headlessui-tabs-panel-${Ce()}`,d=De("TabPanel"),p=U(null);m({el:p,$el:p}),ye(()=>d.registerPanel(p)),Ae(()=>d.unregisterPanel(p));let _=Ue(We),c=B(()=>{if(_.value){let r=_.value.panels.indexOf(l);return r===-1?_.value.panels.push(l)-1:r}return-1}),y=B(()=>{let r=d.panels.value.indexOf(p);return r===-1?c.value:r}),f=B(()=>y.value===d.selectedIndex.value);return()=>{var r;let w={selected:f.value},{tabIndex:k,...b}=e,S={ref:p,id:l,role:"tabpanel","aria-labelledby":(r=j(d.tabs.value[y.value]))==null?void 0:r.id,tabIndex:f.value?k:-1};return!f.value&&e.unmount&&!e.static?Fe(rt,{as:"span","aria-hidden":!0,...S}):ge({ourProps:S,theirProps:b,slot:w,attrs:a,slots:u,features:Oe.Static|Oe.RenderStrategy,visible:f.value,name:"TabPanel"})}}});const Pe=Ie(_e.ui.strategy,_e.ui.accordion,Kt),ca=Ie(_e.ui.strategy,_e.ui.button,Ft),pa=A({components:{HDisclosure:ea,HDisclosureButton:ta,HDisclosurePanel:na,UIcon:we,UButton:G},inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},defaultOpen:{type:Boolean,default:!1},openIcon:{type:String,default:()=>Pe.default.openIcon},unmount:{type:Boolean,default:!1},closeIcon:{type:String,default:()=>Pe.default.closeIcon},multiple:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["open"],setup(e,{emit:a}){const{ui:u,attrs:m}=ze("accordion",H(e,"ui"),Pe,H(e,"class")),n=B(()=>ca),l=U([]),d=B(()=>l.value.map(({open:r})=>r));Se(d,(r,w)=>{for(const k in r){const b=w[k],S=r[k];!b&&S&&a("open",k)}},{immediate:!0});function p(r,w){!e.items[r].closeOthers&&e.multiple||l.value.forEach(k=>{k.open&&k.close(w.target)})}function _(r,w){const k=r;k.style.height="0",k.offsetHeight,k.style.height=k.scrollHeight+"px",k.addEventListener("transitionend",w,{once:!0})}function c(r){const w=r;w.style.height=w.scrollHeight+"px",w.offsetHeight}function y(r){const w=r;w.style.height="auto"}function f(r,w){const k=r;k.style.height="0",k.addEventListener("transitionend",w,{once:!0})}return dt(()=>st()),{ui:u,uiButton:n,attrs:m,buttonRefs:l,closeOthers:p,omit:Ct,onEnter:_,onBeforeLeave:c,onAfterEnter:y,onLeave:f}}}),ma={key:1};function fa(e,a,u,m,n,l){const d=we,p=G,_=be("HDisclosureButton"),c=be("HDisclosurePanel"),y=be("HDisclosure");return i(),$("div",{class:R(e.ui.wrapper)},[(i(!0),$(P,null,N(e.items,(f,r)=>(i(),I(y,{key:r,as:"div",class:R(e.ui.container),"default-open":e.defaultOpen||f.defaultOpen},{default:s(({open:w,close:k})=>[o(_,{ref_for:!0,ref:()=>e.buttonRefs[r]={open:w,close:k},as:"template",disabled:f.disabled,onClick:b=>e.closeOthers(r,b),onKeydown:[Me(b=>e.closeOthers(r,b),["enter"]),Me(b=>e.closeOthers(r,b),["space"])]},{default:s(()=>[ce(e.$slots,"default",{item:f,index:r,open:w,close:k},()=>[o(p,me({ref_for:!0},{...e.omit(e.ui.default,["openIcon","closeIcon"]),...e.attrs,...e.omit(f,["slot","disabled","content","defaultOpen"])}),{trailing:s(()=>[o(d,{name:w&&e.closeIcon?e.closeIcon:e.openIcon,class:R([w&&!e.closeIcon?"-rotate-180":"",e.uiButton.icon.size[f.size||e.uiButton.default.size],e.ui.item.icon])},null,8,["name","class"])]),_:2},1040)])]),_:2},1032,["disabled","onClick","onKeydown"]),o(Q,me({ref_for:!0},e.ui.transition,{onEnter:e.onEnter,onAfterEnter:e.onAfterEnter,onBeforeLeave:e.onBeforeLeave,onLeave:e.onLeave}),{default:s(()=>[e.unmount?(i(),I(c,{key:0,class:R([e.ui.item.base,e.ui.item.size,e.ui.item.color,e.ui.item.padding]),unmount:""},{default:s(()=>[ce(e.$slots,f.slot||"item",{item:f,index:r,open:w,close:k},()=>[E(V(f.content),1)])]),_:2},1032,["class"])):je((i(),$("div",ma,[o(c,{class:R([e.ui.item.base,e.ui.item.size,e.ui.item.color,e.ui.item.padding]),static:""},{default:s(()=>[ce(e.$slots,f.slot||"item",{item:f,index:r,open:w,close:k},()=>[E(V(f.content),1)])]),_:2},1032,["class"])],512)),[[Re,w]])]),_:2},1040,["onEnter","onAfterEnter","onBeforeLeave","onLeave"])]),_:2},1032,["class","default-open"]))),128))],2)}const _a=Te(pa,[["render",fa]]),va=A({__name:"AnketaTab",props:{editable:{type:Boolean,default:!1},candId:{type:String,default:""},person:{type:Object,default:{}}},emits:["update"],setup(e,{emit:a}){const u=e,m=a,n=[{label:"Резюме",icon:"i-heroicons-user",defaultOpen:!0,slot:"resume"},{label:"Должности",icon:"i-heroicons-briefcase",slot:"staff"},{label:"Образование",icon:"i-heroicons-academic-cap",slot:"education"},{label:"Работа",icon:"i-heroicons-briefcase",slot:"work"},{label:"Документы",icon:"i-heroicons-document-text",slot:"document"},{label:"Адреса",icon:"i-heroicons-home-modern",slot:"address"},{label:"Контакты",icon:"i-heroicons-phone",slot:"contact"},{label:"Аффилированные",icon:"i-heroicons-user-group",slot:"affiliation"},{label:"Изменения имени",icon:"i-heroicons-archive-box-arrow-down",slot:"prev"},{label:"Связанные",icon:"i-heroicons-user-group",slot:"relate"}];return(l,d)=>{const p=Mn,_=Wn,c=eo,y=io,f=_o,r=wo,w=Eo,k=Ao,b=Ho,S=Qo,h=_a;return i(),I(h,{items:n,size:"lg",multiple:""},{resume:s(()=>[o(p,{"cand-id":u.candId,editable:u.editable,person:u.person,onUpdate:d[0]||(d[0]=g=>m("update"))},null,8,["cand-id","editable","person"])]),staff:s(()=>[o(_,{"cand-id":u.candId,editable:u.editable},null,8,["cand-id","editable"])]),education:s(()=>[o(c,{"cand-id":u.candId,editable:u.editable},null,8,["cand-id","editable"])]),work:s(()=>[o(y,{"cand-id":u.candId,editable:u.editable},null,8,["cand-id","editable"])]),document:s(()=>[o(f,{"cand-id":u.candId,editable:u.editable},null,8,["cand-id","editable"])]),address:s(()=>[o(r,{"cand-id":u.candId,editable:u.editable},null,8,["cand-id","editable"])]),contact:s(()=>[o(w,{"cand-id":u.candId,editable:u.editable},null,8,["cand-id","editable"])]),affiliation:s(()=>[o(k,{"cand-id":u.candId,editable:u.editable},null,8,["cand-id","editable"])]),prev:s(()=>[o(b,{"cand-id":u.candId,editable:u.editable},null,8,["cand-id","editable"])]),relate:s(()=>[o(S,{"cand-id":u.candId,editable:u.editable},null,8,["cand-id","editable"])]),_:1})}}}),ba=A({__name:"CheckForm",props:{check:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const u=a,n=H(e.check),l=U(!1);function d(){u("update",n.value),_()}function p(){u("cancel"),_()}function _(){l.value=!1,Object.keys(n.value).forEach(c=>{n.value[c]=""})}return Se(l,()=>{l.value&&Object.assign(n.value,{workplace:"Негатив по местам работы не выявлен",document:"Среди недействительных документов не значится",inn:"ИНН соответствует",debt:"Задолженности не обнаружены",bankruptcy:"Решений о признании банкротом не имеется",bki:"Кредитная история положительная",courts:"Судебные дела не обнаружены",affilation:"Аффилированность не выявлена",terrorist:"В списке террористов не обнаружен",mvd:"В розыск не объявлен",internet:"В открытых источниках негатив не обнаружен",cronos:"В Кронос негатив не выявлен"})}),(c,y)=>{const f=Gt,r=ie,w=Be,k=ve,b=de,S=ue;return i(),$(P,null,[o(r,{state:t(l),class:"mb-3",label:"Негатива нет"},{default:s(()=>[o(f,{modelValue:t(l),"onUpdate:modelValue":y[0]||(y[0]=h=>He(l)?l.value=h:null)},null,8,["modelValue"])]),_:1},8,["state"]),o(S,{state:t(n),onSubmit:ee(d,["prevent"])},{default:s(()=>[o(r,{class:"mb-3",label:"Проверка по местам работы"},{default:s(()=>[o(w,{modelValue:t(n).workplace,"onUpdate:modelValue":y[1]||(y[1]=h=>t(n).workplace=h),modelModifiers:{trim:!0,lazy:!0},placeholder:"Проверка по местам работы"},null,8,["modelValue"])]),_:1}),o(r,{class:"mb-3",label:"Проверка документов"},{default:s(()=>[o(w,{modelValue:t(n).document,"onUpdate:modelValue":y[2]||(y[2]=h=>t(n).document=h),modelModifiers:{trim:!0,lazy:!0},placeholder:"Проверка документов"},null,8,["modelValue"])]),_:1}),o(r,{class:"mb-3",label:"Проверка ИНН"},{default:s(()=>[o(w,{modelValue:t(n).inn,"onUpdate:modelValue":y[3]||(y[3]=h=>t(n).inn=h),modelModifiers:{trim:!0,lazy:!0},placeholder:"Проверка ИНН"},null,8,["modelValue"])]),_:1}),o(r,{class:"mb-3",label:"Проверка задолженностей"},{default:s(()=>[o(w,{modelValue:t(n).debt,"onUpdate:modelValue":y[4]||(y[4]=h=>t(n).debt=h),modelModifiers:{trim:!0,lazy:!0},placeholder:"Проверка задолженностей"},null,8,["modelValue"])]),_:1}),o(r,{class:"mb-3",label:"Проверка банкротства"},{default:s(()=>[o(w,{modelValue:t(n).bankruptcy,"onUpdate:modelValue":y[5]||(y[5]=h=>t(n).bankruptcy=h),modelModifiers:{trim:!0,lazy:!0},placeholder:"Проверка банкротства"},null,8,["modelValue"])]),_:1}),o(r,{class:"mb-3",label:"Проверка Кредитной истории"},{default:s(()=>[o(w,{modelValue:t(n).bki,"onUpdate:modelValue":y[6]||(y[6]=h=>t(n).bki=h),modelModifiers:{trim:!0,lazy:!0},placeholder:"Проверка Кредитной истории"},null,8,["modelValue"])]),_:1}),o(r,{class:"mb-3",label:"Проверка судебных дел"},{default:s(()=>[o(w,{modelValue:t(n).courts,"onUpdate:modelValue":y[7]||(y[7]=h=>t(n).courts=h),modelModifiers:{trim:!0,lazy:!0},placeholder:"Проверка судебных дел"},null,8,["modelValue"])]),_:1}),o(r,{class:"mb-3",label:"Проверка аффилированности"},{default:s(()=>[o(w,{modelValue:t(n).affilation,"onUpdate:modelValue":y[8]||(y[8]=h=>t(n).affilation=h),modelModifiers:{trim:!0,lazy:!0},placeholder:"Проверка аффилированности"},null,8,["modelValue"])]),_:1}),o(r,{class:"mb-3",label:"Проверка в списке террористов"},{default:s(()=>[o(w,{modelValue:t(n).terrorist,"onUpdate:modelValue":y[9]||(y[9]=h=>t(n).terrorist=h),modelModifiers:{trim:!0,lazy:!0},placeholder:"Проверка в списке террористов"},null,8,["modelValue"])]),_:1}),o(r,{class:"mb-3",label:"Проверка в розыск"},{default:s(()=>[o(w,{modelValue:t(n).mvd,"onUpdate:modelValue":y[10]||(y[10]=h=>t(n).mvd=h),modelModifiers:{trim:!0,lazy:!0},placeholder:"Проверка в розыск"},null,8,["modelValue"])]),_:1}),o(r,{class:"mb-3",label:"Проверка в открытых источниках"},{default:s(()=>[o(w,{modelValue:t(n).internet,"onUpdate:modelValue":y[11]||(y[11]=h=>t(n).internet=h),modelModifiers:{trim:!0,lazy:!0},placeholder:"Проверка в открытых источниках"},null,8,["modelValue"])]),_:1}),o(r,{class:"mb-3",label:"Проверка в Кронос"},{default:s(()=>[o(w,{modelValue:t(n).cronos,"onUpdate:modelValue":y[12]||(y[12]=h=>t(n).cronos=h),modelModifiers:{trim:!0,lazy:!0},placeholder:"Проверка в Кронос/Крос"},null,8,["modelValue"])]),_:1}),o(r,{class:"mb-3",label:"Дополнительная информация"},{default:s(()=>[o(w,{modelValue:t(n).addition,"onUpdate:modelValue":y[13]||(y[13]=h=>t(n).addition=h),modelModifiers:{trim:!0,lazy:!0},placeholder:"Дополнительная информация"},null,8,["modelValue"])]),_:1}),o(r,{class:"mb-3",label:"Комментарии"},{default:s(()=>[o(w,{modelValue:t(n).comment,"onUpdate:modelValue":y[14]||(y[14]=h=>t(n).comment=h),modelModifiers:{trim:!0,lazy:!0},placeholder:"Комментарии"},null,8,["modelValue"])]),_:1}),o(r,{class:"mb-3",label:"Результат"},{default:s(()=>[o(k,{modelValue:t(n).conclusion,"onUpdate:modelValue":y[15]||(y[15]=h=>t(n).conclusion=h),modelModifiers:{trim:!0,lazy:!0},required:"",options:["СОГЛАСОВАНО","СОГЛАСОВАНО С КОММЕНТАРИЕМ","ОТКАЗАНО В СОГЛАСОВАНИИ"]},null,8,["modelValue"])]),_:1}),o(b,{onCancel:p})]),_:1},8,["state"])],64)}}}),ya={key:0,class:"py-3"},ga={key:1},ha={class:"tex-base text-red-800 dark:text-gray-400 font-medium"},ka={key:1},wa={key:2,class:"p-3"},$a={key:1,class:"text-red-800"},Sa=A({__name:"CheckTab",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,u;te(["FormsCheckForm","ElementsSkeletonDiv"]);const m=W(),n=Y(),l=e,d=U(!1),p=U(!1),_=U(!1),c=U(""),y=U({}),{data:f,refresh:r,status:w}=([a,u]=X(async()=>re("checks",async()=>await m(`/api/checks/${l.candId}`))),a=await a,u(),a);async function k(g){p.value=!0,h(),await m("/api/checks/"+l.candId,{method:"POST",body:g}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),p.value=!1,r()}async function b(g){h(),confirm("Вы действительно хотите удалить запись?")&&(await m(`/api/checks/${g}`,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${g} удалена`,color:"primary"}),r())}async function S(){h(),r()}function h(){d.value=!1,c.value="",_.value=!1}return(g,D)=>{const O=G,C=ba,x=Z,T=oe,F=ae,M=le;return i(),$(P,null,[l.editable?(i(),I(O,{key:0,class:"py-3",label:t(_)?"Скрыть форму":"Добавить запись",variant:"link",onClick:D[0]||(D[0]=v=>_.value=!t(_))},null,8,["label"])):z("",!0),o(Q,{name:"slide-fade"},{default:s(()=>[t(_)?(i(),$("div",ya,[o(x,null,{default:s(()=>[o(C,{"cand-id":l.candId,onUpdate:k,onCancel:S},null,8,["cand-id"])]),_:1})])):z("",!0)]),_:1}),t(f)&&t(f).length?(i(),$("div",ga,[(i(!0),$(P,null,N(t(f),(v,q)=>(i(),$("div",{key:q,class:"text-sm text-gray-500 dark:text-gray-400 py-1"},[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:18})):z("",!0),o(x,null,ne({header:s(()=>[J("div",ha,V("Проверка кандидата ID #"+v.id),1)]),default:s(()=>[t(d)&&t(c)==v.id.toString()?(i(),I(C,{key:0,"cand-id":l.candId,check:v,onCancel:S,onUpdate:k},null,8,["cand-id","check"])):(i(),$("div",ka,[o(F,{label:"Проверка по местам работы"},{default:s(()=>[E(V(v.workplace),1)]),_:2},1024),o(F,{label:"Проверка паспорта"},{default:s(()=>[E(V(v.document),1)]),_:2},1024),o(F,{label:"Проверка ИНН"},{default:s(()=>[E(V(v.inn),1)]),_:2},1024),o(F,{label:"Проверка ФССП"},{default:s(()=>[E(V(v.debt),1)]),_:2},1024),o(F,{label:"Проверка банкротства"},{default:s(()=>[E(V(v.bankruptcy),1)]),_:2},1024),o(F,{label:"Проверка БКИ"},{default:s(()=>[E(V(v.bki),1)]),_:2},1024),o(F,{label:"Проверка судебных решений"},{default:s(()=>[E(V(v.courts),1)]),_:2},1024),o(F,{label:"Проверка аффилированности"},{default:s(()=>[E(V(v.affilation),1)]),_:2},1024),o(F,{label:"Проверка по списку террористов"},{default:s(()=>[E(V(v.terrorist),1)]),_:2},1024),o(F,{label:"Проверка в розыск"},{default:s(()=>[E(V(v.mvd),1)]),_:2},1024),o(F,{label:"Проверка в открытых источниках"},{default:s(()=>[E(V(v.internet),1)]),_:2},1024),o(F,{label:"Проверка в Кронос"},{default:s(()=>[E(V(v.cronos),1)]),_:2},1024),o(F,{label:"Дополнительная информация"},{default:s(()=>[E(V(v.addition),1)]),_:2},1024),o(F,{label:"Комментарии"},{default:s(()=>[E(V(v.comment),1)]),_:2},1024),o(F,{label:"Результат"},{default:s(()=>[E(V(v.conclusion),1)]),_:2},1024),o(F,{label:"Сотрудник"},{default:s(()=>[E(V(v.username),1)]),_:2},1024),o(F,{label:"Дата записи"},{default:s(()=>[E(V(new Date(v.created+" UTC").toLocaleString("ru-RU")),1)]),_:2},1024)]))]),_:2},[l.editable&&(!t(d)||t(c)!=v.id.toString())?{name:"footer",fn:s(()=>[o(M,{"cand-id":l.candId,"input-id":"checks-file",item:"checks",onUpdate:L=>{y.value=v,c.value=v.id.toString(),d.value=!0},onDelete:L=>b(v.id)},null,8,["cand-id","onUpdate","onDelete"])]),key:"0"}:void 0]),1024)]))),128))])):(i(),$("div",wa,[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:18})):(i(),$("p",$a,"Проверка кандидата отсутствует"))]))],64)}}}),Ia=A({__name:"PoligrafForm",props:{poligraf:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const u=a,n=H(e.poligraf);function l(){u("update",n.value),n.value.theme="",n.value.results=""}function d(){u("cancel"),n.value.theme="",n.value.results=""}return(p,_)=>{const c=ve,y=ie,f=Be,r=de,w=ue;return i(),I(w,{state:t(n),onSubmit:ee(l,["prevent"])},{default:s(()=>[o(y,{class:"mb-3",label:"Тема проверки"},{default:s(()=>[o(c,{modelValue:t(n).theme,"onUpdate:modelValue":_[0]||(_[0]=k=>t(n).theme=k),required:"",options:["Проверка кандидата","Служебная проверка","Служебное расследование","Плановое мероприятие"]},null,8,["modelValue"])]),_:1}),o(y,{class:"mb-3",label:"Результат"},{default:s(()=>[o(f,{modelValue:t(n).results,"onUpdate:modelValue":_[1]||(_[1]=k=>t(n).results=k),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Результат"},null,8,["modelValue"])]),_:1}),o(r,{onCancel:d})]),_:1},8,["state"])}}}),Ua={key:0,class:"py-3"},Da={key:1},Va={class:"tex-base text-red-800 font-medium"},Ea={key:1},Fa={key:2,class:"p-3"},Ca={key:1,class:"text-red-800"},xa=A({__name:"PoligrafTab",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,u;te(["FormsPoligrafForm","ElementsSkeletonDiv"]);const m=W(),n=Y(),l=e,d=U(!1),p=U(!1),_=U(!1),c=U(""),y=U({}),{data:f,refresh:r,status:w}=([a,u]=X(async()=>re("poligrafs",async()=>await m("/api/poligrafs/"+l.candId))),a=await a,u(),a);async function k(g){p.value=!0,h(),await m("/api/poligrafs/"+l.candId,{method:"POST",body:g}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),p.value=!1,r()}async function b(g){h(),confirm("Вы действительно хотите удалить запись?")&&(await m("/api/poligrafs/"+g,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${g} удалена`,color:"primary"}),r())}async function S(){h(),r()}function h(){_.value=!1,d.value=!1,c.value=""}return(g,D)=>{const O=G,C=Ia,x=Z,T=oe,F=ae,M=le;return i(),$(P,null,[e.editable?(i(),I(O,{key:0,class:"py-3",label:t(_)?"Скрыть форму":"Добавить запись",variant:"link",onClick:D[0]||(D[0]=v=>_.value=!t(_))},null,8,["label"])):z("",!0),o(Q,{name:"slide-fade"},{default:s(()=>[t(_)?(i(),$("div",Ua,[o(x,null,{default:s(()=>[o(C,{"cand-id":l.candId,onCancel:S,onUpdate:k},null,8,["cand-id"])]),_:1})])):z("",!0)]),_:1}),t(f)&&t(f).length?(i(),$("div",Da,[(i(!0),$(P,null,N(t(f),(v,q)=>(i(),$("div",{key:q,class:"text-sm text-gray-500 dark:text-gray-400 py-1"},[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:4})):(i(),I(x,{key:1},ne({header:s(()=>[J("div",Va,V("Обследование на полиграфе ID #"+v.id),1)]),default:s(()=>[t(d)&&t(c)==v.id.toString()?(i(),I(C,{key:0,"cand-id":l.candId,poligraf:v,onCancel:S,onUpdate:k},null,8,["cand-id","poligraf"])):(i(),$("div",Ea,[o(F,{label:"Тема проверки"},{default:s(()=>[E(V(v.theme),1)]),_:2},1024),o(F,{label:"Результат"},{default:s(()=>[E(V(v.results),1)]),_:2},1024),o(F,{label:"Сотрудник"},{default:s(()=>[E(V(v.username),1)]),_:2},1024),o(F,{label:"Дата записи"},{default:s(()=>[E(V(new Date(v.created+" UTC").toLocaleString("ru-RU")),1)]),_:2},1024)]))]),_:2},[l.editable&&(!t(d)||t(c)!=v.id.toString())?{name:"footer",fn:s(()=>[o(M,{"cand-id":l.candId,"input-id":"poligrafs-file",item:"poligrafs",onUpdate:L=>{y.value=v,c.value=v.id.toString(),d.value=!0},onDelete:L=>b(v.id)},null,8,["cand-id","onUpdate","onDelete"])]),key:"0"}:void 0]),1024))]))),128))])):(i(),$("div",Fa,[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:4})):(i(),$("p",Ca,"Обследование на полиграфе не проводилось"))]))],64)}}}),Oa=A({__name:"InvestigationForm",props:{investigation:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const u=a,n=H(e.investigation);function l(){u("update",n.value),p()}function d(){u("cancel"),p()}function p(){Object.assign(n.value,{theme:"",info:""})}return(_,c)=>{const y=se,f=ie,r=Be,w=de,k=ue;return i(),I(k,{state:t(n),onSubmit:ee(l,["prevent"])},{default:s(()=>[o(f,{class:"mb-3",label:"Тема проверки"},{default:s(()=>[o(y,{modelValue:t(n).theme,"onUpdate:modelValue":c[0]||(c[0]=b=>t(n).theme=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Тема проверки"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Информация"},{default:s(()=>[o(r,{modelValue:t(n).info,"onUpdate:modelValue":c[1]||(c[1]=b=>t(n).info=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Информация"},null,8,["modelValue"])]),_:1}),o(w,{onCancel:d})]),_:1},8,["state"])}}}),Ta={key:0,class:"py-3"},za={key:1},Aa={class:"tex-base text-red-800 font-medium"},Ba={key:1},Pa={key:2,class:"p-3"},qa={key:1,class:"text-red-800"},Ma=A({__name:"InvestigateTab",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,u;te(["FormsInvestigationForm","ElementsSkeletonDiv"]);const m=W(),n=Y(),l=e,d=U(!1),p=U(!1),_=U(!1),c=U(""),y=U({}),{data:f,refresh:r,status:w}=([a,u]=X(async()=>re("investigations",async()=>await m("/api/investigations/"+l.candId))),a=await a,u(),a);async function k(g){p.value=!0,h(),await m("/api/investigations/"+l.candId,{method:"POST",body:g}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),p.value=!1,r()}async function b(g){h(),confirm("Вы действительно хотите удалить запись?")&&(await m(`/api/investigations/${g}`,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${g} удалена`,color:"primary"}),r())}async function S(){h(),r()}function h(){_.value=!1,c.value="",d.value=!1}return(g,D)=>{const O=G,C=Oa,x=Z,T=oe,F=ae,M=le;return i(),$(P,null,[l.editable?(i(),I(O,{key:0,class:"py-3",label:t(d)?"Скрыть форму":"Добавить запись",variant:"link",onClick:D[0]||(D[0]=v=>d.value=!t(d))},null,8,["label"])):z("",!0),o(Q,{name:"slide-fade"},{default:s(()=>[t(d)?(i(),$("div",Ta,[o(x,null,{default:s(()=>[o(C,{"cand-id":l.candId,onCancel:S,onUpdate:k},null,8,["cand-id"])]),_:1})])):z("",!0)]),_:1}),t(f)&&t(f).length?(i(),$("div",za,[(i(!0),$(P,null,N(t(f),(v,q)=>(i(),$("div",{key:q,class:"text-sm text-gray-500 dark:text-gray-400 py-1"},[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:4})):(i(),I(x,{key:1},ne({header:s(()=>[J("div",Aa,V("Расследование/проверка ID #"+v.id),1)]),default:s(()=>[t(_)&&t(c)==v.id.toString()?(i(),I(C,{key:0,"cand-id":l.candId,investigation:v,onCancel:S,onUpdate:k},null,8,["cand-id","investigation"])):(i(),$("div",Ba,[o(F,{label:"Тема проверки"},{default:s(()=>[E(V(v.theme),1)]),_:2},1024),o(F,{label:"Информация"},{default:s(()=>[E(V(v.info),1)]),_:2},1024),o(F,{label:"Сотрудник"},{default:s(()=>[E(V(v.username),1)]),_:2},1024),o(F,{label:"Дата записи"},{default:s(()=>[E(V(new Date(v.created+" UTC").toLocaleString("ru-RU")),1)]),_:2},1024)]))]),_:2},[l.editable&&(!t(_)||t(c)!=v.id.toString())?{name:"footer",fn:s(()=>[o(M,{"cand-id":l.candId,"input-id":"investigations-file",item:"investigations",onUpdate:L=>{y.value=v,c.value=v.id.toString(),_.value=!0},onDelete:L=>b(v.id)},null,8,["cand-id","onUpdate","onDelete"])]),key:"0"}:void 0]),1024))]))),128))])):(i(),$("div",Pa,[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:4})):(i(),$("p",qa,"Расследования/Проверки не проводились"))]))],64)}}}),La=A({__name:"InquiryForm",props:{inquiry:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const u=a,n=H(e.inquiry);function l(){u("update",n.value),p()}function d(){u("cancel"),p()}function p(){Object.assign(n.value,{info:"",origins:"",initiator:""})}return(_,c)=>{const y=Be,f=ie,r=se,w=de,k=ue;return i(),I(k,{state:t(n),onSubmit:ee(l,["prevent"])},{default:s(()=>[o(f,{class:"mb-3",label:"Информация"},{default:s(()=>[o(y,{modelValue:t(n).info,"onUpdate:modelValue":c[0]||(c[0]=b=>t(n).info=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Информация"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Инициатор"},{default:s(()=>[o(r,{modelValue:t(n).initiator,"onUpdate:modelValue":c[1]||(c[1]=b=>t(n).initiator=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Инициатор"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-3",label:"Источники"},{default:s(()=>[o(r,{modelValue:t(n).origins,"onUpdate:modelValue":c[2]||(c[2]=b=>t(n).origins=b),modelModifiers:{trim:!0,lazy:!0},placeholder:"Источники"},null,8,["modelValue"])]),_:1}),o(w,{onCancel:d})]),_:1},8,["state"])}}}),ja={key:0,class:"py-3"},Ha={key:1},Ra={class:"tex-base text-red-800 font-medium"},Na={key:1},Ga={key:2,class:"p-3"},Wa={key:1,class:"text-red-800"},Ka=A({__name:"InquiryTab",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,u;te(["FormsInquiryForm","ElementsSkeletonDiv"]);const m=W(),n=Y(),l=e,d=U(!1),p=U(!1),_=U(!1),c=U(""),y=U({}),{data:f,refresh:r,status:w}=([a,u]=X(async()=>re("inquiries",async()=>await m(`/api/inquiries/${l.candId}`))),a=await a,u(),a);async function k(g){p.value=!0,S(),await m("/api/inquiries/"+l.candId,{method:"POST",body:g}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),p.value=!1,r()}async function b(g){S(),confirm("Вы действительно хотите удалить запись?")&&(await m(`/api/inquiries/${g}`,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${g} удалена`,color:"primary"}),r())}function S(){_.value=!1,c.value="",d.value=!1}function h(){S(),r()}return(g,D)=>{const O=G,C=La,x=Z,T=oe,F=ae,M=le;return i(),$(P,null,[l.editable?(i(),I(O,{key:0,class:"py-3",label:t(d)?"Скрыть форму":"Добавить запись",variant:"link",onClick:D[0]||(D[0]=v=>d.value=!t(d))},null,8,["label"])):z("",!0),o(Q,{name:"slide-fade"},{default:s(()=>[t(d)?(i(),$("div",ja,[o(x,null,{default:s(()=>[o(C,{"cand-id":l.candId,onCancel:h,onUpdate:k},null,8,["cand-id"])]),_:1})])):z("",!0)]),_:1}),t(f)&&t(f).length?(i(),$("div",Ha,[(i(!0),$(P,null,N(t(f),(v,q)=>(i(),$("div",{key:q,class:"text-sm text-gray-500 dark:text-gray-400 py-1"},[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:6})):(i(),I(x,{key:1},ne({header:s(()=>[J("div",Ra,V("Запрос о сотруднике ID #"+v.id),1)]),default:s(()=>[t(_)&&t(c)==v.id.toString()?(i(),I(C,{key:0,"cand-id":l.candId,inquiry:v,onCancel:h,onUpdate:k},null,8,["cand-id","inquiry"])):(i(),$("div",Na,[o(F,{label:"Информация"},{default:s(()=>[E(V(v.info),1)]),_:2},1024),o(F,{label:"Иннициатор"},{default:s(()=>[E(V(v.initiator),1)]),_:2},1024),o(F,{label:"Источники"},{default:s(()=>[E(V(v.origins),1)]),_:2},1024),o(F,{label:"Сотрудник"},{default:s(()=>[E(V(v.username),1)]),_:2},1024),o(F,{label:"Дата записи"},{default:s(()=>[E(V(new Date(v.created+" UTC").toLocaleString("ru-RU")),1)]),_:2},1024)]))]),_:2},[l.editable&&(!t(_)||t(c)!=v.id.toString())?{name:"footer",fn:s(()=>[o(M,{"cand-id":l.candId,"input-id":"inquiries-file",item:"inquiries",onDelete:L=>b(v.id),onUpdate:L=>{y.value=v,c.value=v.id.toString(),_.value=!0}},null,8,["cand-id","onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(i(),$("div",Ga,[t(w)=="pending"||t(p)?(i(),I(T,{key:0,rows:6})):(i(),$("p",Wa,"Запросы о сотруднике не поступали"))]))],64)}}}),Ja=Ie(_e.ui.strategy,_e.ui.tabs,Qt),Qa=A({components:{UIcon:we,HTabGroup:sa,HTabList:ia,HTab:ra,HTabPanels:da,HTabPanel:ua},inheritAttrs:!1,props:{modelValue:{type:Number,default:void 0},orientation:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},defaultIndex:{type:Number,default:0},items:{type:Array,default:()=>[]},unmount:{type:Boolean,default:!1},content:{type:Boolean,default:!0},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:a}){const{ui:u,attrs:m}=ze("tabs",H(e,"ui"),Ja,H(e,"class")),n=U(),l=U([]),d=U(),p=U(e.modelValue||e.defaultIndex);function _(y){var r;const f=(r=l.value[y])==null?void 0:r.$el;f&&d.value&&(d.value.style.top=`${f.offsetTop}px`,d.value.style.left=`${f.offsetLeft}px`,d.value.style.width=`${f.offsetWidth}px`,d.value.style.height=`${f.offsetHeight}px`)}function c(y){p.value=y,a("change",y),e.modelValue!==void 0&&a("update:modelValue",p.value),_(p.value)}return xt(n,()=>{_(p.value)}),Se(()=>e.modelValue,y=>{p.value=y,_(p.value)}),Se(()=>e.items,async()=>{await Qe(),_(p.value)},{deep:!0}),ye(async()=>{await Qe(),_(p.value)}),dt(()=>st()),{ui:u,attrs:m,listRef:n,itemRefs:l,markerRef:d,selectedIndex:p,onChange:c}}}),Xa={class:"truncate"};function Ya(e,a,u,m,n,l){const d=we,p=be("HTab"),_=be("HTabList"),c=be("HTabPanel"),y=be("HTabPanels"),f=be("HTabGroup");return i(),I(f,me({vertical:e.orientation==="vertical","selected-index":e.selectedIndex,as:"div",class:e.ui.wrapper},e.attrs,{onChange:e.onChange}),{default:s(()=>[o(_,{ref:"listRef",class:R([e.ui.list.base,e.ui.list.background,e.ui.list.rounded,e.ui.list.shadow,e.ui.list.padding,e.ui.list.width,e.orientation==="horizontal"&&e.ui.list.height,e.orientation==="horizontal"&&"inline-grid items-center"]),style:Ot([e.orientation==="horizontal"&&`grid-template-columns: repeat(${e.items.length}, minmax(0, 1fr))`])},{default:s(()=>[J("div",{ref:"markerRef",class:R(e.ui.list.marker.wrapper)},[J("div",{class:R([e.ui.list.marker.base,e.ui.list.marker.background,e.ui.list.marker.rounded,e.ui.list.marker.shadow])},null,2)],2),(i(!0),$(P,null,N(e.items,(r,w)=>(i(),I(p,{key:w,ref_for:!0,ref:"itemRefs",disabled:r.disabled,as:"template"},{default:s(({selected:k,disabled:b})=>[J("button",{class:R([e.ui.list.tab.base,e.ui.list.tab.background,e.ui.list.tab.height,e.ui.list.tab.padding,e.ui.list.tab.size,e.ui.list.tab.font,e.ui.list.tab.rounded,e.ui.list.tab.shadow,k?e.ui.list.tab.active:e.ui.list.tab.inactive])},[ce(e.$slots,"icon",{item:r,index:w,selected:k,disabled:b},()=>[r.icon?(i(),I(d,{key:0,name:r.icon,class:R(e.ui.list.tab.icon)},null,8,["name","class"])):z("",!0)]),ce(e.$slots,"default",{item:r,index:w,selected:k,disabled:b},()=>[J("span",Xa,V(r.label),1)])],2)]),_:2},1032,["disabled"]))),128))]),_:3},8,["class","style"]),e.content?(i(),I(y,{key:0,class:R(e.ui.container)},{default:s(()=>[(i(!0),$(P,null,N(e.items,(r,w)=>(i(),I(c,{key:w,class:R(e.ui.base),unmount:e.unmount},{default:s(({selected:k})=>[ce(e.$slots,r.slot||"item",{item:r,index:w,selected:k},()=>[E(V(r.content),1)])]),_:2},1032,["class","unmount"]))),128))]),_:3},8,["class"])):z("",!0)]),_:3},16,["vertical","selected-index","class","onChange"])}const Za=Te(Qa,[["render",Ya]]),el={key:0,class:"relative"},tl={class:"absolute bottom-0 right-20"},nl={class:"animate-pulse",style:{width:"30px"}},yl=A({__name:"[id]",async setup(e){let a,u;const m=W(),n=Wt(),l=Tt(),d=B(()=>l.params.id),p=U({}),{refresh:_}=([a,u]=X(async()=>ut("anketa",async()=>{const k=await m("/api/persons/"+d.value);p.value=k})),a=await a,u(),a),c=[{slot:"anketaTab",label:"Анкета",icon:"i-heroicons-user"},{slot:"checkTab",label:"Проверки",icon:"i-heroicons-check-circle"},{slot:"poligrafTab",label:"Полиграф",icon:"i-heroicons-bolt"},{slot:"investigateTab",label:"Расследования",icon:"i-heroicons-briefcase"},{slot:"inquiryTab",label:"Запросы",icon:"i-heroicons-document-text"}],y={current:{label:"Анкета редактируется текущим пользователем",color:"green"},thirdparty:{label:"Анкета редактируется другим пользователем",color:"red"},others:{label:"Анкета не редактируется пользователями",color:"blue"}},f=B(()=>{if(p.value.editable){if(p.value.user_id==n.value.id)return y.current;if(p.value.user_id!=n.value.id)return y.thirdparty}return y.others}),r=B(()=>p.value.editable&&n.value.role=="user"&&n.value.id==p.value.user_id);async function w(){confirm("Вы действительно хотите включить/выключить режим правки")&&(await m("/api/self/"+d.value),_())}return zt((k,b,S)=>{Ht(),S()}),(k,b)=>{const S=En,h=Ne,g=G,D=At,O=va,C=Sa,x=xa,T=Ma,F=Ka,M=Za;return i(),$("div",null,[o(S,{"cand-id":t(d),destination:t(p).destination,editable:t(r)},null,8,["cand-id","destination","editable"]),t(n).role=="user"?(i(),$("div",el,[J("div",tl,[o(g,{variant:"link",size:"xl",onClick:w},{default:s(()=>[J("div",nl,[o(h,{color:t(f).color,variant:"solid"},{default:s(()=>[E(V(t(f).label),1)]),_:1},8,["color"])])]),_:1})])])):z("",!0),o(D,{div:"py-3",header:`${t(p).surname} ${t(p).firstname} ${t(p).patronymic?t(p).patronymic:""}`},null,8,["header"]),o(M,{items:c},{anketaTab:s(()=>[o(O,{"cand-id":t(d),editable:t(r),person:t(p),onUpdate:t(_)},null,8,["cand-id","editable","person","onUpdate"])]),checkTab:s(()=>[o(C,{"cand-id":t(d),editable:t(r)},null,8,["cand-id","editable"])]),poligrafTab:s(()=>[o(x,{"cand-id":t(d),editable:t(r)},null,8,["cand-id","editable"])]),investigateTab:s(()=>[o(T,{"cand-id":t(d),editable:t(r)},null,8,["cand-id","editable"])]),inquiryTab:s(()=>[o(F,{"cand-id":t(d),editable:t(r)},null,8,["cand-id","editable"])]),_:1})])}}});export{yl as default};
