import{Q as yt,R as Ge,S as gt,U as qe,V as ht,L as Le,W as kt,X as We,Y as Ze,Z as wt,s as A,d as M,$ as $t,r as D,a0 as ge,o as l,c as $,C as me,e as t,m as De,h as _e,_ as Te,q as Me,t as H,v as et,x as tt,a1 as St,b as o,g as i,f as Z,A as N,B as x,y as de,T as J,N as W,w as Q,P as nt,a2 as It,a3 as Dt,z as S,i as He,H as ee,l as R,E as V,j as $e,k as ot,a4 as at,a5 as Ut,F as B,G as Y,D as F,a6 as je,a7 as te,a8 as ne,u as ue,n as Vt,a9 as Et,aa as Fe,ab as Ae,ac as lt,ad as Ue,ae as Ce,af as Ie,ag as Ft,ah as st,ai as Ct,aj as ye,I as zt,J as xt,ak as Ot,al as Ke,am as Tt,an as Mt,ao as At}from"./DfFwspTN.js";import{u as Pt}from"./CZvQ1gPa.js";import{_ as X,a as Bt,b as oe,c as se,d as Pe}from"./Bj7jqJN6.js";import{u as G}from"./Bg7MONkg.js";import{u as it,a as ie,c as qt}from"./CifMPHan.js";import{_ as Ne}from"./DNgVhbFN.js";import{a as pe,_ as jt}from"./F1l9jR7M.js";import{_ as be}from"./BhVxa_ul.js";import{_ as re}from"./DOviaxzH.js";import{_ as ce}from"./DXLMIV6O.js";import{_ as Lt}from"./BY5lPLn4.js";import{i as ze,u as we,o as L,t as Ht,a as xe,A as he,s as rt,l as Nt,N as Oe,b as K,c as Yt,f as ct,O as Se,T as Rt,d as Ee,e as Gt,P as ke,g as fe,h as dt}from"./Dpkrji5r.js";import{_ as Wt}from"./DbEcqiiq.js";import{u as Kt}from"./CSnMaNkz.js";import"./Cb_M65Ry.js";import"./DfMykkUP.js";const Jt={wrapper:"w-full flex flex-col",container:"w-full flex flex-col",item:{base:"",size:"text-sm",color:"text-gray-500 dark:text-gray-400",padding:"pt-1.5 pb-3",icon:"ms-auto transform transition-transform duration-200 flex-shrink-0"},transition:{enterActiveClass:"overflow-hidden transition-[height] duration-200 ease-out",leaveActiveClass:"overflow-hidden transition-[height] duration-200 ease-out"},default:{openIcon:"i-heroicons-chevron-down-20-solid",closeIcon:"",class:"mb-1.5 w-full",variant:"soft",truncate:!0}},Qt={wrapper:"relative w-full flex items-center justify-between",container:"flex items-center min-w-0",inner:"min-w-0",base:"group relative w-full flex items-center gap-1.5 px-2.5 py-3.5 rounded-md font-medium text-sm focus:outline-none focus-visible:outline-none dark:focus-visible:outline-none focus-visible:ring-inset focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400 disabled:cursor-not-allowed disabled:opacity-75",before:"before:absolute before:inset-x-0 before:inset-y-2 before:inset-px before:rounded-md hover:before:bg-gray-50 dark:hover:before:bg-gray-800/50",after:"after:absolute after:bottom-0 after:inset-x-2.5 after:block after:h-[2px] after:mt-2",active:"text-gray-900 dark:text-white after:bg-primary-500 dark:after:bg-primary-400 after:rounded-full",inactive:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",label:"truncate relative",icon:{base:"flex-shrink-0 w-5 h-5 relative",active:"text-gray-700 dark:text-gray-200",inactive:"text-gray-400 dark:text-gray-500 group-hover:text-gray-700 dark:group-hover:text-gray-200"},avatar:{base:"flex-shrink-0",size:"2xs"},badge:{base:"flex-shrink-0 ml-auto relative rounded",color:"gray",variant:"solid",size:"xs"}},Xt={wrapper:"relative space-y-2",container:"relative w-full",base:"focus:outline-none",list:{base:"relative",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-lg",shadow:"",padding:"p-1",height:"h-10",width:"w-full",marker:{wrapper:"absolute top-[4px] left-[4px] duration-200 ease-out focus:outline-none",base:"w-full h-full",background:"bg-white dark:bg-gray-900",rounded:"rounded-md",shadow:"shadow-sm"},tab:{base:"relative inline-flex items-center justify-center flex-shrink-0 w-full ui-focus-visible:outline-0 ui-focus-visible:ring-2 ui-focus-visible:ring-primary-500 dark:ui-focus-visible:ring-primary-400 ui-not-focus-visible:outline-none focus:outline-none disabled:cursor-not-allowed disabled:opacity-75 transition-colors duration-200 ease-out",background:"",active:"text-gray-900 dark:text-white",inactive:"text-gray-500 dark:text-gray-400",height:"h-8",padding:"px-3",size:"text-sm",font:"font-medium",rounded:"rounded-md",shadow:"",icon:"w-4 h-4 flex-shrink-0 me-2"}}},Zt={wrapper:"relative",container:"z-20 group",width:"",background:"bg-white dark:bg-gray-900",shadow:"shadow-lg",rounded:"rounded-md",ring:"ring-1 ring-gray-200 dark:ring-gray-800",base:"overflow-hidden focus:outline-none relative",transition:{enterActiveClass:"transition ease-out duration-200",enterFromClass:"opacity-0 translate-y-1",enterToClass:"opacity-100 translate-y-0",leaveActiveClass:"transition ease-in duration-150",leaveFromClass:"opacity-100 translate-y-0",leaveToClass:"opacity-0 translate-y-1"},popper:{placement:"bottom-start",scroll:!1},arrow:yt};async function en(e,a){return await tn(a).catch(f=>(console.error("Failed to get image meta for "+a,f+""),{width:0,height:0,ratio:0}))}async function tn(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((a,d)=>{const f=new Image;f.onload=()=>{const n={width:f.width,height:f.height,ratio:f.width/f.height};a(n)},f.onerror=n=>d(n),f.src=e})}function Je(e){return a=>a?e[a]||a:e.missingValue}function nn({formatter:e,keyMap:a,joinWith:d="/",valueMap:f}={}){e||(e=(s,r)=>`${s}=${r}`),a&&typeof a!="function"&&(a=Je(a));const n=f||{};return Object.keys(n).forEach(s=>{typeof n[s]!="function"&&(n[s]=Je(n[s]))}),(s={})=>Object.entries(s).filter(([u,_])=>typeof _<"u").map(([u,_])=>{const p=n[u];return typeof p=="function"&&(_=p(s[u])),u=typeof a=="function"?a(u):u,e(u,_)}).join(d)}function ve(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return Number.parseInt(e,10)}function on(e=""){if(e===void 0||!e.length)return[];const a=new Set;for(const d of e.split(" ")){const f=Number.parseInt(d.replace("x",""));f&&a.add(f)}return Array.from(a)}function an(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function ln(e){const a={};if(typeof e=="string")for(const d of e.split(/[\s,]+/).filter(f=>f)){const f=d.split(":");f.length!==2?a["1px"]=f[0].trim():a[f[0].trim()]=f[1].trim()}else Object.assign(a,e);return a}function sn(e){const a={options:e},d=(n,s={})=>ut(a,n,s),f=(n,s={},r={})=>d(n,{...r,modifiers:Le(s,r.modifiers||{})}).url;for(const n in e.presets)f[n]=(s,r,u)=>f(s,r,{...e.presets[n],...u});return f.options=e,f.getImage=d,f.getMeta=(n,s)=>rn(a,n,s),f.getSizes=(n,s)=>un(a,n,s),a.$img=f,f}async function rn(e,a,d){const f=ut(e,a,{...d});return typeof f.getMeta=="function"?await f.getMeta():await en(e,f.url)}function ut(e,a,d){var p,y;if(a&&typeof a!="string")throw new TypeError(`input must be a string (received ${typeof a}: ${JSON.stringify(a)})`);if(!a||a.startsWith("data:"))return{url:a};const{provider:f,defaults:n}=cn(e,d.provider||e.options.provider),s=dn(e,d.preset);if(a=Ge(a)?a:gt(a),!f.supportsAlias){for(const m in e.options.alias)if(a.startsWith(m)){const c=e.options.alias[m];c&&(a=qe(c,a.slice(m.length)))}}if(f.validateDomains&&Ge(a)){const m=ht(a).host;if(!e.options.domains.find(c=>c===m))return{url:a}}const r=Le(d,s,n);r.modifiers={...r.modifiers};const u=r.modifiers.format;(p=r.modifiers)!=null&&p.width&&(r.modifiers.width=ve(r.modifiers.width)),(y=r.modifiers)!=null&&y.height&&(r.modifiers.height=ve(r.modifiers.height));const _=f.getImage(a,r,e);return _.format=_.format||u||"",_}function cn(e,a){const d=e.options.providers[a];if(!d)throw new Error("Unknown provider: "+a);return d}function dn(e,a){if(!a)return{};if(!e.options.presets[a])throw new Error("Unknown preset: "+a);return e.options.presets[a]}function un(e,a,d){var w,b,U,h,k;const f=ve((w=d.modifiers)==null?void 0:w.width),n=ve((b=d.modifiers)==null?void 0:b.height),s=ln(d.sizes),r=(U=d.densities)!=null&&U.trim()?on(d.densities.trim()):e.options.densities;an(r);const u=f&&n?n/f:0,_=[],p=[];if(Object.keys(s).length>=1){for(const I in s){const C=Qe(I,String(s[I]),n,u,e);if(C!==void 0){_.push({size:C.size,screenMaxWidth:C.screenMaxWidth,media:`(max-width: ${C.screenMaxWidth}px)`});for(const z of r)p.push({width:C._cWidth*z,src:Xe(e,a,d,C,z)})}}pn(_)}else for(const I of r){const C=Object.keys(s)[0];let z=C?Qe(C,String(s[C]),n,u,e):void 0;z===void 0&&(z={size:"",screenMaxWidth:0,_cWidth:(h=d.modifiers)==null?void 0:h.width,_cHeight:(k=d.modifiers)==null?void 0:k.height}),p.push({width:I,src:Xe(e,a,d,z,I)})}fn(p);const y=p[p.length-1],m=_.length?_.map(I=>`${I.media?I.media+" ":""}${I.size}`).join(", "):void 0,c=m?"w":"x",g=p.map(I=>`${I.src} ${I.width}${c}`).join(", ");return{sizes:m,srcset:g,src:y==null?void 0:y.src}}function Qe(e,a,d,f,n){const s=n.options.screens&&n.options.screens[e]||Number.parseInt(e),r=a.endsWith("vw");if(!r&&/^\d+$/.test(a)&&(a=a+"px"),!r&&!a.endsWith("px"))return;let u=Number.parseInt(a);if(!s||!u)return;r&&(u=Math.round(u/100*s));const _=f?Math.round(u*f):d;return{size:a,screenMaxWidth:s,_cWidth:u,_cHeight:_}}function Xe(e,a,d,f,n){return e.$img(a,{...d.modifiers,width:f._cWidth?f._cWidth*n:void 0,height:f._cHeight?f._cHeight*n:void 0},d)}function pn(e){var d;e.sort((f,n)=>f.screenMaxWidth-n.screenMaxWidth);let a=null;for(let f=e.length-1;f>=0;f--){const n=e[f];n.media===a&&e.splice(f,1),a=n.media}for(let f=0;f<e.length;f++)e[f].media=((d=e[f+1])==null?void 0:d.media)||""}function fn(e){e.sort((d,f)=>d.width-f.width);let a=null;for(let d=e.length-1;d>=0;d--){const f=e[d];f.width===a&&e.splice(d,1),a=f.width}}const mn=nn({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,a)=>We(e)+"_"+We(a)}),vn=(e,{modifiers:a={},baseURL:d}={},f)=>{a.width&&a.height&&(a.resize=`${a.width}x${a.height}`,delete a.width,delete a.height);const n=mn(a)||"_";return d||(d=qe(f.options.nuxt.baseURL,"/_ipx")),{url:qe(d,n,kt(e))}},_n=!0,bn=!0,yn=Object.freeze(Object.defineProperty({__proto__:null,getImage:vn,supportsAlias:bn,validateDomains:_n},Symbol.toStringTag,{value:"Module"})),pt={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipxStatic",domains:[],alias:{},densities:[1,2],format:["webp"]};pt.providers={ipxStatic:{provider:yn,defaults:{}}};const ft=()=>{const e=wt(),a=Ze();return a.$img||a._img||(a._img=sn({...pt,nuxt:{baseURL:e.app.baseURL},runtimeConfig:e}))};function gn(e){var a;(a=performance==null?void 0:performance.mark)==null||a.call(performance,"mark_feature_usage",{detail:{feature:e}})}const hn={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],required:!1,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,required:!1,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],required:!1}},kn=e=>{const a=A(()=>({provider:e.provider,preset:e.preset})),d=A(()=>({width:ve(e.width),height:ve(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce})),f=ft(),n=A(()=>({...e.modifiers,width:ve(e.width),height:ve(e.height),format:e.format,quality:e.quality||f.options.quality,background:e.background,fit:e.fit}));return{options:a,attrs:d,modifiers:n}},wn={...hn,placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1}},$n=["src"],Sn=M({__name:"NuxtImg",props:wn,emits:["load","error"],setup(e,{emit:a}){const d=e,f=$t(),n=a,s=!1,r=ft(),u=kn(d),_=D(!1),p=D(),y=A(()=>r.getSizes(d.src,{...u.options.value,sizes:d.sizes,densities:d.densities,modifiers:{...u.modifiers.value,width:ve(d.width),height:ve(d.height)}})),m=A(()=>{const h={...u.attrs.value,"data-nuxt-img":""};return(!d.placeholder||_.value)&&(h.sizes=y.value.sizes,h.srcset=y.value.srcset),h}),c=A(()=>{let h=d.placeholder;if(h===""&&(h=!0),!h||_.value)return!1;if(typeof h=="string")return h;const k=Array.isArray(h)?h:typeof h=="number"?[h,h]:[10,10];return r(d.src,{...u.modifiers.value,width:k[0],height:k[1],quality:k[2]||50,blur:k[3]||3},u.options.value)}),g=A(()=>d.sizes?y.value.src:r(d.src,u.modifiers.value,u.options.value)),w=A(()=>c.value?c.value:g.value),U=Ze().isHydrating;return ge(()=>{if(c.value){const h=new Image;g.value&&(h.src=g.value),d.sizes&&(h.sizes=y.value.sizes||"",h.srcset=y.value.srcset),h.onload=k=>{_.value=!0,n("load",k)},gn("nuxt-image");return}p.value&&(p.value.complete&&U&&(p.value.getAttribute("data-error")?n("error",new Event("error")):n("load",new Event("load"))),p.value.onload=h=>{n("load",h)},p.value.onerror=h=>{n("error",h)})}),(h,k)=>(l(),$("img",me({ref_key:"imgEl",ref:p,class:d.placeholder&&!_.value?d.placeholderClass:void 0},{...t(s)?{onerror:"this.setAttribute('data-error', 1)"}:{},...m.value,...t(f)},{src:w.value}),null,16,$n))}}),In=De(_e.ui.strategy,_e.ui.contextMenu,Zt),Dn=M({inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},virtualElement:{type:Object,required:!0},popper:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close"],setup(e,{emit:a}){const{ui:d,attrs:f}=Me("contextMenu",H(e,"ui"),In),n=A(()=>Le({},e.popper,d.value.popper)),s=A({get(){return e.modelValue},set(p){a("update:modelValue",p)}}),r=H(e,"virtualElement"),[,u]=Pt(n.value,r),_=A(()=>et(tt(d.value.container,d.value.width),e.class));return St(u,()=>{s.value=!1}),{ui:d,attrs:f,isOpen:s,wrapperClass:_,popper:n,container:u}}});function Un(e,a,d,f,n,s){return e.isOpen?(l(),$("div",me({key:0,ref:"container",class:e.wrapperClass},e.attrs),[o(J,me({appear:""},e.ui.transition),{default:i(()=>[Z("div",null,[e.popper.arrow?(l(),$("div",{key:0,"data-popper-arrow":"",class:N(Object.values(e.ui.arrow))},null,2)):x("",!0),Z("div",{class:N([e.ui.base,e.ui.ring,e.ui.rounded,e.ui.shadow,e.ui.background])},[de(e.$slots,"default")],2)])]),_:3},16)],16)):x("",!0)}const Vn=Te(Dn,[["render",Un]]),En={class:"flex justify-left"},Fn=M({__name:"PhotoCard",props:{candId:{type:String,default:""},destination:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,d;const f=W(),n=G(),s=e,r=D(""),{refresh:u}=([a,d]=Q(async()=>it("image",async()=>{const k=await $fetch("/api/image",{params:{image:s.destination},responseType:"blob"});r.value=window.URL.createObjectURL(new Blob([k]))})),a=await a,d(),a),{open:_,reset:p,onCancel:y,onChange:m}=nt({accept:".json",multiple:!1});y(()=>{p()}),m(async k=>{if(!k)return;const I=new FormData,C=k[0];I.append("file",C);const{message:z}=await n("/api/file/image/"+s.candId,{method:"POST",body:I});z=="success"?f.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Фото добавлено",color:"green"}):f.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка формата",color:"red"}),p(),await u()});const{x:c,y:g}=It(),{y:w}=Dt(),b=D(!1),U=D({getBoundingClientRect:()=>({})});function h(){const k=t(g)-t(w),I=t(c);U.value.getBoundingClientRect=()=>({width:0,height:0,top:k,left:I}),b.value=!0}return(k,I)=>{const C=Sn,z=R,O=Vn,T=X;return l(),$("div",En,[o(T,{ui:{body:{padding:"p-1 sm:p-1"}},onContextmenu:ee(h,["prevent"])},{default:i(()=>[o(C,{src:t(r),width:"180",height:"180"},null,8,["src"]),s.editable?(l(),S(O,{key:0,modelValue:t(b),"onUpdate:modelValue":I[0]||(I[0]=E=>He(b)?b.value=E:null),"virtual-element":t(U)},{default:i(()=>[o(z,{label:"Загрузить",variant:"link",onClick:t(_)},null,8,["onClick"])]),_:1},8,["modelValue","virtual-element"])):x("",!0)]),_:1})])}}}),Cn={class:"flex grid grid-cols-6 gap-3 mb-3"},ae=M({__name:"LabelSlot",props:{label:{type:String,default:""},labelClass:{type:String,default:"col-span-1"},inputClass:{type:String,default:"col-span-5 break-words"}},setup(e){const a=e;return(d,f)=>(l(),$("div",Cn,[Z("div",{class:N(a.labelClass)},V(a.label),3),Z("div",{class:N(a.inputClass)},[de(d.$slots,"default")],2)]))}}),zn=De(_e.ui.strategy,_e.ui.horizontalNavigation,Qt),xn=M({components:{UIcon:$e,UAvatar:ot,UBadge:Ne,ULink:at},inheritAttrs:!1,props:{links:{type:Array,default:()=>[]},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:a,attrs:d}=Me("horizontalNavigation",H(e,"ui"),zn,H(e,"class")),f=A(()=>Array.isArray(e.links[0])?e.links:[e.links]);return{ui:a,attrs:d,sections:f,getULinkProps:Ut,twMerge:et,twJoin:tt}}}),On={key:0,class:"sr-only"};function Tn(e,a,d,f,n,s){const r=ot,u=$e,_=Ne,p=at;return l(),$("nav",me({class:e.ui.wrapper},e.attrs),[(l(!0),$(B,null,Y(e.sections,(y,m)=>(l(),$("ul",{key:`section${m}`,class:N(e.ui.container)},[(l(!0),$(B,null,Y(y,(c,g)=>(l(),$("li",{key:`section${m}-${g}`,class:N(e.ui.inner)},[o(p,me({ref_for:!0},e.getULinkProps(c),{class:[e.ui.base,e.ui.before,e.ui.after],"active-class":e.ui.active,"inactive-class":e.ui.inactive,onClick:c.click,onKeyup:a[0]||(a[0]=je(w=>w.target.blur(),["enter"]))}),{default:i(({isActive:w})=>[de(e.$slots,"avatar",{link:c,isActive:w},()=>[c.avatar?(l(),S(r,me({key:0,ref_for:!0},{size:e.ui.avatar.size,...c.avatar},{class:[e.ui.avatar.base]}),null,16,["class"])):x("",!0)]),de(e.$slots,"icon",{link:c,isActive:w},()=>[c.icon?(l(),S(u,{key:0,name:c.icon,class:N(e.twMerge(e.twJoin(e.ui.icon.base,w?e.ui.icon.active:e.ui.icon.inactive),c.iconClass))},null,8,["name","class"])):x("",!0)]),de(e.$slots,"default",{link:c,isActive:w},()=>[c.label?(l(),$("span",{key:0,class:N(e.twMerge(e.ui.label,c.labelClass))},[w?(l(),$("span",On," Current page: ")):x("",!0),F(" "+V(c.label),1)],2)):x("",!0)]),de(e.$slots,"badge",{link:c,isActive:w},()=>[c.badge?(l(),S(_,me({key:0,ref_for:!0},{size:e.ui.badge.size,color:e.ui.badge.color,variant:e.ui.badge.variant,...typeof c.badge=="string"||typeof c.badge=="number"?{label:c.badge}:c.badge},{class:e.ui.badge.base}),null,16,["class"])):x("",!0)])]),_:2},1040,["class","active-class","inactive-class","onClick"])],2))),128))],2))),128))],16)}const Mn=Te(xn,[["render",Tn]]),le=M({__name:"NaviHorizont",props:{navlen:{type:Number,default:3},candId:{type:String,default:""},inputId:{type:String,default:""},item:{type:String,default:""}},emits:["delete","update"],setup(e,{emit:a}){const d=W(),f=G(),n=a,s=e,{open:r,reset:u,onCancel:_,onChange:p}=nt();p(async m=>{if(!m)return;const c=new FormData;if(m){for(const g of m)c.append("file",g);await f(`/api/file/${s.item}/${s.candId}`,{method:"POST",body:c}),d.add({icon:"i-heroicons-check-circle",title:"Информация",description:"Файлы успешно загружены",color:"green"})}u()}),_(()=>{u()});const y=[{label:"Изменить",icon:"i-heroicons-pencil-square",click:()=>n("update")},{label:"Удалить",icon:"i-heroicons-trash",click:()=>n("delete")},{label:"Загрузить",icon:"i-heroicons-cloud-arrow-up",slot:"upload",click:()=>r()}];return(m,c)=>{const g=Mn;return l(),S(g,{links:y.slice(0,s.navlen)},null,8,["links"])}}}),An={key:0},Pn={key:1},Bn={key:1},qn=M({__name:"ResumeDiv",props:{editable:{type:Boolean,default:!1},candId:{type:String,default:""},person:{type:Object,default:{}}},emits:["update"],setup(e,{emit:a}){te(["FormsResumeForm","ElementsSkeletonDiv"]);const d=a,f=W(),n=G(),s=e,r=D(!1),u=D(""),_=D(!1),p=D(!1);async function y(){if(!confirm("Вы действительно хотите изменить регион?"))return;const{message:b}=await n(`/api/region/${s.candId}`,{params:{region:u.value}});b=="success"?(d("update"),f.add({icon:"i-heroicons-check-circle",title:"Информация",description:"Изменение региона успешно",color:"green"})):f.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Регион не был изменен",color:"red"})}async function m(){s.person.destination&&(p.value=!0,await n("/api/folder",{params:{folder:s.person.destination}}),p.value=!1)}async function c(b){_.value=!0,r.value=!1;const{message:U}=await n("/api/persons/"+s.candId,{method:"POST",body:b});_.value=!1,d("update"),U=="success"?f.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}):f.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при обновлении информации",color:"red"})}async function g(){if(!confirm("Вы действительно хотите удалить запись?"))return;_.value=!0;const{message:b}=await n(`/api/persons/${s.candId}`,{method:"DELETE"});if(_.value=!1,b=="success")return f.add({icon:"i-heroicons-information-circle",title:"Информация",description:"Запись удалена",color:"primary"}),Vt("/persons");f.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при удалении информации",color:"red"})}async function w(){r.value=!1,d("update")}return(b,U)=>{const h=Bt,k=oe,I=be,C=ae,z=R,O=le,T=X;return l(),S(T,null,ne({default:i(()=>[t(r)?(l(),$("div",An,[o(h,{resume:s.person,onCancel:w,onUpdate:c},null,8,["resume"])])):(l(),$("div",Pn,[t(_)?(l(),S(k,{key:0,rows:14})):(l(),$("div",Bn,[o(C,{label:"Регион"},{default:i(()=>[o(I,{modelValue:t(u),"onUpdate:modelValue":U[0]||(U[0]=E=>He(u)?u.value=E:null),style:{width:"20%"},options:["Главный офис","РЦ Юг","РЦ Запад","РЦ Урал","РЦ Восток"],disabled:!s.editable,placeholder:s.person.region,onChange:y},null,8,["modelValue","disabled","placeholder"])]),_:1}),o(C,{label:"Фамилия"},{default:i(()=>[F(V(s.person.surname),1)]),_:1}),o(C,{label:"Имя"},{default:i(()=>[F(V(s.person.firstname),1)]),_:1}),o(C,{label:"Отчество"},{default:i(()=>[F(V(s.person.patronymic),1)]),_:1}),o(C,{label:"Дата рождения"},{default:i(()=>[F(V(t(ue)(s.person.birthday,"DD.MM.YYYY")),1)]),_:1}),o(C,{label:"Место рождения"},{default:i(()=>[F(V(s.person.birthplace),1)]),_:1}),o(C,{label:"Гражданство"},{default:i(()=>[F(V(s.person.citizenship),1)]),_:1}),s.person.dual?(l(),S(C,{key:0,label:"Двойное гражданство"},{default:i(()=>[F(V(s.person.dual),1)]),_:1})):x("",!0),o(C,{label:"СНИЛС"},{default:i(()=>[F(V(s.person.snils),1)]),_:1}),o(C,{label:"ИНН"},{default:i(()=>[F(V(s.person.inn),1)]),_:1}),o(C,{label:"Семейное положение"},{default:i(()=>[F(V(s.person.marital),1)]),_:1}),o(C,{label:"Дата записи"},{default:i(()=>[F(V(t(ue)(s.person.created,"DD.MM.YYYY HH:mm")),1)]),_:1}),o(C,{label:"Пользователь"},{default:i(()=>[F(V(s.person.username?s.person.username:""),1)]),_:1}),s.person.addition?(l(),S(C,{key:1,label:"Дополнительная информация"},{default:i(()=>[F(V(s.person.addition),1)]),_:1})):x("",!0),o(C,{label:"Материалы"},{default:i(()=>[o(z,{loading:t(p),label:"Открыть",variant:"link",onClick:m},null,8,["loading"])]),_:1})]))]))]),_:2},[s.editable&&!t(r)?{name:"footer",fn:i(()=>[o(O,{"cand-id":s.candId,item:"persons",onDelete:g,onUpdate:U[1]||(U[1]=E=>r.value=!0)},null,8,["cand-id"])]),key:"0"}:void 0]),1024)}}}),jn=M({__name:"StaffForm",props:{staff:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const d=a,n=H(e.staff);function s(){d("update",n.value),u()}function r(){d("cancel"),u()}function u(){Object.assign(n.value,{position:"",department:""})}return(_,p)=>{const y=pe,m=re,c=se,g=ce;return l(),S(g,{state:t(n),onSubmit:ee(s,["prevent"])},{default:i(()=>[o(m,{class:"mb-3",label:"Должность"},{default:i(()=>[o(y,{modelValue:t(n).position,"onUpdate:modelValue":p[0]||(p[0]=w=>t(n).position=w),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Должность"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Подразделение"},{default:i(()=>[o(y,{modelValue:t(n).department,"onUpdate:modelValue":p[1]||(p[1]=w=>t(n).department=w),modelModifiers:{trim:!0,lazy:!0},placeholder:"Подразделение"},null,8,["modelValue"])]),_:1}),o(c,{onCancel:r})]),_:1},8,["state"])}}}),Ln={key:0,class:"py-3"},Hn={key:1},Nn={key:1},Yn={key:2,class:"p-3"},Rn={key:1,class:"text-primary"},Gn=M({__name:"StaffDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,d;te(["FormsStaffForm","ElementsSkeletonDiv"]);const f=G(),n=W(),s=e,r=D(!1),u=D(!1),_=D(!1),p=D(""),y=D({}),m=D([]),{refresh:c,status:g}=([a,d]=Q(async()=>ie("staffs",async()=>{m.value=await f("/api/staffs/"+s.candId)})),a=await a,d(),a);async function w(k){u.value=!0,h();const{message:I}=await f("/api/staffs/"+s.candId,{method:"POST",body:k});I=="success"?n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при обновлении информации",color:"red"}),u.value=!1,await c()}async function b(k){if(h(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:I}=await f("/api/staffs/"+k,{method:"DELETE"});I=="success"?(n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${k} удалена`,color:"primary"}),await c()):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при удалении информации",color:"red"})}function U(){h(),c()}function h(){_.value=!1,p.value="",r.value=!1}return(k,I)=>{const C=R,z=jn,O=X,T=oe,E=ae,q=le;return l(),$(B,null,[s.editable?(l(),S(C,{key:0,label:t(r)?"Скрыть форму":"Добавить запись",variant:"link",onClick:I[0]||(I[0]=v=>r.value=!t(r))},null,8,["label"])):x("",!0),o(J,{name:"slide-fade"},{default:i(()=>[t(r)?(l(),$("div",Ln,[o(O,null,{default:i(()=>[o(z,{"cand-id":s.candId,onCancel:U,onUpdate:w},null,8,["cand-id"])]),_:1})])):x("",!0)]),_:1}),t(m)&&t(m).length?(l(),$("div",Hn,[(l(!0),$(B,null,Y(t(m),(v,P)=>(l(),$("div",{key:P,class:"p-1"},[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:2})):(l(),S(O,{key:1},ne({default:i(()=>[t(_)&&t(p)==v.id.toString()?(l(),S(z,{key:0,"cand-id":s.candId,staff:t(y),onCancel:U,onUpdate:w},null,8,["cand-id","staff"])):(l(),$("div",Nn,[o(E,{label:"Должность"},{default:i(()=>[F(V(v.position),1)]),_:2},1024),o(E,{label:"Департамент"},{default:i(()=>[F(V(v.department),1)]),_:2},1024)]))]),_:2},[s.editable&&(!t(_)||t(p)!=v.id.toString())?{name:"footer",fn:i(()=>[o(q,{navlen:2,onDelete:j=>b(v.id),onUpdate:j=>{y.value=v,p.value=v.id.toString(),_.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(l(),$("div",Yn,[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:2})):(l(),$("p",Rn,"Данные о должностях отсутствуют"))]))],64)}}}),Wn=M({__name:"EducationForm",props:{education:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const d=a,n=H(e.education);function s(){d("update",n.value),u()}function r(){d("cancel"),u()}function u(){Object.assign(n.value,{view:"",institution:"",finished:"",specialty:""})}return(_,p)=>{const y=be,m=re,c=pe,g=se,w=ce;return l(),S(w,{state:t(n),onSubmit:ee(s,["prevent"])},{default:i(()=>[o(m,{class:"mb-3",label:"Вид образования"},{default:i(()=>[o(y,{modelValue:t(n).view,"onUpdate:modelValue":p[0]||(p[0]=b=>t(n).view=b),required:"",options:["Основное общее","Среднее общее","Среднее профессиональное","Высшее","Неоконченное высшее образование","Другое образование"]},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Название учебного заведения"},{default:i(()=>[o(c,{modelValue:t(n).institution,"onUpdate:modelValue":p[1]||(p[1]=b=>t(n).institution=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Название учебного заведения"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Год окончания"},{default:i(()=>[o(c,{modelValue:t(n).finished,"onUpdate:modelValue":p[2]||(p[2]=b=>t(n).finished=b),modelModifiers:{trim:!0,lazy:!0},placeholder:"Год окончания"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Специальность"},{default:i(()=>[o(c,{modelValue:t(n).specialty,"onUpdate:modelValue":p[3]||(p[3]=b=>t(n).specialty=b),modelModifiers:{trim:!0,lazy:!0},placeholder:"Специальность"},null,8,["modelValue"])]),_:1}),o(g,{onCancel:r})]),_:1},8,["state"])}}}),Kn={key:0,class:"py-3"},Jn={key:1},Qn={key:1},Xn={key:2,class:"p-3"},Zn={key:1,class:"text-primary"},eo=M({__name:"EducateDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,d;te(["FormsEducationForm","ElementsSkeletonDiv"]);const f=G(),n=W(),s=e,r=D(!1),u=D(!1),_=D(""),p=D(!1),y=D({}),m=D([]),{refresh:c,status:g}=([a,d]=Q(async()=>ie("educations",async()=>{m.value=await f("/api/educations/"+s.candId)})),a=await a,d(),a);async function w(k){u.value=!0,h();const{message:I}=await f("/api/educations/"+s.candId,{method:"POST",body:k});I=="success"?n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при обновлении информации",color:"red"}),u.value=!1,await c()}async function b(k){if(h(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:I}=await f("/api/educations/"+k,{method:"DELETE"});I=="success"?(n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${k} удалена`,color:"primary"}),await c()):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при удалении информации",color:"red"})}function U(){h(),c()}function h(){p.value=!1,_.value="",r.value=!1}return(k,I)=>{const C=R,z=Wn,O=X,T=oe,E=ae,q=le;return l(),$(B,null,[s.editable?(l(),S(C,{key:0,label:t(r)?"Скрыть форму":"Добавить запись",variant:"link",onClick:I[0]||(I[0]=v=>r.value=!t(r))},null,8,["label"])):x("",!0),o(J,{name:"slide-fade"},{default:i(()=>[t(r)?(l(),$("div",Kn,[o(O,null,{default:i(()=>[o(z,{"cand-id":s.candId,onCancel:U,onUpdate:w},null,8,["cand-id"])]),_:1})])):x("",!0)]),_:1}),t(m)&&t(m).length?(l(),$("div",Jn,[(l(!0),$(B,null,Y(t(m),(v,P)=>(l(),$("div",{key:P,class:"p-1"},[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:8})):(l(),S(O,{key:1},ne({default:i(()=>[t(p)&&t(_)==v.id.toString()?(l(),S(z,{key:0,"cand-id":s.candId,education:t(y),onCancel:U,onUpdate:w},null,8,["cand-id","education"])):(l(),$("div",Qn,[o(E,{label:"Уровень образования"},{default:i(()=>[F(V(v.view),1)]),_:2},1024),o(E,{label:"Название учебного заведения"},{default:i(()=>[F(V(v.institution),1)]),_:2},1024),o(E,{label:"Год окончания"},{default:i(()=>[F(V(v.finished),1)]),_:2},1024),o(E,{label:"Специальность"},{default:i(()=>[F(V(v.specialty),1)]),_:2},1024)]))]),_:2},[s.editable&&(!t(p)||t(_)!=v.id.toString())?{name:"footer",fn:i(()=>[o(q,{navlen:2,onDelete:j=>b(v.id),onUpdate:j=>{y.value=v,_.value=v.id.toString(),p.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(l(),$("div",Xn,[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:8})):(l(),$("p",Zn,"Данные отсутствуют"))]))],64)}}}),to=M({__name:"WorkplaceForm",props:{work:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const d=a,n=H(e.work);n.value.starts=n.value.starts?ue(n.value.starts,"YYYY-MM-DD").value:"",n.value.finished=n.value.finished?ue(n.value.finished,"YYYY-MM-DD").value:"";function s(){d("update",n.value),u()}function r(){d("cancel"),u()}function u(){Object.assign(n.value,{now_work:!1,starts:"",finished:"",workplace:"",position:"",addresses:"",reason:""})}return(_,p)=>{const y=Lt,m=re,c=pe,g=se,w=ce;return l(),S(w,{state:t(n),onSubmit:ee(s,["prevent"])},{default:i(()=>[o(m,{class:"mb-3",label:"Текущая работа"},{default:i(()=>[o(y,{modelValue:t(n).now_work,"onUpdate:modelValue":p[0]||(p[0]=b=>t(n).now_work=b)},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Начало работы"},{default:i(()=>[o(c,{modelValue:t(n).starts,"onUpdate:modelValue":p[1]||(p[1]=b=>t(n).starts=b),required:"",placeholder:"Начало работы",type:"date"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Окончание работы"},{default:i(()=>[o(c,{modelValue:t(n).finished,"onUpdate:modelValue":p[2]||(p[2]=b=>t(n).finished=b),required:"",placeholder:"Окончание работы",type:"date"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Место работы"},{default:i(()=>[o(c,{modelValue:t(n).workplace,"onUpdate:modelValue":p[3]||(p[3]=b=>t(n).workplace=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Место работы"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Должность"},{default:i(()=>[o(c,{modelValue:t(n).position,"onUpdate:modelValue":p[4]||(p[4]=b=>t(n).position=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Должность"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Адрес организации"},{default:i(()=>[o(c,{modelValue:t(n).addresses,"onUpdate:modelValue":p[5]||(p[5]=b=>t(n).addresses=b),modelModifiers:{trim:!0,lazy:!0},placeholder:"Адрес организации"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Причина увольнения"},{default:i(()=>[o(c,{modelValue:t(n).reason,"onUpdate:modelValue":p[6]||(p[6]=b=>t(n).reason=b),modelModifiers:{trim:!0,lazy:!0},placeholder:"Причина увольнения"},null,8,["modelValue"])]),_:1}),o(g,{onCancel:r})]),_:1},8,["state"])}}}),no={key:0,class:"py-3"},oo={key:1},ao={key:1},lo={key:2,class:"p-3"},so={key:1,class:"text-primary"},io=M({__name:"WorkDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,d;te(["FormsWorkForm","ElementsSkeletonDiv"]);const f=G(),n=W(),s=e,r=D(!1),u=D(!1),_=D(!1),p=D(""),y=D({}),m=D([]),{refresh:c,status:g}=([a,d]=Q(async()=>ie("workplaces",async()=>{m.value=await f("/api/workplaces/"+s.candId)})),a=await a,d(),a);async function w(k){u.value=!1,h();const{message:I}=await f("/api/workplaces/"+s.candId,{method:"POST",body:k});I=="success"?n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при обновлении информации",color:"red"}),u.value=!1,await c()}async function b(k){if(h(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:I}=await f("/api/workplaces/"+k,{method:"DELETE"});I=="success"?(n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${k} удалена`,color:"primary"}),await c()):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при удалении информации",color:"red"})}function U(){h(),c()}function h(){_.value=!1,p.value="",r.value=!1}return(k,I)=>{const C=R,z=to,O=X,T=oe,E=ae,q=le;return l(),$(B,null,[s.editable?(l(),S(C,{key:0,label:t(r)?"Скрыть форму":"Добавить запись",variant:"link",onClick:I[0]||(I[0]=v=>r.value=!t(r))},null,8,["label"])):x("",!0),o(J,{name:"slide-fade"},{default:i(()=>[t(r)?(l(),$("div",no,[o(O,null,{default:i(()=>[o(z,{"cand-id":s.candId,onCancel:U,onUpdate:w},null,8,["cand-id"])]),_:1})])):x("",!0)]),_:1}),t(m)&&t(m).length?(l(),$("div",oo,[(l(!0),$(B,null,Y(t(m),(v,P)=>(l(),$("div",{key:P,class:"p-1"},[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:8})):(l(),S(O,{key:1},ne({default:i(()=>[t(_)&&t(p)==v.id.toString()?(l(),S(z,{key:0,"cand-id":s.candId,work:t(y),onCancel:U,onUpdate:w},null,8,["cand-id","work"])):(l(),$("div",ao,[v.now_work?(l(),S(E,{key:0,label:"Текущая работа"},{default:i(()=>[F(V(v.now_work?"Да":"Нет"),1)]),_:2},1024)):x("",!0),o(E,{label:"Начало работы"},{default:i(()=>[F(V(t(ue)(v.starts,"DD.MM.YYYY")),1)]),_:2},1024),v.now_work?x("",!0):(l(),S(E,{key:1,label:"Окончание работы"},{default:i(()=>[F(V(t(ue)(v.finished,"DD.MM.YYYY")),1)]),_:2},1024)),o(E,{label:"Место работы"},{default:i(()=>[F(V(v.workplace),1)]),_:2},1024),o(E,{label:"Адрес"},{default:i(()=>[F(V(v.addresses),1)]),_:2},1024),o(E,{label:"Должность"},{default:i(()=>[F(V(v.position),1)]),_:2},1024),v.reason?(l(),S(E,{key:2,label:"Причина увольнения"},{default:i(()=>[F(V(v.reason),1)]),_:2},1024)):x("",!0)]))]),_:2},[s.editable&&(!t(_)||t(p)!=v.id.toString())?{name:"footer",fn:i(()=>[o(q,{navlen:2,onDelete:j=>b(v.id),onUpdate:j=>{y.value=v,p.value=v.id.toString(),_.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(l(),$("div",lo,[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:8})):(l(),$("p",so,"Данные о работе отсутствуют"))]))],64)}}}),ro=M({__name:"DocumentForm",props:{docs:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const d=a,n=H(e.docs);n.value.issue=n.value.issue?ue(n.value.issue,"YYYY-MM-DD").value:"";function s(){d("update",n.value),u()}function r(){d("cancel"),u()}function u(){Object.assign(n.value,{view:"",series:"",digits:"",agency:"",issue:""})}return(_,p)=>{const y=be,m=re,c=pe,g=se,w=ce;return l(),S(w,{state:t(n),onSubmit:ee(s,["prevent"])},{default:i(()=>[o(m,{class:"mb-3",label:"Вид документа"},{default:i(()=>[o(y,{modelValue:t(n).view,"onUpdate:modelValue":p[0]||(p[0]=b=>t(n).view=b),required:"",options:["Паспорт","Иностарнный паспорт","Другое"]},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Серия документа"},{default:i(()=>[o(c,{modelValue:t(n).series,"onUpdate:modelValue":p[1]||(p[1]=b=>t(n).series=b),modelModifiers:{trim:!0,lazy:!0},placeholder:"Серия документа"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Номер документа"},{default:i(()=>[o(c,{modelValue:t(n).digits,"onUpdate:modelValue":p[2]||(p[2]=b=>t(n).digits=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Номер документа"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Кем выдан"},{default:i(()=>[o(c,{modelValue:t(n).agency,"onUpdate:modelValue":p[3]||(p[3]=b=>t(n).agency=b),modelModifiers:{trim:!0},placeholder:"Кем выдан"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Дата выдачи"},{default:i(()=>[o(c,{modelValue:t(n).issue,"onUpdate:modelValue":p[4]||(p[4]=b=>t(n).issue=b),modelModifiers:{trim:!0,lazy:!0},required:"",type:"date"},null,8,["modelValue"])]),_:1}),o(g,{onCancel:r})]),_:1},8,["state"])}}}),co={key:0,class:"py-3"},uo={key:1},po={key:1},fo={key:2,class:"p-3"},mo={key:1,class:"text-primary"},vo=M({__name:"DocumDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,d;te(["FormsDocumentForm","ElementsSkeletonDiv"]);const f=G(),n=W(),s=e,r=D(!1),u=D(!1),_=D(""),p=D(!1),y=D({}),m=D([]),{refresh:c,status:g}=([a,d]=Q(async()=>ie("documents",async()=>{m.value=await f("/api/documents/"+s.candId)})),a=await a,d(),a);async function w(k){u.value=!0,h();const{message:I}=await f("/api/documents/"+s.candId,{method:"POST",body:k});I=="success"?n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при обновлении информации",color:"red"}),u.value=!1,await c()}async function b(k){if(h(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:I}=await f("/api/documents/"+k,{method:"DELETE"});I=="success"?(n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${k} удалена`,color:"primary"}),await c()):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при удалении информации",color:"red"})}function U(){h(),c()}function h(){p.value=!1,_.value="",r.value=!1}return(k,I)=>{const C=R,z=ro,O=X,T=oe,E=ae,q=le;return l(),$(B,null,[s.editable?(l(),S(C,{key:0,label:t(r)?"Скрыть форму":"Добавить запись",variant:"link",onClick:I[0]||(I[0]=v=>r.value=!t(r))},null,8,["label"])):x("",!0),o(J,{name:"slide-fade"},{default:i(()=>[t(r)?(l(),$("div",co,[o(O,null,{default:i(()=>[o(z,{"cand-id":s.candId,onCancel:U,onUpdate:w},null,8,["cand-id"])]),_:1})])):x("",!0)]),_:1}),t(m)&&t(m).length?(l(),$("div",uo,[(l(!0),$(B,null,Y(t(m),(v,P)=>(l(),$("div",{key:P,class:"p-1"},[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:8})):(l(),S(O,{key:1},ne({default:i(()=>[t(p)&&t(_)==v.id.toString()?(l(),S(z,{key:0,"cand-id":s.candId,docs:t(y),onCancel:U,onUpdate:w},null,8,["cand-id","docs"])):(l(),$("div",po,[o(E,{label:"Вид документа"},{default:i(()=>[F(V(v.view),1)]),_:2},1024),o(E,{label:"Номер документа"},{default:i(()=>[F(V(v.digits),1)]),_:2},1024),o(E,{label:"Серия документа"},{default:i(()=>[F(V(v.series),1)]),_:2},1024),o(E,{label:"Дата выдачи"},{default:i(()=>[F(V(t(ue)(v.issue,"DD.MM.YYYY")),1)]),_:2},1024),o(E,{label:"Кем выдан"},{default:i(()=>[F(V(v.agency),1)]),_:2},1024)]))]),_:2},[s.editable&&(!t(p)||t(_)!=v.id.toString())?{name:"footer",fn:i(()=>[o(q,{navlen:2,onDelete:j=>b(v.id),onUpdate:j=>{y.value=v,_.value=v.id.toString(),p.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(l(),$("div",fo,[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:8})):(l(),$("p",mo,"Данные отсутствуют"))]))],64)}}}),_o=M({__name:"AddressForm",props:{addrs:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const d=a,n=H(e.addrs);function s(){d("update",n.value),u()}function r(){d("cancel"),u()}function u(){Object.assign(n.value,{view:"",addresses:""})}return(_,p)=>{const y=be,m=re,c=pe,g=se,w=ce;return l(),S(w,{state:t(n),onSubmit:ee(s,["prevent"])},{default:i(()=>[o(m,{class:"mb-3",label:"Вид адреса"},{default:i(()=>[o(y,{modelValue:t(n).view,"onUpdate:modelValue":p[0]||(p[0]=b=>t(n).view=b),modelModifiers:{trim:!0,lazy:!0},required:"",options:["Адрес регистрации","Адрес проживания","Другое"]},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Адрес"},{default:i(()=>[o(c,{modelValue:t(n).addresses,"onUpdate:modelValue":p[1]||(p[1]=b=>t(n).addresses=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Адрес"},null,8,["modelValue"])]),_:1}),o(g,{onCancel:r})]),_:1},8,["state"])}}}),bo={key:0,class:"p-1"},yo={key:1},go={key:1},ho={key:2,class:"p-3"},ko={key:1,class:"text-primary"},wo=M({__name:"AddressDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,d;te(["FormsAddressForm","ElementsSkeletonDiv"]);const f=G(),n=W(),s=e,r=D(!1),u=D(!1),_=D(!1),p=D(""),y=D({}),m=D([]),{refresh:c,status:g}=([a,d]=Q(async()=>ie("addresses",async()=>{m.value=await f("/api/addresses/"+s.candId)})),a=await a,d(),a);async function w(k){u.value=!0,h();const{message:I}=await f("/api/addresses/"+s.candId,{method:"POST",body:k});I=="success"?n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при обновлении информации",color:"red"}),u.value=!1,await c()}async function b(k){if(h(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:I}=await f("/api/addresses/"+k,{method:"DELETE"});I=="success"?(n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${k} удалена`,color:"primary"}),await c()):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при удалении информации",color:"red"})}function U(){h(),c()}function h(){_.value=!1,r.value=!1,p.value=""}return(k,I)=>{const C=R,z=_o,O=X,T=oe,E=ae,q=le;return l(),$(B,null,[s.editable?(l(),S(C,{key:0,label:t(r)?"Скрыть форму":"Добавить запись",variant:"link",onClick:I[0]||(I[0]=v=>r.value=!t(r))},null,8,["label"])):x("",!0),o(J,{name:"slide-fade"},{default:i(()=>[t(r)?(l(),$("div",bo,[o(O,null,{default:i(()=>[o(z,{"cand-id":s.candId,onCancel:U,onUpdate:w},null,8,["cand-id"])]),_:1})])):x("",!0)]),_:1}),t(m)&&t(m).length?(l(),$("div",yo,[(l(!0),$(B,null,Y(t(m),(v,P)=>(l(),$("div",{key:P,class:"py-3"},[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:8})):(l(),S(O,{key:1},ne({default:i(()=>[t(_)&&t(p)==v.id.toString()?(l(),S(z,{key:0,"cand-id":s.candId,addrs:t(y),onCancel:U,onUpdate:w},null,8,["cand-id","addrs"])):(l(),$("div",go,[o(E,{label:"Тип"},{default:i(()=>[F(V(v.view),1)]),_:2},1024),o(E,{label:"Адрес"},{default:i(()=>[F(V(v.addresses),1)]),_:2},1024)]))]),_:2},[s.editable&&(!t(_)||t(p)!=v.id.toString())?{name:"footer",fn:i(()=>[o(q,{navlen:2,onDelete:j=>b(v.id),onUpdate:j=>{y.value=v,p.value=v.id.toString(),_.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(l(),$("div",ho,[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:8})):(l(),$("p",ko,"Адреса отсутствуют"))]))],64)}}}),$o=M({__name:"ContactForm",props:{contact:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const d=a,n=H(e.contact);function s(){d("update",n.value),u()}function r(){d("cancel"),u()}function u(){Object.assign(n.value,{view:"",contact:""})}return(_,p)=>{const y=be,m=re,c=pe,g=se,w=ce;return l(),S(w,{state:t(n),onSubmit:ee(s,["prevent"])},{default:i(()=>[o(m,{class:"mb-3",label:"Вид контакта"},{default:i(()=>[o(y,{modelValue:t(n).view,"onUpdate:modelValue":p[0]||(p[0]=b=>t(n).view=b),modelModifiers:{trim:!0,lazy:!0},required:"",options:["Телефон","Электронная почта","Другое"]},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Контакт"},{default:i(()=>[o(c,{modelValue:t(n).contact,"onUpdate:modelValue":p[1]||(p[1]=b=>t(n).contact=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Контакт"},null,8,["modelValue"])]),_:1}),o(g,{onCancel:r})]),_:1},8,["state"])}}}),So={key:0,class:"py-3"},Io={key:1},Do={key:1},Uo={key:2,class:"p-3"},Vo={key:1,class:"text-primary"},Eo=M({__name:"ContactDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,d;te(["FormsContactForm","ElementsSkeletonDiv"]);const f=G(),n=W(),s=e,r=D(!1),u=D(!1),_=D(""),p=D(!1),y=D({}),m=D([]),{refresh:c,status:g}=([a,d]=Q(async()=>ie("contacts",async()=>{m.value=await f("/api/contacts/"+s.candId)})),a=await a,d(),a);async function w(k){u.value=!0,h();const{message:I}=await f("/api/contacts/"+s.candId,{method:"POST",body:k});I=="success"?n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при обновлении информации",color:"red"}),u.value=!1,await c()}async function b(k){if(h(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:I}=await f("/api/contacts/"+k,{method:"DELETE"});I=="success"?(n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${k} удалена`,color:"primary"}),await c()):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при удалении информации",color:"red"})}function U(){h(),c()}function h(){p.value=!1,_.value="",r.value=!1}return(k,I)=>{const C=R,z=$o,O=X,T=oe,E=ae,q=le;return l(),$(B,null,[s.editable?(l(),S(C,{key:0,label:t(r)?"Скрыть форму":"Добавить запись",variant:"link",onClick:I[0]||(I[0]=v=>r.value=!t(r))},null,8,["label"])):x("",!0),o(J,{name:"slide-fade"},{default:i(()=>[t(r)?(l(),$("div",So,[o(O,null,{default:i(()=>[o(z,{"cand-id":s.candId,onCancel:U,onUpdate:w},null,8,["cand-id"])]),_:1})])):x("",!0)]),_:1}),t(m)&&t(m).length?(l(),$("div",Io,[(l(!0),$(B,null,Y(t(m),(v,P)=>(l(),$("div",{key:P,class:"p-1"},[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:8})):(l(),S(O,{key:1},ne({default:i(()=>[t(p)&&t(_)==v.id.toString()?(l(),S(z,{key:0,"cand-id":s.candId,contact:t(y),onCancel:U,onUpdate:w},null,8,["cand-id","contact"])):(l(),$("div",Do,[o(E,{label:"Вид"},{default:i(()=>[F(V(v.view),1)]),_:2},1024),o(E,{label:"Контакт"},{default:i(()=>[F(V(v.contact),1)]),_:2},1024)]))]),_:2},[s.editable&&(!t(p)||t(_)!=v.id.toString())?{name:"footer",fn:i(()=>[o(q,{navlen:2,onDelete:j=>b(v.id),onUpdate:j=>{y.value=v,_.value=v.id.toString(),p.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(l(),$("div",Uo,[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:2})):(l(),$("p",Vo,"Данные отсутствуют"))]))],64)}}}),Fo=M({__name:"AffilationForm",props:{affils:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const d=a,n=H(e.affils);function s(){d("update",n.value),u()}function r(){d("cancel"),u()}function u(){Object.assign(n.value,{view:"",organization:"",inn:""})}return(_,p)=>{const y=be,m=re,c=pe,g=se,w=ce;return l(),S(w,{state:t(n),onSubmit:ee(s,["prevent"])},{default:i(()=>[o(m,{class:"mb-3",label:"Тип участия"},{default:i(()=>[o(y,{modelValue:t(n).view,"onUpdate:modelValue":p[0]||(p[0]=b=>t(n).view=b),modelModifiers:{trim:!0,lazy:!0},required:"",options:["Являлся государственным/муниципальным служащим","Являлся государственным должностным лицом","Связанные лица работают в государственных организациях","Участвует в деятельности коммерческих организаций"]},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Организация"},{default:i(()=>[o(c,{modelValue:t(n).organization,"onUpdate:modelValue":p[1]||(p[1]=b=>t(n).organization=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Организация"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"ИНН"},{default:i(()=>[o(c,{modelValue:t(n).inn,"onUpdate:modelValue":p[2]||(p[2]=b=>t(n).inn=b),modelModifiers:{trim:!0,lazy:!0},placeholder:"ИНН"},null,8,["modelValue"])]),_:1}),o(g,{onCancel:r})]),_:1},8,["state"])}}}),Co={key:0,class:"py-3"},zo={key:1},xo={key:1},Oo={key:2,class:"p-3"},To={key:1,class:"text-primary"},Mo=M({__name:"AffilDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,d;te(["FormsAffilationForm","ElementsSkeletonDiv"]);const f=G(),n=W(),s=e,r=D(!1),u=D(!1),_=D(!1),p=D(""),y=D({}),m=D([]),{refresh:c,status:g}=([a,d]=Q(async()=>ie("affilations",async()=>{m.value=await f("/api/affilations/"+s.candId)})),a=await a,d(),a);async function w(k){u.value=!0,h();const{message:I}=await f("/api/affilations/"+s.candId,{method:"POST",body:k});I=="success"?n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при обновлении информации",color:"red"}),u.value=!1,await c()}async function b(k){if(h(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:I}=await f("/api/affilations/"+k,{method:"DELETE"});I=="success"?(n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${k} удалена`,color:"primary"}),await c()):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при удалении информации",color:"red"})}function U(){h(),c()}function h(){_.value=!1,p.value="",r.value=!1}return(k,I)=>{const C=R,z=Fo,O=X,T=oe,E=ae,q=le;return l(),$(B,null,[s.editable?(l(),S(C,{key:0,label:t(r)?"Скрыть форму":"Добавить запись",variant:"link",onClick:I[0]||(I[0]=v=>r.value=!t(r))},null,8,["label"])):x("",!0),o(J,{name:"slide-fade"},{default:i(()=>[t(r)?(l(),$("div",Co,[o(O,null,{default:i(()=>[o(z,{"cand-id":s.candId,onCancel:U,onUpdate:w},null,8,["cand-id"])]),_:1})])):x("",!0)]),_:1}),t(m)&&t(m).length?(l(),$("div",zo,[(l(!0),$(B,null,Y(t(m),(v,P)=>(l(),$("div",{key:P,class:"p-1"},[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:8})):(l(),S(O,{key:1},ne({default:i(()=>[t(_)&&t(p)==v.id.toString()?(l(),S(z,{key:0,"cand-id":s.candId,affils:t(y),onCancel:U,onUpdate:w},null,8,["cand-id","affils"])):(l(),$("div",xo,[o(E,{label:"Тип участия"},{default:i(()=>[F(V(v.view),1)]),_:2},1024),o(E,{label:"Организация"},{default:i(()=>[F(V(v.organization),1)]),_:2},1024),o(E,{label:"ИНН"},{default:i(()=>[F(V(v.inn),1)]),_:2},1024)]))]),_:2},[s.editable&&(!t(_)||t(p)!=v.id.toString())?{name:"footer",fn:i(()=>[o(q,{navlen:2,onDelete:j=>b(v.id),onUpdate:j=>{y.value=v,p.value=v.id.toString(),_.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(l(),$("div",Oo,[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:8})):(l(),$("p",To,"Данные отсутствуют"))]))],64)}}}),Ao=M({__name:"PreviousForm",props:{previous:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const d=a,n=H(e.previous);function s(){d("update",n.value),u()}function r(){d("cancel"),u()}function u(){Object.assign(n.value,{surname:"",firstname:"",patronymic:"",changed:"",reason:""})}return(_,p)=>{const y=pe,m=re,c=se,g=ce;return l(),S(g,{state:t(n),onSubmit:ee(s,["prevent"])},{default:i(()=>[o(m,{class:"mb-3",label:"Фамилия"},{default:i(()=>[o(y,{modelValue:t(n).surname,"onUpdate:modelValue":p[0]||(p[0]=w=>t(n).surname=w),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Фамилия"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Имя"},{default:i(()=>[o(y,{modelValue:t(n).firstname,"onUpdate:modelValue":p[1]||(p[1]=w=>t(n).firstname=w),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Имя"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Отчество"},{default:i(()=>[o(y,{modelValue:t(n).patronymic,"onUpdate:modelValue":p[2]||(p[2]=w=>t(n).patronymic=w),modelModifiers:{trim:!0,lazy:!0},placeholder:"Отчество"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Год изменения"},{default:i(()=>[o(y,{modelValue:t(n).changed,"onUpdate:modelValue":p[3]||(p[3]=w=>t(n).changed=w),modelModifiers:{trim:!0,lazy:!0},placeholder:"Год изменения"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Причина изменения"},{default:i(()=>[o(y,{modelValue:t(n).reason,"onUpdate:modelValue":p[4]||(p[4]=w=>t(n).reason=w),modelModifiers:{trim:!0,lazy:!0},placeholder:"Причина изменения"},null,8,["modelValue"])]),_:1}),o(c,{onCancel:r})]),_:1},8,["state"])}}}),Po={key:0,class:"py-3"},Bo={key:1},qo={key:1},jo={key:2,class:"p-3"},Lo={key:1,class:"text-primary"},Ho=M({__name:"PrevDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,d;te(["FormsPreviousForm","ElementsSkeletonDiv"]);const f=G(),n=W(),s=e,r=D(!1),u=D(!1),_=D(!1),p=D(""),y=D({}),m=D([]),{refresh:c,status:g}=([a,d]=Q(async()=>ie("previous",async()=>{m.value=await f("/api/previous/"+s.candId)})),a=await a,d(),a);async function w(k){u.value=!0,h();const{message:I}=await f("/api/previous/"+s.candId,{method:"POST",body:k});I=="success"?n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при обновлении информации",color:"red"}),u.value=!1,await c()}async function b(k){if(h(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:I}=await f("/api/previous/"+k,{method:"DELETE"});I=="success"?(n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${k} удалена`,color:"primary"}),await c()):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при удалении информации",color:"red"})}function U(){h(),c()}function h(){_.value=!1,p.value="",r.value=!1}return(k,I)=>{const C=R,z=Ao,O=X,T=oe,E=ae,q=le;return l(),$(B,null,[s.editable?(l(),S(C,{key:0,label:t(r)?"Скрыть форму":"Добавить запись",variant:"link",onClick:I[0]||(I[0]=v=>r.value=!t(r))},null,8,["label"])):x("",!0),o(J,{name:"slide-fade"},{default:i(()=>[t(r)?(l(),$("div",Po,[o(O,null,{default:i(()=>[o(z,{"cand-id":s.candId,onCancel:U,onUpdate:w},null,8,["cand-id"])]),_:1})])):x("",!0)]),_:1}),t(m)&&t(m).length?(l(),$("div",Bo,[(l(!0),$(B,null,Y(t(m),(v,P)=>(l(),$("div",{key:P,class:"p-1"},[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:4})):(l(),S(O,{key:1},ne({default:i(()=>[t(_)&&t(p)==v.id.toString()?(l(),S(z,{key:0,"cand-id":s.candId,previous:t(y),onCancel:U,onUpdate:w},null,8,["cand-id","previous"])):(l(),$("div",qo,[o(E,{label:"Фамилия"},{default:i(()=>[F(V(v.surname),1)]),_:2},1024),o(E,{label:"Имя"},{default:i(()=>[F(V(v.firstname),1)]),_:2},1024),v.patronymic?(l(),S(E,{key:0,label:"Отчество"},{default:i(()=>[F(V(v.patronymic),1)]),_:2},1024)):x("",!0),v.changed?(l(),S(E,{key:1,label:"Год изменения"},{default:i(()=>[F(V(v.changed),1)]),_:2},1024)):x("",!0),v.reason?(l(),S(E,{key:2,label:"Причина"},{default:i(()=>[F(V(v.reason),1)]),_:2},1024)):x("",!0)]))]),_:2},[s.editable&&(!t(_)||t(p)!=v.id.toString())?{name:"footer",fn:i(()=>[o(q,{navlen:2,onDelete:j=>b(v.id.toString()),onUpdate:j=>{y.value=v,p.value=v.id.toString(),_.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(l(),$("div",jo,[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:4})):(l(),$("p",Lo,"Данные отсутствуют"))]))],64)}}}),No=M({__name:"RelationForm",props:{relation:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const d=a,n=H(e.relation);async function s(){d("update",n.value),u()}function r(){d("cancel"),u()}function u(){Object.assign(n.value,{relation:"",relation_id:""})}return(_,p)=>{const y=be,m=re,c=pe,g=se,w=ce;return l(),S(w,{state:t(n),onSubmit:ee(s,["prevent"])},{default:i(()=>[o(m,{class:"mb-3",label:"Тип связи"},{default:i(()=>[o(y,{modelValue:t(n).relation,"onUpdate:modelValue":p[0]||(p[0]=b=>t(n).relation=b),modelModifiers:{trim:!0,lazy:!0},required:"",options:["Одно лицо","Родители-Дети","Братья-Сестры","Супруг-Супруга","Родственники","Близкая связь"]},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"ID связи"},{default:i(()=>[o(c,{modelValue:t(n).relation_id,"onUpdate:modelValue":p[1]||(p[1]=b=>t(n).relation_id=b),modelModifiers:{trim:!0,lazy:!0},required:"",type:"number"},null,8,["modelValue"])]),_:1}),o(g,{onCancel:r})]),_:1},8,["state"])}}}),Yo={key:0,class:"py-3"},Ro={key:1},Go={key:1},Wo={key:2,class:"p-3"},Ko={key:1,class:"text-primary"},Jo=M({__name:"RelateDiv",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,d;te(["FormsRelationForm","ElementsSkeletonDiv"]);const f=G(),n=W(),s=e,r=D(!1),u=D(!1),_=D(!1),p=D(""),y=D({}),m=D([]),{refresh:c,status:g}=([a,d]=Q(async()=>ie("relations",async()=>{m.value=await f("/api/relations/"+s.candId)})),a=await a,d(),a);async function w(k){u.value=!0,h();const{message:I}=await f("/api/relations/"+s.candId,{method:"POST",body:k});I=="success"?n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при обновлении информации",color:"red"}),u.value=!1,await c()}async function b(k){if(h(),!confirm("Вы действительно хотите удалить запись?"))return;const{message:I}=await f("/api/relations/"+k,{method:"DELETE"});I=="success"?(n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${k} удалена`,color:"primary"}),await c()):n.add({icon:"i-heroicons-information-circle",title:"Внимание",description:"Ошибка при удалении информации",color:"red"})}function U(){h(),c()}function h(){_.value=!1,p.value="",r.value=!1}return(k,I)=>{const C=R,z=No,O=X,T=oe,E=ae,q=Et,v=le;return l(),$(B,null,[s.editable?(l(),S(C,{key:0,label:t(r)?"Скрыть форму":"Добавить запись",variant:"link",onClick:I[0]||(I[0]=P=>r.value=!t(r))},null,8,["label"])):x("",!0),o(J,{name:"slide-fade"},{default:i(()=>[t(r)?(l(),$("div",Yo,[o(O,null,{default:i(()=>[o(z,{"cand-id":s.candId,onCancel:U,onUpdate:w},null,8,["cand-id"])]),_:1})])):x("",!0)]),_:1}),t(m)&&t(m).length?(l(),$("div",Ro,[(l(!0),$(B,null,Y(t(m),(P,j)=>(l(),$("div",{key:j,class:"p-1"},[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:2})):(l(),S(O,{key:1},ne({default:i(()=>[t(_)&&t(p)==P.id.toString()?(l(),S(z,{key:0,"cand-id":s.candId,relation:t(y),onCancel:U,onUpdate:w},null,8,["cand-id","relation"])):(l(),$("div",Go,[o(E,{label:"Тип"},{default:i(()=>[F(V(P.relation),1)]),_:2},1024),o(E,{label:"Связь"},{default:i(()=>[o(q,{to:`/profile/${P.relation_id}`},{default:i(()=>[F(" ID #"+V(P.relation_id),1)]),_:2},1032,["to"])]),_:2},1024)]))]),_:2},[s.editable&&(!t(_)||t(p)!=P.id.toString())?{name:"footer",fn:i(()=>[o(v,{navlen:2,onDelete:bt=>b(P.id.toString()),onUpdate:bt=>{y.value=P,p.value=P.id.toString(),_.value=!0}},null,8,["onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(l(),$("div",Wo,[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:2})):(l(),$("p",Ko,"Данные отсутствуют"))]))],64)}}});function Qo(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(a=>setTimeout(()=>{throw a}))}var Xo=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Xo||{});let mt=Symbol("DisclosureContext");function Ye(e){let a=Ue(mt,null);if(a===null){let d=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,Ye),d}return a}let vt=Symbol("DisclosurePanelContext");function Zo(){return Ue(vt,null)}let ea=M({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(e,{slots:a,attrs:d}){let f=D(e.defaultOpen?0:1),n=D(null),s=D(null),r={buttonId:D(`headlessui-disclosure-button-${ze()}`),panelId:D(`headlessui-disclosure-panel-${ze()}`),disclosureState:f,panel:n,button:s,toggleDisclosure(){f.value=we(f.value,{0:1,1:0})},closeDisclosure(){f.value!==1&&(f.value=1)},close(u){r.closeDisclosure();let _=u?u instanceof HTMLElement?u:u.value instanceof HTMLElement?L(u):L(r.button):L(r.button);_==null||_.focus()}};return Fe(mt,r),Ht(A(()=>we(f.value,{0:xe.Open,1:xe.Closed}))),()=>{let{defaultOpen:u,..._}=e,p={open:f.value===0,close:r.close};return he({theirProps:_,ourProps:{},slot:p,slots:a,attrs:d,name:"Disclosure"})}}}),ta=M({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:a,slots:d,expose:f}){let n=Ye("DisclosureButton"),s=Zo(),r=A(()=>s===null?!1:s.value===n.panelId.value);ge(()=>{r.value||e.id!==null&&(n.buttonId.value=e.id)}),Ae(()=>{r.value||(n.buttonId.value=null)});let u=D(null);f({el:u,$el:u}),r.value||lt(()=>{n.button.value=u.value});let _=rt(A(()=>({as:e.as,type:a.type})),u);function p(){var c;e.disabled||(r.value?(n.toggleDisclosure(),(c=L(n.button))==null||c.focus()):n.toggleDisclosure())}function y(c){var g;if(!e.disabled)if(r.value)switch(c.key){case K.Space:case K.Enter:c.preventDefault(),c.stopPropagation(),n.toggleDisclosure(),(g=L(n.button))==null||g.focus();break}else switch(c.key){case K.Space:case K.Enter:c.preventDefault(),c.stopPropagation(),n.toggleDisclosure();break}}function m(c){switch(c.key){case K.Space:c.preventDefault();break}}return()=>{var c;let g={open:n.disclosureState.value===0},{id:w,...b}=e,U=r.value?{ref:u,type:_.value,onClick:p,onKeydown:y}:{id:(c=n.buttonId.value)!=null?c:w,ref:u,type:_.value,"aria-expanded":n.disclosureState.value===0,"aria-controls":n.disclosureState.value===0||L(n.panel)?n.panelId.value:void 0,disabled:e.disabled?!0:void 0,onClick:p,onKeydown:y,onKeyup:m};return he({ourProps:U,theirProps:b,slot:g,attrs:a,slots:d,name:"DisclosureButton"})}}}),na=M({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:a,slots:d,expose:f}){let n=Ye("DisclosurePanel");ge(()=>{e.id!==null&&(n.panelId.value=e.id)}),Ae(()=>{n.panelId.value=null}),f({el:n.panel,$el:n.panel}),Fe(vt,n.panelId);let s=Nt(),r=A(()=>s!==null?(s.value&xe.Open)===xe.Open:n.disclosureState.value===0);return()=>{var u;let _={open:n.disclosureState.value===0,close:n.close},{id:p,...y}=e,m={id:(u=n.panelId.value)!=null?u:p,ref:n.panel};return he({ourProps:m,theirProps:y,slot:_,attrs:a,slots:d,features:Oe.RenderStrategy|Oe.Static,visible:r.value,name:"DisclosurePanel"})}}}),oa=M({props:{onFocus:{type:Function,required:!0}},setup(e){let a=D(!0);return()=>a.value?Ce(ct,{as:"button",type:"button",features:Yt.Focusable,onFocus(d){d.preventDefault();let f,n=50;function s(){var r;if(n--<=0){f&&cancelAnimationFrame(f);return}if((r=e.onFocus)!=null&&r.call(e)){a.value=!1,cancelAnimationFrame(f);return}f=requestAnimationFrame(s)}f=requestAnimationFrame(s)}}):null}});var aa=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(aa||{}),la=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(la||{});let _t=Symbol("TabsContext");function Ve(e){let a=Ue(_t,null);if(a===null){let d=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,Ve),d}return a}let Re=Symbol("TabsSSRContext"),sa=M({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:a,attrs:d,emit:f}){var n;let s=D((n=e.selectedIndex)!=null?n:e.defaultIndex),r=D([]),u=D([]),_=A(()=>e.selectedIndex!==null),p=A(()=>_.value?e.selectedIndex:s.value);function y(b){var U;let h=Se(m.tabs.value,L),k=Se(m.panels.value,L),I=h.filter(C=>{var z;return!((z=L(C))!=null&&z.hasAttribute("disabled"))});if(b<0||b>h.length-1){let C=we(s.value===null?0:Math.sign(b-s.value),{[-1]:()=>1,0:()=>we(Math.sign(b),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),z=we(C,{0:()=>h.indexOf(I[0]),1:()=>h.indexOf(I[I.length-1])});z!==-1&&(s.value=z),m.tabs.value=h,m.panels.value=k}else{let C=h.slice(0,b),z=[...h.slice(b),...C].find(T=>I.includes(T));if(!z)return;let O=(U=h.indexOf(z))!=null?U:m.selectedIndex.value;O===-1&&(O=m.selectedIndex.value),s.value=O,m.tabs.value=h,m.panels.value=k}}let m={selectedIndex:A(()=>{var b,U;return(U=(b=s.value)!=null?b:e.defaultIndex)!=null?U:null}),orientation:A(()=>e.vertical?"vertical":"horizontal"),activation:A(()=>e.manual?"manual":"auto"),tabs:r,panels:u,setSelectedIndex(b){p.value!==b&&f("change",b),_.value||y(b)},registerTab(b){var U;if(r.value.includes(b))return;let h=r.value[s.value];if(r.value.push(b),r.value=Se(r.value,L),!_.value){let k=(U=r.value.indexOf(h))!=null?U:s.value;k!==-1&&(s.value=k)}},unregisterTab(b){let U=r.value.indexOf(b);U!==-1&&r.value.splice(U,1)},registerPanel(b){u.value.includes(b)||(u.value.push(b),u.value=Se(u.value,L))},unregisterPanel(b){let U=u.value.indexOf(b);U!==-1&&u.value.splice(U,1)}};Fe(_t,m);let c=D({tabs:[],panels:[]}),g=D(!1);ge(()=>{g.value=!0}),Fe(Re,A(()=>g.value?null:c.value));let w=A(()=>e.selectedIndex);return ge(()=>{Ie([w],()=>{var b;return y((b=e.selectedIndex)!=null?b:e.defaultIndex)},{immediate:!0})}),lt(()=>{if(!_.value||p.value==null||m.tabs.value.length<=0)return;let b=Se(m.tabs.value,L);b.some((U,h)=>L(m.tabs.value[h])!==L(U))&&m.setSelectedIndex(b.findIndex(U=>L(U)===L(m.tabs.value[p.value])))}),()=>{let b={selectedIndex:s.value};return Ce(B,[r.value.length<=0&&Ce(oa,{onFocus:()=>{for(let U of r.value){let h=L(U);if((h==null?void 0:h.tabIndex)===0)return h.focus(),!0}return!1}}),he({theirProps:{...d,...Rt(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:b,slots:a,attrs:d,name:"TabGroup"})])}}}),ia=M({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:a,slots:d}){let f=Ve("TabList");return()=>{let n={selectedIndex:f.selectedIndex.value},s={role:"tablist","aria-orientation":f.orientation.value};return he({ourProps:s,theirProps:e,slot:n,attrs:a,slots:d,name:"TabList"})}}}),ra=M({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:a,slots:d,expose:f}){var n;let s=(n=e.id)!=null?n:`headlessui-tabs-tab-${ze()}`,r=Ve("Tab"),u=D(null);f({el:u,$el:u}),ge(()=>r.registerTab(u)),Ae(()=>r.unregisterTab(u));let _=Ue(Re),p=A(()=>{if(_.value){let k=_.value.tabs.indexOf(s);return k===-1?_.value.tabs.push(s)-1:k}return-1}),y=A(()=>{let k=r.tabs.value.indexOf(u);return k===-1?p.value:k}),m=A(()=>y.value===r.selectedIndex.value);function c(k){var I;let C=k();if(C===Ee.Success&&r.activation.value==="auto"){let z=(I=Gt(u))==null?void 0:I.activeElement,O=r.tabs.value.findIndex(T=>L(T)===z);O!==-1&&r.setSelectedIndex(O)}return C}function g(k){let I=r.tabs.value.map(C=>L(C)).filter(Boolean);if(k.key===K.Space||k.key===K.Enter){k.preventDefault(),k.stopPropagation(),r.setSelectedIndex(y.value);return}switch(k.key){case K.Home:case K.PageUp:return k.preventDefault(),k.stopPropagation(),c(()=>ke(I,fe.First));case K.End:case K.PageDown:return k.preventDefault(),k.stopPropagation(),c(()=>ke(I,fe.Last))}if(c(()=>we(r.orientation.value,{vertical(){return k.key===K.ArrowUp?ke(I,fe.Previous|fe.WrapAround):k.key===K.ArrowDown?ke(I,fe.Next|fe.WrapAround):Ee.Error},horizontal(){return k.key===K.ArrowLeft?ke(I,fe.Previous|fe.WrapAround):k.key===K.ArrowRight?ke(I,fe.Next|fe.WrapAround):Ee.Error}}))===Ee.Success)return k.preventDefault()}let w=D(!1);function b(){var k;w.value||(w.value=!0,!e.disabled&&((k=L(u))==null||k.focus({preventScroll:!0}),r.setSelectedIndex(y.value),Qo(()=>{w.value=!1})))}function U(k){k.preventDefault()}let h=rt(A(()=>({as:e.as,type:a.type})),u);return()=>{var k,I;let C={selected:m.value,disabled:(k=e.disabled)!=null?k:!1},{...z}=e,O={ref:u,onKeydown:g,onMousedown:U,onClick:b,id:s,role:"tab",type:h.value,"aria-controls":(I=L(r.panels.value[y.value]))==null?void 0:I.id,"aria-selected":m.value,tabIndex:m.value?0:-1,disabled:e.disabled?!0:void 0};return he({ourProps:O,theirProps:z,slot:C,attrs:a,slots:d,name:"Tab"})}}}),ca=M({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:a,attrs:d}){let f=Ve("TabPanels");return()=>{let n={selectedIndex:f.selectedIndex.value};return he({theirProps:e,ourProps:{},slot:n,attrs:d,slots:a,name:"TabPanels"})}}}),da=M({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(e,{attrs:a,slots:d,expose:f}){var n;let s=(n=e.id)!=null?n:`headlessui-tabs-panel-${ze()}`,r=Ve("TabPanel"),u=D(null);f({el:u,$el:u}),ge(()=>r.registerPanel(u)),Ae(()=>r.unregisterPanel(u));let _=Ue(Re),p=A(()=>{if(_.value){let c=_.value.panels.indexOf(s);return c===-1?_.value.panels.push(s)-1:c}return-1}),y=A(()=>{let c=r.panels.value.indexOf(u);return c===-1?p.value:c}),m=A(()=>y.value===r.selectedIndex.value);return()=>{var c;let g={selected:m.value},{tabIndex:w,...b}=e,U={ref:u,id:s,role:"tabpanel","aria-labelledby":(c=L(r.tabs.value[y.value]))==null?void 0:c.id,tabIndex:m.value?w:-1};return!m.value&&e.unmount&&!e.static?Ce(ct,{as:"span","aria-hidden":!0,...U}):he({ourProps:U,theirProps:b,slot:g,attrs:a,slots:d,features:Oe.Static|Oe.RenderStrategy,visible:m.value,name:"TabPanel"})}}});const Be=De(_e.ui.strategy,_e.ui.accordion,Jt),ua=De(_e.ui.strategy,_e.ui.button,Ft),pa=M({components:{HDisclosure:ea,HDisclosureButton:ta,HDisclosurePanel:na,UIcon:$e,UButton:R},inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},defaultOpen:{type:Boolean,default:!1},openIcon:{type:String,default:()=>Be.default.openIcon},unmount:{type:Boolean,default:!1},closeIcon:{type:String,default:()=>Be.default.closeIcon},multiple:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["open"],setup(e,{emit:a}){const{ui:d,attrs:f}=Me("accordion",H(e,"ui"),Be,H(e,"class")),n=A(()=>ua),s=D([]),r=A(()=>s.value.map(({open:c})=>c));Ie(r,(c,g)=>{for(const w in c){const b=g[w],U=c[w];!b&&U&&a("open",w)}},{immediate:!0});function u(c,g){!e.items[c].closeOthers&&e.multiple||s.value.forEach(w=>{w.open&&w.close(g.target)})}function _(c,g){const w=c;w.style.height="0",w.offsetHeight,w.style.height=w.scrollHeight+"px",w.addEventListener("transitionend",g,{once:!0})}function p(c){const g=c;g.style.height=g.scrollHeight+"px",g.offsetHeight}function y(c){const g=c;g.style.height="auto"}function m(c,g){const w=c;w.style.height="0",w.addEventListener("transitionend",g,{once:!0})}return dt(()=>st()),{ui:d,uiButton:n,attrs:f,buttonRefs:s,closeOthers:u,omit:Ct,onEnter:_,onBeforeLeave:p,onAfterEnter:y,onLeave:m}}}),fa={key:1};function ma(e,a,d,f,n,s){const r=$e,u=R,_=ye("HDisclosureButton"),p=ye("HDisclosurePanel"),y=ye("HDisclosure");return l(),$("div",{class:N(e.ui.wrapper)},[(l(!0),$(B,null,Y(e.items,(m,c)=>(l(),S(y,{key:c,as:"div",class:N(e.ui.container),"default-open":e.defaultOpen||m.defaultOpen},{default:i(({open:g,close:w})=>[o(_,{ref_for:!0,ref:()=>e.buttonRefs[c]={open:g,close:w},as:"template",disabled:m.disabled,onClick:b=>e.closeOthers(c,b),onKeydown:[je(b=>e.closeOthers(c,b),["enter"]),je(b=>e.closeOthers(c,b),["space"])]},{default:i(()=>[de(e.$slots,"default",{item:m,index:c,open:g,close:w},()=>[o(u,me({ref_for:!0},{...e.omit(e.ui.default,["openIcon","closeIcon"]),...e.attrs,...e.omit(m,["slot","disabled","content","defaultOpen"])}),{trailing:i(()=>[o(r,{name:g&&e.closeIcon?e.closeIcon:e.openIcon,class:N([g&&!e.closeIcon?"-rotate-180":"",e.uiButton.icon.size[m.size||e.uiButton.default.size],e.ui.item.icon])},null,8,["name","class"])]),_:2},1040)])]),_:2},1032,["disabled","onClick","onKeydown"]),o(J,me({ref_for:!0},e.ui.transition,{onEnter:e.onEnter,onAfterEnter:e.onAfterEnter,onBeforeLeave:e.onBeforeLeave,onLeave:e.onLeave}),{default:i(()=>[e.unmount?(l(),S(p,{key:0,class:N([e.ui.item.base,e.ui.item.size,e.ui.item.color,e.ui.item.padding]),unmount:""},{default:i(()=>[de(e.$slots,m.slot||"item",{item:m,index:c,open:g,close:w},()=>[F(V(m.content),1)])]),_:2},1032,["class"])):zt((l(),$("div",fa,[o(p,{class:N([e.ui.item.base,e.ui.item.size,e.ui.item.color,e.ui.item.padding]),static:""},{default:i(()=>[de(e.$slots,m.slot||"item",{item:m,index:c,open:g,close:w},()=>[F(V(m.content),1)])]),_:2},1032,["class"])],512)),[[xt,g]])]),_:2},1040,["onEnter","onAfterEnter","onBeforeLeave","onLeave"])]),_:2},1032,["class","default-open"]))),128))],2)}const va=Te(pa,[["render",ma]]),_a=M({__name:"AnketaTab",props:{editable:{type:Boolean,default:!1},candId:{type:String,default:""},person:{type:Object,default:{}}},emits:["update"],setup(e,{emit:a}){const d=e,f=a,n=[{label:"Резюме",icon:"i-heroicons-user",defaultOpen:!0,slot:"resume"},{label:"Должности",icon:"i-heroicons-briefcase",slot:"staff"},{label:"Образование",icon:"i-heroicons-academic-cap",slot:"education"},{label:"Работа",icon:"i-heroicons-briefcase",slot:"work"},{label:"Документы",icon:"i-heroicons-document-text",slot:"document"},{label:"Адреса",icon:"i-heroicons-home-modern",slot:"address"},{label:"Контакты",icon:"i-heroicons-phone",slot:"contact"},{label:"Аффилированные",icon:"i-heroicons-user-group",slot:"affiliation"},{label:"Изменения имени",icon:"i-heroicons-archive-box-arrow-down",slot:"prev"},{label:"Связанные",icon:"i-heroicons-user-group",slot:"relate"}];return(s,r)=>{const u=qn,_=Gn,p=eo,y=io,m=vo,c=wo,g=Eo,w=Mo,b=Ho,U=Jo,h=va;return l(),S(h,{items:n,size:"lg",multiple:""},{resume:i(()=>[o(u,{"cand-id":d.candId,editable:d.editable,person:d.person,onUpdate:r[0]||(r[0]=k=>f("update"))},null,8,["cand-id","editable","person"])]),staff:i(()=>[o(_,{"cand-id":d.candId,editable:d.editable},null,8,["cand-id","editable"])]),education:i(()=>[o(p,{"cand-id":d.candId,editable:d.editable},null,8,["cand-id","editable"])]),work:i(()=>[o(y,{"cand-id":d.candId,editable:d.editable},null,8,["cand-id","editable"])]),document:i(()=>[o(m,{"cand-id":d.candId,editable:d.editable},null,8,["cand-id","editable"])]),address:i(()=>[o(c,{"cand-id":d.candId,editable:d.editable},null,8,["cand-id","editable"])]),contact:i(()=>[o(g,{"cand-id":d.candId,editable:d.editable},null,8,["cand-id","editable"])]),affiliation:i(()=>[o(w,{"cand-id":d.candId,editable:d.editable},null,8,["cand-id","editable"])]),prev:i(()=>[o(b,{"cand-id":d.candId,editable:d.editable},null,8,["cand-id","editable"])]),relate:i(()=>[o(U,{"cand-id":d.candId,editable:d.editable},null,8,["cand-id","editable"])]),_:1})}}}),ba=M({__name:"CheckForm",props:{check:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const d=a,n=H(e.check),s=D(!1);function r(){d("update",n.value),_()}function u(){d("cancel"),_()}function _(){s.value=!1,Object.keys(n.value).forEach(p=>{n.value[p]=""})}return Ie(s,()=>{s.value&&Object.assign(n.value,{workplace:"Негатив по местам работы не выявлен",document:"Среди недействительных документов не значится",inn:"ИНН соответствует",debt:"Задолженности не обнаружены",bankruptcy:"Решений о признании банкротом не имеется",bki:"Кредитная история положительная",courts:"Судебные дела не обнаружены",affilation:"Аффилированность не выявлена",terrorist:"В списке террористов не обнаружен",mvd:"В розыск не объявлен",internet:"В открытых источниках негатив не обнаружен",cronos:"В Кронос негатив не выявлен"})}),(p,y)=>{const m=Wt,c=re,g=Pe,w=be,b=se,U=ce;return l(),$(B,null,[o(c,{state:t(s),class:"mb-3",label:"Негатива нет"},{default:i(()=>[o(m,{modelValue:t(s),"onUpdate:modelValue":y[0]||(y[0]=h=>He(s)?s.value=h:null)},null,8,["modelValue"])]),_:1},8,["state"]),o(U,{state:t(n),onSubmit:ee(r,["prevent"])},{default:i(()=>[o(c,{class:"mb-3",label:"Проверка по местам работы"},{default:i(()=>[o(g,{modelValue:t(n).workplace,"onUpdate:modelValue":y[1]||(y[1]=h=>t(n).workplace=h),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка по местам работы"},null,8,["modelValue"])]),_:1}),o(c,{class:"mb-3",label:"Проверка документов"},{default:i(()=>[o(g,{modelValue:t(n).document,"onUpdate:modelValue":y[2]||(y[2]=h=>t(n).document=h),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка документов"},null,8,["modelValue"])]),_:1}),o(c,{class:"mb-3",label:"Проверка ИНН"},{default:i(()=>[o(g,{modelValue:t(n).inn,"onUpdate:modelValue":y[3]||(y[3]=h=>t(n).inn=h),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка ИНН"},null,8,["modelValue"])]),_:1}),o(c,{class:"mb-3",label:"Проверка задолженностей"},{default:i(()=>[o(g,{modelValue:t(n).debt,"onUpdate:modelValue":y[4]||(y[4]=h=>t(n).debt=h),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка задолженностей"},null,8,["modelValue"])]),_:1}),o(c,{class:"mb-3",label:"Проверка банкротства"},{default:i(()=>[o(g,{modelValue:t(n).bankruptcy,"onUpdate:modelValue":y[5]||(y[5]=h=>t(n).bankruptcy=h),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка банкротства"},null,8,["modelValue"])]),_:1}),o(c,{class:"mb-3",label:"Проверка Кредитной истории"},{default:i(()=>[o(g,{modelValue:t(n).bki,"onUpdate:modelValue":y[6]||(y[6]=h=>t(n).bki=h),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка Кредитной истории"},null,8,["modelValue"])]),_:1}),o(c,{class:"mb-3",label:"Проверка судебных дел"},{default:i(()=>[o(g,{modelValue:t(n).courts,"onUpdate:modelValue":y[7]||(y[7]=h=>t(n).courts=h),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка судебных дел"},null,8,["modelValue"])]),_:1}),o(c,{class:"mb-3",label:"Проверка аффилированности"},{default:i(()=>[o(g,{modelValue:t(n).affilation,"onUpdate:modelValue":y[8]||(y[8]=h=>t(n).affilation=h),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка аффилированности"},null,8,["modelValue"])]),_:1}),o(c,{class:"mb-3",label:"Проверка в списке террористов"},{default:i(()=>[o(g,{modelValue:t(n).terrorist,"onUpdate:modelValue":y[9]||(y[9]=h=>t(n).terrorist=h),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка в списке террористов"},null,8,["modelValue"])]),_:1}),o(c,{class:"mb-3",label:"Проверка в розыск"},{default:i(()=>[o(g,{modelValue:t(n).mvd,"onUpdate:modelValue":y[10]||(y[10]=h=>t(n).mvd=h),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка в розыск"},null,8,["modelValue"])]),_:1}),o(c,{class:"mb-3",label:"Проверка в открытых источниках"},{default:i(()=>[o(g,{modelValue:t(n).internet,"onUpdate:modelValue":y[11]||(y[11]=h=>t(n).internet=h),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка в открытых источниках"},null,8,["modelValue"])]),_:1}),o(c,{class:"mb-3",label:"Проверка в Кронос"},{default:i(()=>[o(g,{modelValue:t(n).cronos,"onUpdate:modelValue":y[12]||(y[12]=h=>t(n).cronos=h),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Проверка в Кронос/Крос"},null,8,["modelValue"])]),_:1}),o(c,{class:"mb-3",label:"Дополнительная информация"},{default:i(()=>[o(g,{modelValue:t(n).addition,"onUpdate:modelValue":y[13]||(y[13]=h=>t(n).addition=h),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Дополнительная информация"},null,8,["modelValue"])]),_:1}),o(c,{class:"mb-3",label:"Комментарии"},{default:i(()=>[o(g,{modelValue:t(n).comment,"onUpdate:modelValue":y[14]||(y[14]=h=>t(n).comment=h),modelModifiers:{trim:!0,lazy:!0},autoresize:"",placeholder:"Комментарии"},null,8,["modelValue"])]),_:1}),o(c,{class:"mb-3",label:"Результат"},{default:i(()=>[o(w,{modelValue:t(n).conclusion,"onUpdate:modelValue":y[15]||(y[15]=h=>t(n).conclusion=h),modelModifiers:{trim:!0,lazy:!0},required:"",options:["СОГЛАСОВАНО","СОГЛАСОВАНО С КОММЕНТАРИЕМ","ОТКАЗАНО В СОГЛАСОВАНИИ"]},null,8,["modelValue"])]),_:1}),o(b,{onCancel:u})]),_:1},8,["state"])],64)}}}),ya={key:0,class:"py-3"},ga={key:1},ha={class:"tex-base text-red-800 dark:text-gray-400 font-medium"},ka={key:1},wa={key:2,class:"p-3"},$a={key:1,class:"text-red-800"},Sa=M({__name:"CheckTab",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,d;te(["FormsCheckForm","ElementsSkeletonDiv"]);const f=G(),n=W(),s=e,r=D(!1),u=D(!1),_=D(!1),p=D(""),y=D({}),m=D([]),{refresh:c,status:g}=([a,d]=Q(async()=>ie("checks",async()=>{m.value=await f(`/api/checks/${s.candId}`)})),a=await a,d(),a);async function w(k){u.value=!0,h(),await f("/api/checks/"+s.candId,{method:"POST",body:k}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),u.value=!1,await c()}async function b(k){h(),confirm("Вы действительно хотите удалить запись?")&&(await f(`/api/checks/${k}`,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${k} удалена`,color:"primary"}),await c())}function U(){h(),c()}function h(){r.value=!1,p.value="",_.value=!1}return(k,I)=>{const C=R,z=ba,O=X,T=oe,E=ae,q=le;return l(),$(B,null,[s.editable?(l(),S(C,{key:0,class:"py-3",label:t(_)?"Скрыть форму":"Добавить запись",variant:"link",onClick:I[0]||(I[0]=v=>_.value=!t(_))},null,8,["label"])):x("",!0),o(J,{name:"slide-fade"},{default:i(()=>[t(_)?(l(),$("div",ya,[o(O,null,{default:i(()=>[o(z,{"cand-id":s.candId,onUpdate:w,onCancel:U},null,8,["cand-id"])]),_:1})])):x("",!0)]),_:1}),t(m)&&t(m).length?(l(),$("div",ga,[(l(!0),$(B,null,Y(t(m),(v,P)=>(l(),$("div",{key:P,class:"text-sm text-gray-500 dark:text-gray-400 py-1"},[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:18})):(l(),S(O,{key:1},ne({header:i(()=>[Z("div",ha,V("Проверка кандидата ID #"+v.id),1)]),default:i(()=>[t(r)&&t(p)==v.id.toString()?(l(),S(z,{key:0,"cand-id":s.candId,check:v,onCancel:U,onUpdate:w},null,8,["cand-id","check"])):(l(),$("div",ka,[v.workplace?(l(),S(E,{key:0,label:"Проверка по местам работы"},{default:i(()=>[F(V(v.workplace),1)]),_:2},1024)):x("",!0),v.document?(l(),S(E,{key:1,label:"Проверка паспорта"},{default:i(()=>[F(V(v.document),1)]),_:2},1024)):x("",!0),v.inn?(l(),S(E,{key:2,label:"Проверка ИНН"},{default:i(()=>[F(V(v.inn),1)]),_:2},1024)):x("",!0),v.debt?(l(),S(E,{key:3,label:"Проверка ФССП"},{default:i(()=>[F(V(v.debt),1)]),_:2},1024)):x("",!0),v.bankruptcy?(l(),S(E,{key:4,label:"Проверка банкротства"},{default:i(()=>[F(V(v.bankruptcy),1)]),_:2},1024)):x("",!0),v.bki?(l(),S(E,{key:5,label:"Проверка БКИ"},{default:i(()=>[F(V(v.bki),1)]),_:2},1024)):x("",!0),v.courts?(l(),S(E,{key:6,label:"Проверка судебных решений"},{default:i(()=>[F(V(v.courts),1)]),_:2},1024)):x("",!0),v.affilation?(l(),S(E,{key:7,label:"Проверка аффилированности"},{default:i(()=>[F(V(v.affilation),1)]),_:2},1024)):x("",!0),v.terrorist?(l(),S(E,{key:8,label:"Проверка по списку террористов"},{default:i(()=>[F(V(v.terrorist),1)]),_:2},1024)):x("",!0),v.mvd?(l(),S(E,{key:9,label:"Проверка в розыск"},{default:i(()=>[F(V(v.mvd),1)]),_:2},1024)):x("",!0),v.internet?(l(),S(E,{key:10,label:"Проверка в открытых источниках"},{default:i(()=>[F(V(v.internet),1)]),_:2},1024)):x("",!0),v.cronos?(l(),S(E,{key:11,label:"Проверка в Кронос"},{default:i(()=>[F(V(v.cronos),1)]),_:2},1024)):x("",!0),v.addition?(l(),S(E,{key:12,label:"Дополнительная информация"},{default:i(()=>[F(V(v.addition),1)]),_:2},1024)):x("",!0),v.comment?(l(),S(E,{key:13,label:"Комментарии"},{default:i(()=>[F(V(v.comment),1)]),_:2},1024)):x("",!0),o(E,{label:"Результат"},{default:i(()=>[F(V(v.conclusion),1)]),_:2},1024),o(E,{label:"Сотрудник"},{default:i(()=>[F(V(v.username),1)]),_:2},1024),o(E,{label:"Дата записи"},{default:i(()=>[F(V(t(ue)(v.created,"YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024)]))]),_:2},[s.editable&&(!t(r)||t(p)!=v.id.toString())?{name:"footer",fn:i(()=>[o(q,{"cand-id":s.candId,item:"checks",onUpdate:j=>{y.value=v,p.value=v.id.toString(),r.value=!0},onDelete:j=>b(v.id)},null,8,["cand-id","onUpdate","onDelete"])]),key:"0"}:void 0]),1024))]))),128))])):(l(),$("div",wa,[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:18})):(l(),$("p",$a,"Проверка кандидата отсутствует"))]))],64)}}}),Ia=M({__name:"PoligrafForm",props:{poligraf:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const d=a,n=H(e.poligraf);function s(){d("update",n.value),n.value.theme="",n.value.results=""}function r(){d("cancel"),n.value.theme="",n.value.results=""}return(u,_)=>{const p=be,y=re,m=Pe,c=se,g=ce;return l(),S(g,{state:t(n),onSubmit:ee(s,["prevent"])},{default:i(()=>[o(y,{class:"mb-3",label:"Тема проверки"},{default:i(()=>[o(p,{modelValue:t(n).theme,"onUpdate:modelValue":_[0]||(_[0]=w=>t(n).theme=w),required:"",options:["Проверка кандидата","Служебная проверка","Служебное расследование","Плановое мероприятие"]},null,8,["modelValue"])]),_:1}),o(y,{class:"mb-3",label:"Результат"},{default:i(()=>[o(m,{modelValue:t(n).results,"onUpdate:modelValue":_[1]||(_[1]=w=>t(n).results=w),modelModifiers:{trim:!0,lazy:!0},required:"",autoresize:"",placeholder:"Результат"},null,8,["modelValue"])]),_:1}),o(c,{onCancel:r})]),_:1},8,["state"])}}}),Da={key:0,class:"py-3"},Ua={key:1},Va={class:"tex-base text-red-800 font-medium"},Ea={key:1},Fa={key:2,class:"p-3"},Ca={key:1,class:"text-red-800"},za=M({__name:"PoligrafTab",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,d;te(["FormsPoligrafForm","ElementsSkeletonDiv"]);const f=G(),n=W(),s=e,r=D(!1),u=D(!1),_=D(!1),p=D(""),y=D({}),m=D([]),{refresh:c,status:g}=([a,d]=Q(async()=>ie("poligrafs",async()=>{m.value=await f("/api/poligrafs/"+s.candId)})),a=await a,d(),a);async function w(k){u.value=!0,h(),await f("/api/poligrafs/"+s.candId,{method:"POST",body:k}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),u.value=!1,await c()}async function b(k){h(),confirm("Вы действительно хотите удалить запись?")&&(await f("/api/poligrafs/"+k,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${k} удалена`,color:"primary"}),await c())}function U(){h(),c()}function h(){_.value=!1,r.value=!1,p.value=""}return(k,I)=>{const C=R,z=Ia,O=X,T=oe,E=ae,q=le;return l(),$(B,null,[e.editable?(l(),S(C,{key:0,class:"py-3",label:t(_)?"Скрыть форму":"Добавить запись",variant:"link",onClick:I[0]||(I[0]=v=>_.value=!t(_))},null,8,["label"])):x("",!0),o(J,{name:"slide-fade"},{default:i(()=>[t(_)?(l(),$("div",Da,[o(O,null,{default:i(()=>[o(z,{"cand-id":s.candId,onCancel:U,onUpdate:w},null,8,["cand-id"])]),_:1})])):x("",!0)]),_:1}),t(m)&&t(m).length?(l(),$("div",Ua,[(l(!0),$(B,null,Y(t(m),(v,P)=>(l(),$("div",{key:P,class:"text-sm text-gray-500 dark:text-gray-400 py-1"},[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:4})):(l(),S(O,{key:1},ne({header:i(()=>[Z("div",Va,V("Обследование на полиграфе ID #"+v.id),1)]),default:i(()=>[t(r)&&t(p)==v.id.toString()?(l(),S(z,{key:0,"cand-id":s.candId,poligraf:v,onCancel:U,onUpdate:w},null,8,["cand-id","poligraf"])):(l(),$("div",Ea,[v.theme?(l(),S(E,{key:0,label:"Тема проверки"},{default:i(()=>[F(V(v.theme),1)]),_:2},1024)):x("",!0),v.results?(l(),S(E,{key:1,label:"Результат"},{default:i(()=>[F(V(v.results),1)]),_:2},1024)):x("",!0),o(E,{label:"Сотрудник"},{default:i(()=>[F(V(v.username),1)]),_:2},1024),o(E,{label:"Дата записи"},{default:i(()=>[F(V(t(ue)(v.created,"YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024)]))]),_:2},[s.editable&&(!t(r)||t(p)!=v.id.toString())?{name:"footer",fn:i(()=>[o(q,{"cand-id":s.candId,item:"poligrafs",onUpdate:j=>{y.value=v,p.value=v.id.toString(),r.value=!0},onDelete:j=>b(v.id)},null,8,["cand-id","onUpdate","onDelete"])]),key:"0"}:void 0]),1024))]))),128))])):(l(),$("div",Fa,[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:4})):(l(),$("p",Ca,"Обследование на полиграфе не проводилось"))]))],64)}}}),xa=M({__name:"InvestigationForm",props:{investigation:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const d=a,n=H(e.investigation);function s(){d("update",n.value),u()}function r(){d("cancel"),u()}function u(){Object.assign(n.value,{theme:"",info:""})}return(_,p)=>{const y=pe,m=re,c=Pe,g=se,w=ce;return l(),S(w,{state:t(n),onSubmit:ee(s,["prevent"])},{default:i(()=>[o(m,{class:"mb-3",label:"Тема проверки"},{default:i(()=>[o(y,{modelValue:t(n).theme,"onUpdate:modelValue":p[0]||(p[0]=b=>t(n).theme=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Тема проверки"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Информация"},{default:i(()=>[o(c,{modelValue:t(n).info,"onUpdate:modelValue":p[1]||(p[1]=b=>t(n).info=b),modelModifiers:{trim:!0,lazy:!0},required:"",autoresize:"",placeholder:"Информация"},null,8,["modelValue"])]),_:1}),o(g,{onCancel:r})]),_:1},8,["state"])}}}),Oa={key:0,class:"py-3"},Ta={key:1},Ma={class:"tex-base text-red-800 font-medium"},Aa={key:1},Pa={key:2,class:"p-3"},Ba={key:1,class:"text-red-800"},qa=M({__name:"InvestigateTab",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,d;te(["FormsInvestigationForm","ElementsSkeletonDiv"]);const f=G(),n=W(),s=e,r=D(!1),u=D(!1),_=D(!1),p=D(""),y=D({}),m=D([]),{refresh:c,status:g}=([a,d]=Q(async()=>ie("investigations",async()=>{m.value=await f("/api/investigations/"+s.candId)})),a=await a,d(),a);async function w(k){u.value=!0,h(),await f("/api/investigations/"+s.candId,{method:"POST",body:k}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),u.value=!1,await c()}async function b(k){h(),confirm("Вы действительно хотите удалить запись?")&&(await f(`/api/investigations/${k}`,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${k} удалена`,color:"primary"}),await c())}function U(){h(),c()}function h(){_.value=!1,p.value="",r.value=!1}return(k,I)=>{const C=R,z=xa,O=X,T=oe,E=ae,q=le;return l(),$(B,null,[s.editable?(l(),S(C,{key:0,class:"py-3",label:t(r)?"Скрыть форму":"Добавить запись",variant:"link",onClick:I[0]||(I[0]=v=>r.value=!t(r))},null,8,["label"])):x("",!0),o(J,{name:"slide-fade"},{default:i(()=>[t(r)?(l(),$("div",Oa,[o(O,null,{default:i(()=>[o(z,{"cand-id":s.candId,onCancel:U,onUpdate:w},null,8,["cand-id"])]),_:1})])):x("",!0)]),_:1}),t(m)&&t(m).length?(l(),$("div",Ta,[(l(!0),$(B,null,Y(t(m),(v,P)=>(l(),$("div",{key:P,class:"text-sm text-gray-500 dark:text-gray-400 py-1"},[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:4})):(l(),S(O,{key:1},ne({header:i(()=>[Z("div",Ma,V("Расследование/проверка ID #"+v.id),1)]),default:i(()=>[t(_)&&t(p)==v.id.toString()?(l(),S(z,{key:0,"cand-id":s.candId,investigation:v,onCancel:U,onUpdate:w},null,8,["cand-id","investigation"])):(l(),$("div",Aa,[v.theme?(l(),S(E,{key:0,label:"Тема проверки"},{default:i(()=>[F(V(v.theme),1)]),_:2},1024)):x("",!0),v.info?(l(),S(E,{key:1,label:"Информация"},{default:i(()=>[F(V(v.info),1)]),_:2},1024)):x("",!0),o(E,{label:"Сотрудник"},{default:i(()=>[F(V(v.username),1)]),_:2},1024),o(E,{label:"Дата записи"},{default:i(()=>[F(V(t(ue)(v.created,"YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024)]))]),_:2},[s.editable&&(!t(_)||t(p)!=v.id.toString())?{name:"footer",fn:i(()=>[o(q,{"cand-id":s.candId,item:"investigations",onUpdate:j=>{y.value=v,p.value=v.id.toString(),_.value=!0},onDelete:j=>b(v.id)},null,8,["cand-id","onUpdate","onDelete"])]),key:"0"}:void 0]),1024))]))),128))])):(l(),$("div",Pa,[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:4})):(l(),$("p",Ba,"Расследования/Проверки не проводились"))]))],64)}}}),ja=M({__name:"InquiryForm",props:{inquiry:{type:Object,default:{}},candId:{type:String,default:""}},emits:["cancel","update"],setup(e,{emit:a}){const d=a,n=H(e.inquiry);function s(){d("update",n.value),u()}function r(){d("cancel"),u()}function u(){Object.assign(n.value,{info:"",origins:"",initiator:""})}return(_,p)=>{const y=Pe,m=re,c=pe,g=se,w=ce;return l(),S(w,{state:t(n),onSubmit:ee(s,["prevent"])},{default:i(()=>[o(m,{class:"mb-3",label:"Информация*"},{default:i(()=>[o(y,{modelValue:t(n).info,"onUpdate:modelValue":p[0]||(p[0]=b=>t(n).info=b),modelModifiers:{trim:!0,lazy:!0},required:"",autoresize:"",placeholder:"Информация"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Инициатор*"},{default:i(()=>[o(c,{modelValue:t(n).initiator,"onUpdate:modelValue":p[1]||(p[1]=b=>t(n).initiator=b),modelModifiers:{trim:!0,lazy:!0},required:"",placeholder:"Инициатор"},null,8,["modelValue"])]),_:1}),o(m,{class:"mb-3",label:"Источники"},{default:i(()=>[o(c,{modelValue:t(n).origins,"onUpdate:modelValue":p[2]||(p[2]=b=>t(n).origins=b),modelModifiers:{trim:!0,lazy:!0},placeholder:"Источники"},null,8,["modelValue"])]),_:1}),o(g,{onCancel:r})]),_:1},8,["state"])}}}),La={key:0,class:"py-3"},Ha={key:1},Na={class:"tex-base text-red-800 font-medium"},Ya={key:1},Ra={key:2,class:"p-3"},Ga={key:1,class:"text-red-800"},Wa=M({__name:"InquiryTab",props:{candId:{type:String,default:""},editable:{type:Boolean,default:!1}},async setup(e){let a,d;te(["FormsInquiryForm","ElementsSkeletonDiv"]);const f=G(),n=W(),s=e,r=D(!1),u=D(!1),_=D(!1),p=D(""),y=D({}),m=D([]),{refresh:c,status:g}=([a,d]=Q(async()=>ie("inquiries",async()=>{m.value=await f(`/api/inquiries/${s.candId}`)})),a=await a,d(),a);async function w(k){u.value=!0,U(),await f("/api/inquiries/"+s.candId,{method:"POST",body:k}),n.add({icon:"i-heroicons-check-circle",title:"Успешно",description:"Информация обновлена",color:"green"}),u.value=!1,await c()}async function b(k){U(),confirm("Вы действительно хотите удалить запись?")&&(await f(`/api/inquiries/${k}`,{method:"DELETE"}),n.add({icon:"i-heroicons-information-circle",title:"Информация",description:`Запись с ID ${k} удалена`,color:"primary"}),await c())}function U(){_.value=!1,p.value="",r.value=!1}function h(){U(),c()}return(k,I)=>{const C=R,z=ja,O=X,T=oe,E=ae,q=le;return l(),$(B,null,[s.editable?(l(),S(C,{key:0,class:"py-3",label:t(r)?"Скрыть форму":"Добавить запись",variant:"link",onClick:I[0]||(I[0]=v=>r.value=!t(r))},null,8,["label"])):x("",!0),o(J,{name:"slide-fade"},{default:i(()=>[t(r)?(l(),$("div",La,[o(O,null,{default:i(()=>[o(z,{"cand-id":s.candId,onCancel:h,onUpdate:w},null,8,["cand-id"])]),_:1})])):x("",!0)]),_:1}),t(m)&&t(m).length?(l(),$("div",Ha,[(l(!0),$(B,null,Y(t(m),(v,P)=>(l(),$("div",{key:P,class:"text-sm text-gray-500 dark:text-gray-400 py-1"},[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:6})):(l(),S(O,{key:1},ne({header:i(()=>[Z("div",Na,V("Запрос о сотруднике ID #"+v.id),1)]),default:i(()=>[t(_)&&t(p)==v.id.toString()?(l(),S(z,{key:0,"cand-id":s.candId,inquiry:v,onCancel:h,onUpdate:w},null,8,["cand-id","inquiry"])):(l(),$("div",Ya,[v.info?(l(),S(E,{key:0,label:"Информация"},{default:i(()=>[F(V(v.info),1)]),_:2},1024)):x("",!0),v.initiator?(l(),S(E,{key:1,label:"Иннициатор"},{default:i(()=>[F(V(v.initiator),1)]),_:2},1024)):x("",!0),v.origins?(l(),S(E,{key:2,label:"Источники"},{default:i(()=>[F(V(v.origins),1)]),_:2},1024)):x("",!0),o(E,{label:"Сотрудник"},{default:i(()=>[F(V(v.username),1)]),_:2},1024),o(E,{label:"Дата записи"},{default:i(()=>[F(V(t(ue)(v.created,"YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024)]))]),_:2},[s.editable&&(!t(_)||t(p)!=v.id.toString())?{name:"footer",fn:i(()=>[o(q,{"cand-id":s.candId,item:"inquiries",onDelete:j=>b(v.id),onUpdate:j=>{y.value=v,p.value=v.id.toString(),_.value=!0}},null,8,["cand-id","onDelete","onUpdate"])]),key:"0"}:void 0]),1024))]))),128))])):(l(),$("div",Ra,[t(g)=="pending"||t(u)?(l(),S(T,{key:0,rows:6})):(l(),$("p",Ga,"Запросы о сотруднике не поступали"))]))],64)}}}),Ka=De(_e.ui.strategy,_e.ui.tabs,Xt),Ja=M({components:{UIcon:$e,HTabGroup:sa,HTabList:ia,HTab:ra,HTabPanels:ca,HTabPanel:da},inheritAttrs:!1,props:{modelValue:{type:Number,default:void 0},orientation:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},defaultIndex:{type:Number,default:0},items:{type:Array,default:()=>[]},unmount:{type:Boolean,default:!1},content:{type:Boolean,default:!0},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:a}){const{ui:d,attrs:f}=Me("tabs",H(e,"ui"),Ka,H(e,"class")),n=D(),s=D([]),r=D(),u=D(e.modelValue||e.defaultIndex);function _(y){var c;const m=(c=s.value[y])==null?void 0:c.$el;m&&r.value&&(r.value.style.top=`${m.offsetTop}px`,r.value.style.left=`${m.offsetLeft}px`,r.value.style.width=`${m.offsetWidth}px`,r.value.style.height=`${m.offsetHeight}px`)}function p(y){u.value=y,a("change",y),e.modelValue!==void 0&&a("update:modelValue",u.value),_(u.value)}return Ot(n,()=>{_(u.value)}),Ie(()=>e.modelValue,y=>{u.value=y,_(u.value)}),Ie(()=>e.items,async()=>{await Ke(),_(u.value)},{deep:!0}),ge(async()=>{await Ke(),_(u.value)}),dt(()=>st()),{ui:d,attrs:f,listRef:n,itemRefs:s,markerRef:r,selectedIndex:u,onChange:p}}}),Qa={class:"truncate"};function Xa(e,a,d,f,n,s){const r=$e,u=ye("HTab"),_=ye("HTabList"),p=ye("HTabPanel"),y=ye("HTabPanels"),m=ye("HTabGroup");return l(),S(m,me({vertical:e.orientation==="vertical","selected-index":e.selectedIndex,as:"div",class:e.ui.wrapper},e.attrs,{onChange:e.onChange}),{default:i(()=>[o(_,{ref:"listRef",class:N([e.ui.list.base,e.ui.list.background,e.ui.list.rounded,e.ui.list.shadow,e.ui.list.padding,e.ui.list.width,e.orientation==="horizontal"&&e.ui.list.height,e.orientation==="horizontal"&&"inline-grid items-center"]),style:Tt([e.orientation==="horizontal"&&`grid-template-columns: repeat(${e.items.length}, minmax(0, 1fr))`])},{default:i(()=>[Z("div",{ref:"markerRef",class:N(e.ui.list.marker.wrapper)},[Z("div",{class:N([e.ui.list.marker.base,e.ui.list.marker.background,e.ui.list.marker.rounded,e.ui.list.marker.shadow])},null,2)],2),(l(!0),$(B,null,Y(e.items,(c,g)=>(l(),S(u,{key:g,ref_for:!0,ref:"itemRefs",disabled:c.disabled,as:"template"},{default:i(({selected:w,disabled:b})=>[Z("button",{class:N([e.ui.list.tab.base,e.ui.list.tab.background,e.ui.list.tab.height,e.ui.list.tab.padding,e.ui.list.tab.size,e.ui.list.tab.font,e.ui.list.tab.rounded,e.ui.list.tab.shadow,w?e.ui.list.tab.active:e.ui.list.tab.inactive])},[de(e.$slots,"icon",{item:c,index:g,selected:w,disabled:b},()=>[c.icon?(l(),S(r,{key:0,name:c.icon,class:N(e.ui.list.tab.icon)},null,8,["name","class"])):x("",!0)]),de(e.$slots,"default",{item:c,index:g,selected:w,disabled:b},()=>[Z("span",Qa,V(c.label),1)])],2)]),_:2},1032,["disabled"]))),128))]),_:3},8,["class","style"]),e.content?(l(),S(y,{key:0,class:N(e.ui.container)},{default:i(()=>[(l(!0),$(B,null,Y(e.items,(c,g)=>(l(),S(p,{key:g,class:N(e.ui.base),unmount:e.unmount},{default:i(({selected:w})=>[de(e.$slots,c.slot||"item",{item:c,index:g,selected:w},()=>[F(V(c.content),1)])]),_:2},1032,["class","unmount"]))),128))]),_:3},8,["class"])):x("",!0)]),_:3},16,["vertical","selected-index","class","onChange"])}const Za=Te(Ja,[["render",Xa]]),el={key:0,class:"relative"},tl={class:"absolute bottom-0 right-20"},nl={class:"animate-pulse",style:{width:"30px"}},gl=M({__name:"[id]",async setup(e){let a,d;const f=G(),n=Kt(),s=Mt(),r=A(()=>s.params.id),u=D({}),{refresh:_}=([a,d]=Q(async()=>it("anketa",async()=>{u.value=await f("/api/persons/"+r.value)})),a=await a,d(),a),p=[{slot:"anketaTab",label:"Анкета",icon:"i-heroicons-user"},{slot:"checkTab",label:"Проверки",icon:"i-heroicons-check-circle"},{slot:"poligrafTab",label:"Полиграф",icon:"i-heroicons-bolt"},{slot:"investigateTab",label:"Расследования",icon:"i-heroicons-briefcase"},{slot:"inquiryTab",label:"Запросы",icon:"i-heroicons-document-text"}],y={current:{label:"Анкета редактируется текущим пользователем",color:"green"},thirdparty:{label:"Анкета редактируется другим пользователем",color:"red"},others:{label:"Анкета не редактируется пользователями",color:"blue"}},m=A(()=>{if(u.value.editable){if(u.value.user_id==n.value.id)return y.current;if(u.value.user_id!=n.value.id)return y.thirdparty}return y.others}),c=A(()=>u.value.editable&&n.value.role=="user"&&n.value.id==u.value.user_id);async function g(){confirm("Вы действительно хотите включить/выключить режим правки")&&(await f("/api/self/"+r.value),await _())}return At((w,b,U)=>{qt(),U()}),(w,b)=>{const U=Fn,h=Ne,k=R,I=jt,C=_a,z=Sa,O=za,T=qa,E=Wa,q=Za;return l(),$("div",null,[o(U,{"cand-id":t(r),destination:t(u).destination,editable:t(c)},null,8,["cand-id","destination","editable"]),t(n).role=="user"?(l(),$("div",el,[Z("div",tl,[o(k,{variant:"link",size:"xl",onClick:g},{default:i(()=>[Z("div",nl,[o(h,{color:t(m).color,variant:"solid"},{default:i(()=>[F(V(t(m).label),1)]),_:1},8,["color"])])]),_:1})])])):x("",!0),o(I,{div:"py-3",header:`${t(u).surname} ${t(u).firstname} ${t(u).patronymic?t(u).patronymic:""}`},null,8,["header"]),o(q,{items:p},{anketaTab:i(()=>[o(C,{"cand-id":t(r),editable:t(c),person:t(u),onUpdate:b[0]||(b[0]=v=>t(_)())},null,8,["cand-id","editable","person"])]),checkTab:i(()=>[o(z,{"cand-id":t(r),editable:t(c)},null,8,["cand-id","editable"])]),poligrafTab:i(()=>[o(O,{"cand-id":t(r),editable:t(c)},null,8,["cand-id","editable"])]),investigateTab:i(()=>[o(T,{"cand-id":t(r),editable:t(c)},null,8,["cand-id","editable"])]),inquiryTab:i(()=>[o(E,{"cand-id":t(r),editable:t(c)},null,8,["cand-id","editable"])]),_:1})])}}});export{gl as default};
