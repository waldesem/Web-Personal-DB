import{g as w,h as V,i as B,w as a,o as c,j as t,c as m,a as p,b as o,H as D,C as b,d as l,t as r,l as N,e as z,q as I,I as L}from"./BPBLQG6i.js";import{a as j,_ as A}from"./B7F370T9.js";import{_ as F}from"./C-zgMKpD.js";import{_ as G}from"./CLw5YCjI.js";import{_ as P}from"./Bf0WHWn1.js";import{_ as T}from"./jOVDlQnc.js";import{d as q,a as E,e as H,s as M}from"./C7PE2IGf.js";import"./DgIFj23g.js";import"./7ab4JJky.js";import"./C85h92ts.js";const J={key:0,class:"relative"},K={class:"absolute inset-y-0 right-0",title:"Загрузить json"},O={class:"mt-14 mb-8"},Q={class:"caption-bottom text-left"},R={key:1,class:"grid place-items-center py-8"},ie=w({__name:"persons",async setup(W){let d,_;const v=q(),y=E(),n=H(),f=M();function h(){}return[d,_]=V(()=>n.getCandidates()),await d,_(),(X,s)=>{const k=N,u=j,g=A,x=z,C=F,i=I,$=G,S=P,U=T;return c(),B(U,null,{default:a(()=>[t(f).user.value.role==t(y).classes.value.roles.user?(c(),m("div",J,[p("div",K,[o(g,{class:"mb-3",size:"md"},{label:a(()=>[o(k,{name:"i-heroicons-cloud-arrow-up",class:"w-8 h-8",style:{cursor:"pointer"}})]),default:a(()=>[D(o(u,{type:"file",accept:".json",multiple:"",onChange:s[0]||(s[0]=e=>t(v).submitFile(e,"persons","0"))},null,512),[[L,!1]])]),_:1})])])):b("",!0),p("div",O,[o(u,{modelValue:t(n).persons.value.search,"onUpdate:modelValue":s[1]||(s[1]=e=>t(n).persons.value.search=e),placeholder:"поиск по фамилии, имени, отчеству, дате рождения, инн",size:"lg",onInput:h},null,8,["modelValue"])]),o($,{"empty-state":{label:"Ничего не найдено."},columns:[{key:"id",label:"#"},{key:"region",label:"Регион"},{key:"surname",label:"Фамилия Имя Отчество"},{key:"birthday",label:"Дата рождения"},{key:"birthplace",label:"Место рождения"},{key:"inn",label:"ИНН"},{key:"created",label:"Обновлено"},{key:"username",label:"Сотрудник"},{key:"editable",label:"Статус"}],rows:t(n).persons.value.candidates},{"id-data":a(({row:e})=>[l(r(e.id),1)]),"region-data":a(({row:e})=>[l(r(e.region),1)]),"surname-data":a(({row:e})=>[o(x,{to:`/profile/${e.id}`},{default:a(()=>[l(r(`${e.surname} ${e.firstname} ${e.patronymic?e.patronymic:""}`),1)]),_:2},1032,["to"])]),"birthday-data":a(({row:e})=>[l(r(new Date(e.birthday).toLocaleDateString()),1)]),"birthplace-data":a(({row:e})=>[l(r(e.birthplace?e.birthplace:""),1)]),"inn-data":a(({row:e})=>[l(r(e.inn),1)]),"created-data":a(({row:e})=>[l(r(new Date(e.created).toLocaleDateString()),1)]),"username-data":a(({row:e})=>[l(r(e.username?e.username.toString().split(" ")[0]:""),1)]),"editable-data":a(({row:e})=>[o(C,{size:"2xl",color:e.editable?"green":"red"},null,8,["color"])]),caption:a(()=>[p("caption",Q,[o(i,{variant:"link",icon:"i-heroicons-arrow-path",label:`Обновлено: ${t(n).persons.value.updated}`,onClick:s[2]||(s[2]=e=>t(n).getCandidates())},null,8,["label"])])]),_:1},8,["rows"]),t(n).persons.value.prev||t(n).persons.value.next?(c(),m("div",R,[o(S,{orientation:"horizontal"},{default:a(()=>[o(i,{disabled:!t(n).persons.value.prev,variant:"link",icon:"i-heroicons-chevron-double-left",onClick:s[3]||(s[3]=e=>t(n).getCandidates(t(n).persons.value.page-1))},null,8,["disabled"]),o(i,{disabled:!t(n).persons.value.next,variant:"link",icon:"i-heroicons-chevron-double-right",onClick:s[4]||(s[4]=e=>t(n).getCandidates(t(n).persons.value.page+1))},null,8,["disabled"])]),_:1})])):b("",!0)]),_:1})}}});export{ie as default};
