import{g as B,h as D,i as V,w as n,o as d,j as t,c as m,a as r,b as o,H as z,C as b,G as I,d as l,t as i,B as N,l as L,e as j,q as G,I as A}from"./DqpPj892.js";import{b as E,a as F,_ as H}from"./Cvx2MeBc.js";import{d as M,_ as P}from"./D7n4dlqR.js";import{_ as T}from"./CLLHl9q7.js";import{_ as q}from"./BJHikfl-.js";import{_ as J}from"./mt7KvKuW.js";import{d as K,a as O,e as Q,s as R}from"./B_evGm4m.js";import"./08JNKZsB.js";import"./D06j80tp.js";import"./B-3zbiFr.js";const W={key:0,class:"relative"},X={class:"absolute inset-y-0 right-0",title:"Загрузить json"},Y={class:"my-6"},Z={class:"caption-bottom text-left"},ee={key:1,class:"grid place-items-center py-8"},ue=B({__name:"persons",async setup(te){let p,_;const v=K(),y=O(),a=Q(),f=R(),h=M(async()=>{await a.getCandidates()},500);return[p,_]=D(()=>a.getCandidates()),await p,_(),(ae,s)=>{const k=L,u=E,g=F,x=H,C=j,$=P,c=G,S=T,U=q,w=J;return d(),V(w,null,{default:n(()=>[t(f).user.value.role==t(y).classes.value.roles.user?(d(),m("div",W,[r("div",X,[o(g,{class:"mb-3",size:"md"},{label:n(()=>[o(k,{name:"i-heroicons-cloud-arrow-up",class:"w-8 h-8",style:{cursor:"pointer",color:"dodgerblue"}})]),default:n(()=>[z(o(u,{type:"file",accept:".json",multiple:"",onChange:s[0]||(s[0]=e=>t(v).submitFile(e,"persons","0"))},null,512),[[A,!1]])]),_:1})])])):b("",!0),o(x,{header:"КАНДИДАТЫ"}),r("div",Y,[o(u,{modelValue:t(a).persons.value.search,"onUpdate:modelValue":s[1]||(s[1]=e=>t(a).persons.value.search=e),placeholder:"поиск по фамилии, имени, отчеству, дате рождения или инн",size:"lg",onInput:I(t(h),["prevent"])},null,8,["modelValue","onInput"])]),o(S,{"empty-state":{label:"Ничего не найдено."},columns:[{key:"id",label:"#"},{key:"region",label:"Регион"},{key:"surname",label:"Фамилия Имя Отчество"},{key:"birthday",label:"Дата рождения"},{key:"inn",label:"ИНН"},{key:"snils",label:"СНИЛС"},{key:"created",label:"Обновлено"},{key:"username",label:"Сотрудник"},{key:"editable",label:"Статус"}],rows:t(a).persons.value.candidates},{"id-data":n(({row:e})=>[l(i(e.id),1)]),"region-data":n(({row:e})=>[l(i(e.region),1)]),"surname-data":n(({row:e})=>[o(C,{to:`/profile/${e.id}`},{default:n(()=>[l(i(`${e.surname} ${e.firstname} ${e.patronymic?e.patronymic:""}`),1)]),_:2},1032,["to"])]),"birthday-data":n(({row:e})=>[l(i(new Date(e.birthday).toLocaleDateString()),1)]),"birthplace-data":n(({row:e})=>[l(i(e.birthplace?e.birthplace:""),1)]),"created-data":n(({row:e})=>[l(i(new Date(e.created).toLocaleDateString()),1)]),"username-data":n(({row:e})=>[l(i(e.username?e.username.toString().split(" ")[0]:""),1)]),"editable-data":n(({row:e})=>[r("div",{class:N(["text-center me-12",e.editable?"animate-pulse":""])},[o($,{size:"2xl",color:e.editable?"red":"green"},null,8,["color"])],2)]),caption:n(()=>[r("caption",Z,[o(c,{variant:"link",icon:"i-heroicons-arrow-path",label:`Обновлено: ${t(a).persons.value.updated}`,onClick:s[2]||(s[2]=e=>t(a).getCandidates())},null,8,["label"])])]),_:1},8,["rows"]),t(a).persons.value.prev||t(a).persons.value.next?(d(),m("div",ee,[o(U,{orientation:"horizontal"},{default:n(()=>[o(c,{disabled:!t(a).persons.value.prev,variant:"link",icon:"i-heroicons-chevron-double-left",onClick:s[3]||(s[3]=e=>t(a).getCandidates(t(a).persons.value.page-1))},null,8,["disabled"]),o(c,{disabled:!t(a).persons.value.next,variant:"link",icon:"i-heroicons-chevron-double-right",onClick:s[4]||(s[4]=e=>t(a).getCandidates(t(a).persons.value.page+1))},null,8,["disabled"])]),_:1})])):b("",!0)]),_:1})}}});export{ue as default};
