import{g as D,h as V,i as B,w as a,o as c,j as t,c as m,a as p,b as o,H as N,C as b,d as l,t as r,l as z,e as I,q as L,I as j}from"./BrjdBAS6.js";import{b as A,a as E,_ as F}from"./BaLSyn9W.js";import{_ as G}from"./CRoO-taa.js";import{_ as H}from"./CewLIM-l.js";import{_ as P}from"./CHkULda6.js";import{_ as T}from"./C65ECaZ4.js";import{d as q,a as M,e as J,s as K}from"./CfpFGIXT.js";import"./DjPh29BU.js";import"./Cb9qdVfj.js";import"./8q6nTwcG.js";const O={key:0,class:"relative"},Q={class:"absolute inset-y-0 right-0",title:"Загрузить json"},R={class:"my-6"},W={class:"caption-bottom text-left"},X={key:1,class:"grid place-items-center py-8"},pe=D({__name:"persons",async setup(Y){let _,d;const v=q(),y=M(),n=J(),f=K();function h(){}return[_,d]=V(()=>n.getCandidates()),await _,d(),(Z,s)=>{const k=z,u=A,g=E,x=F,C=I,$=G,i=L,S=H,U=P,w=T;return c(),B(w,null,{default:a(()=>[t(f).user.value.role==t(y).classes.value.roles.user?(c(),m("div",O,[p("div",Q,[o(g,{class:"mb-3",size:"md"},{label:a(()=>[o(k,{name:"i-heroicons-cloud-arrow-up",class:"w-8 h-8",style:{cursor:"pointer"}})]),default:a(()=>[N(o(u,{type:"file",accept:".json",multiple:"",onChange:s[0]||(s[0]=e=>t(v).submitFile(e,"persons","0"))},null,512),[[j,!1]])]),_:1})])])):b("",!0),o(x,{div:"py-1",header:"КАНДИДАТЫ"}),p("div",R,[o(u,{modelValue:t(n).persons.value.search,"onUpdate:modelValue":s[1]||(s[1]=e=>t(n).persons.value.search=e),placeholder:"поиск по фамилии, имени, отчеству, дате рождения, инн",size:"lg",onInput:h},null,8,["modelValue"])]),o(S,{"empty-state":{label:"Ничего не найдено."},columns:[{key:"id",label:"#"},{key:"region",label:"Регион"},{key:"surname",label:"Фамилия Имя Отчество"},{key:"birthday",label:"Дата рождения"},{key:"birthplace",label:"Место рождения"},{key:"inn",label:"ИНН"},{key:"created",label:"Обновлено"},{key:"username",label:"Сотрудник"},{key:"editable",label:"Статус"}],rows:t(n).persons.value.candidates},{"id-data":a(({row:e})=>[l(r(e.id),1)]),"region-data":a(({row:e})=>[l(r(e.region),1)]),"surname-data":a(({row:e})=>[o(C,{to:`/profile/${e.id}`},{default:a(()=>[l(r(`${e.surname} ${e.firstname} ${e.patronymic?e.patronymic:""}`),1)]),_:2},1032,["to"])]),"birthday-data":a(({row:e})=>[l(r(new Date(e.birthday).toLocaleDateString()),1)]),"birthplace-data":a(({row:e})=>[l(r(e.birthplace?e.birthplace:""),1)]),"inn-data":a(({row:e})=>[l(r(e.inn),1)]),"created-data":a(({row:e})=>[l(r(new Date(e.created).toLocaleDateString()),1)]),"username-data":a(({row:e})=>[l(r(e.username?e.username.toString().split(" ")[0]:""),1)]),"editable-data":a(({row:e})=>[o($,{size:"2xl",color:e.editable?"red":"green"},null,8,["color"])]),caption:a(()=>[p("caption",W,[o(i,{variant:"link",icon:"i-heroicons-arrow-path",label:`Обновлено: ${t(n).persons.value.updated}`,onClick:s[2]||(s[2]=e=>t(n).getCandidates())},null,8,["label"])])]),_:1},8,["rows"]),t(n).persons.value.prev||t(n).persons.value.next?(c(),m("div",X,[o(U,{orientation:"horizontal"},{default:a(()=>[o(i,{disabled:!t(n).persons.value.prev,variant:"link",icon:"i-heroicons-chevron-double-left",onClick:s[3]||(s[3]=e=>t(n).getCandidates(t(n).persons.value.page-1))},null,8,["disabled"]),o(i,{disabled:!t(n).persons.value.next,variant:"link",icon:"i-heroicons-chevron-double-right",onClick:s[4]||(s[4]=e=>t(n).getCandidates(t(n).persons.value.page+1))},null,8,["disabled"])]),_:1})])):b("",!0)]),_:1})}}});export{pe as default};
